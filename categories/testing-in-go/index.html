<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>testing-in-go | Ilija Eftimov ⚡️</title><meta name=keywords content><meta name=description content><meta name=author content="Ilija"><link rel=canonical href=https://ieftimov.com/categories/testing-in-go/><link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://ieftimov.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ieftimov.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ieftimov.com/favicon-32x32.png><link rel=apple-touch-icon href=https://ieftimov.com/apple-touch-icon.png><link rel=mask-icon href=https://ieftimov.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><link rel=alternate type=application/rss+xml href=https://ieftimov.com/categories/testing-in-go/index.xml><script async defer data-domain=ieftimov.com src=https://plausible.io/js/plausible.js></script><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><meta property="og:title" content="testing-in-go"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://ieftimov.com/categories/testing-in-go/"><meta name=twitter:card content="summary"><meta name=twitter:title content="testing-in-go"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://ieftimov.com/ accesskey=h title="Ilija Eftimov ⚡️ (Alt + H)">Ilija Eftimov ⚡️</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://ieftimov.com/ title=About><span>About</span></a></li><li><a href=https://ieftimov.com/posts title=Writing><span>Writing</span></a></li><li><a href=https://ieftimov.com/newsletter title=Newsletter><span>Newsletter</span></a></li><li><a href=https://forms.gle/orfXK5jh1LRaiFzo8 title="Suggest a topic"><span>Suggest a topic</span></a></li><li><a href=https://www.buymeacoffee.com/ieftimov title="Buy me a ☕"><span>Buy me a ☕</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>testing-in-go</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Stop Leaking Files</h2></header><section class=entry-content><p>No test suite is perfect. Some test suites are missing good helper functions; others are under-configured or over-customize. Some have obsolete packages included and are left unmaintained. Folks that have experience with more mature projects will likely agree that all of the above can be found in the wild.
Often, when we test our Go programs, need to create files. Such files can be just fixture files, or whole file trees, to set up the correct environment for the tests to run....</p></section><footer class=entry-footer>May 22, 2020&nbsp;·&nbsp;12 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Stop Leaking Files" href=https://ieftimov.com/post/testing-in-go-stop-leaking-files/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: WebSockets</h2></header><section class=entry-content><p>WebSockets offer duplex communication from a non-trusted source to a server that we own across a TCP socket connection. This means that, instead of continually polling the web server for updates and having to perform the whole TCP dance with each request, we can maintain a single TCP socket connection and then send and listen to messages on said connection.
In Go’s ecosystem there are few different implementations of the WebSocket protocol....</p></section><footer class=entry-footer>March 13, 2020&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: WebSockets" href=https://ieftimov.com/post/testing-in-go-websockets/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: HTTP Servers</h2></header><section class=entry-content><p>Go’s a great hammer for a lot of nails, one of the areas where I find it fitting is building HTTP servers. The net/http package of Go’s standard library makes it easy to attach HTTP handlers to any Go program. What I find delightful is that Go’s standard library, also has packages that make testing HTTP servers as easy as building them.
Nowadays, it’s widely accepted that test coverage is important and useful....</p></section><footer class=entry-footer>March 2, 2020&nbsp;·&nbsp;9 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: HTTP Servers" href=https://ieftimov.com/post/testing-in-go-testing-http-servers/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Clean Tests Using t.Cleanup</h2></header><section class=entry-content><p>Go v1.14 ships with improvements across different aspects of the language. Two of them are brand new t.Cleanup, and b.Cleanup methods, added to the testing package.
The introduction of these methods will make it easier for our tests to clean up after themselves. This was always achievable through the careful composition of (sub)tests and helper functions, but since Go 1.14, the testing package will ship with one right way to do that....</p></section><footer class=entry-footer>February 18, 2020&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Clean Tests Using t.Cleanup" href=https://ieftimov.com/post/testing-in-go-clean-tests-using-t-cleanup/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Golden Files</h2></header><section class=entry-content><p>Hardcoding the expected values in an assertion is a straightforward approach in testing. Most of the time, we know the expected output of the unit under test, so simply adding the raw value to the assertion works well.
Things can get tricky when we are testing a unit whose output is cumbersome to hardcode. The straightforward remedy is to extract this cumbersome value to a file that we can then read and compare the output of the unit under test to the output of the file....</p></section><footer class=entry-footer>February 2, 2020&nbsp;·&nbsp;14 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Golden Files" href=https://ieftimov.com/post/testing-in-go-golden-files/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Test Doubles by Example</h2></header><section class=entry-content><p>One of the biggest misconceptions is that doubles are a specific implementation of mocks or other testing constructs that we use in testing.
Dummies, mocks, stubs, fakes, and spies ARE test doubles. Test double is the category of these test constructs. Over the years, there has been some confusion around this concept.
It is my observation that this confusion arises from the naming of testing constructs that the popular testing frameworks use....</p></section><footer class=entry-footer>December 16, 2019&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Test Doubles by Example" href=https://ieftimov.com/post/testing-in-go-test-doubles-by-example/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Dependency Injection</h2></header><section class=entry-content><p>In software engineering, over the years folks have developed many patterns, techniques and refactoring maneuvers. Some have been long forgotten, while others have stood the test of times.
Such a long-standing technique is dependency injection. It is a concept and a programming technique where a construct is passed (injected) to another construct that depends on it.
In Golang, like in other languages, we use it to simplify our code and make it more testable....</p></section><footer class=entry-footer>December 1, 2019&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Dependency Injection" href=https://ieftimov.com/post/testing-in-go-dependency-injection/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Fixtures</h2></header><section class=entry-content><p>When I was researching the topic of test fixtures, I couldn’t find much about their beginnings. My first search was about the name of the person who coined “test fixtures”. Unfortunately, that was not a fruitful edeavour. The next logical step was to look for etymology of the phrase “test fixtures”, but the only search result that made sense was a Wikipedia page on the topic.
Judging by the Wiki page, it’s clear that test fixutures as a concept has been heavily popularized by Ruby on Rails....</p></section><footer class=entry-footer>September 16, 2019&nbsp;·&nbsp;13 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Fixtures" href=https://ieftimov.com/post/testing-in-go-fixtures/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Subtests</h2></header><section class=entry-content><p>Before we begin: The content in this article assumes knowledge of table-driven tests in Go. If you are unfamiliar with the concept, read this article to familiarize yourself.
With table-driven tests as the most popular testing approach, there is one annoying problem that every programmer will face: running selective tests. That’s because the traditional method of testing using table-driven tests in a single test function is not decomposable in granular subfunctions....</p></section><footer class=entry-footer>July 27, 2019&nbsp;·&nbsp;9 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Subtests" href=https://ieftimov.com/post/testing-in-go-subtests/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing in Go: Table-Driven Tests</h2></header><section class=entry-content><p>Coming from Ruby, which has excellent testing tools and libraries, the notion of table-driven tests was unusual for me. The widespread testing libraries in Ruby, such as RSpec, force the programmer to approach testing from a BDD standpoint. Thus, coming to Go and learning about the table-driven test was a new way of looking at tests for me.
Looking back, Dave Cheney’s 2013 seminal blog post “Writing table driven-tests in Go” was very likely my gateway to table-driven tests....</p></section><footer class=entry-footer>July 10, 2019&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Table-Driven Tests" href=https://ieftimov.com/post/testing-in-go-table-driven-tests/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://ieftimov.com/categories/testing-in-go/page/2/>Next Page »</a></nav></footer></main><footer class=footer><span>Copyright 2021 © Ilija Eftimov</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>