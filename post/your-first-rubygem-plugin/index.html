<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Write your first Rubygems plugin | Ilija Eftimov ⚡️</title><meta name=keywords content="plugin,taken"><meta name=description content="I don&rsquo;t think that at this point Rubygems needs any introduction. Except if you have been living under a rock for the last 10 years or so. In that case, I think that you wouldn&rsquo;t be here reading this blog. You would be having a problem understanding why someone would like to share what they are eating, or what they are doing at the moment. For the rest of you, have you heard that Rubygems is extensible?"><meta name=author content="Ilija"><link rel=canonical href=https://ieftimov.com/post/your-first-rubygem-plugin/><link href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://ieftimov.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ieftimov.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ieftimov.com/favicon-32x32.png><link rel=apple-touch-icon href=https://ieftimov.com/apple-touch-icon.png><link rel=mask-icon href=https://ieftimov.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script async defer data-domain=ieftimov.com src=https://plausible.io/js/plausible.js></script><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><meta property="og:title" content="Write your first Rubygems plugin"><meta property="og:description" content="I don&rsquo;t think that at this point Rubygems needs any introduction. Except if you have been living under a rock for the last 10 years or so. In that case, I think that you wouldn&rsquo;t be here reading this blog. You would be having a problem understanding why someone would like to share what they are eating, or what they are doing at the moment. For the rest of you, have you heard that Rubygems is extensible?"><meta property="og:type" content="article"><meta property="og:url" content="https://ieftimov.com/post/your-first-rubygem-plugin/"><meta property="og:image" content="https://ieftimov.com/cards/your-first-rubygems-plugin.png"><meta property="article:published_time" content="2016-03-31T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ieftimov.com/cards/your-first-rubygems-plugin.png"><meta name=twitter:title content="Write your first Rubygems plugin"><meta name=twitter:description content="I don&rsquo;t think that at this point Rubygems needs any introduction. Except if you have been living under a rock for the last 10 years or so. In that case, I think that you wouldn&rsquo;t be here reading this blog. You would be having a problem understanding why someone would like to share what they are eating, or what they are doing at the moment. For the rest of you, have you heard that Rubygems is extensible?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ieftimov.com/posts/"},{"@type":"ListItem","position":2,"name":"Write your first Rubygems plugin","item":"https://ieftimov.com/post/your-first-rubygem-plugin/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Write your first Rubygems plugin","name":"Write your first Rubygems plugin","description":"I don\u0026amp;rsquo;t think that at this point Rubygems needs any introduction. Except if you have been living under a rock for the last 10 years or so. In that case, I think that you …","keywords":["plugin","taken"],"articleBody":"I don’t think that at this point Rubygems needs any introduction. Except if you have been living under a rock for the last 10 years or so. In that case, I think that you wouldn’t be here reading this blog. You would be having a problem understanding why someone would like to share what they are eating, or what they are doing at the moment. For the rest of you, have you heard that Rubygems is extensible? Let’s see how Rubygems does this, and how we can make our own Rubygem plugin.\nExtensibility Rubygems, since version 1.3.2 has the ability to load plugins installed in the gems collection or the $LOAD_PATH. This means that you can create a Ruby program that will extend Rubygems with your own logic. The best way to go about this is by packing it into a gem. It gets a bit of meta, I know. Basically, what I am saying is that you can have a gem which will extend Rubygems, when installed.\nNow, there are is a naming convention when it comes to plugins. They must be named rubygems_plugin and placed at the root of your gem’s #require_path. Plugins are discovered via Gem::find_files and then loaded. But, instead of dwelling into the theory, why don’t we go ahead and build one ourselves?\nTaken? No, not this guy!\nWe are going to keep it peaceful here, no guns, kidnappers and violence. We will continue talking about gems. Any time we want to create a new gem, we are in a need of a name. Let’s make a Rubygems plugin that will add a command to check if a gem name is available. The desired command will be:\n1  gem taken liam   And the output can vary between\n1  The gem name 'liam' is taken.   and\n1  It will be yours. Oh yes. It will be yours. The gem name 'liam' is available.   And you guess it - the plugin’s name will be taken.\nSetting the foundations Let’s create a new gem, using the command:\n1  bundle new taken   This will create a new barebones gem, called Taken:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  create taken/Gemfile create taken/.gitignore create taken/lib/taken.rb create taken/lib/taken/version.rb create taken/taken.gemspec create taken/Rakefile create taken/README.md create taken/bin/console create taken/bin/setup create taken/.travis.yml create taken/test/test_helper.rb create taken/test/taken_test.rb create taken/LICENSE.txt create taken/CODE_OF_CONDUCT.md Initializing git repo in /some/path/here/taken   First, let’s do a bit of restructuring of our gem files and directories, before we start with writing some code. In the lib directory, we will need to add the rubygems_plugin.rb file, which will be picked up by Rubygems and will load our new command. Next, in the same directory, we will need to create a new directory with the name rubygems. Here, we will store all of the needed files for this particular Rubygems plugin.\nThis is what our lib directory should look like:\n1 2  ➜ ls lib rubygems/ rubygems_plugin.rb   That’s all. Let’s open the rubygems_plugin.rb and start writing our new command.\nDefining the new command First, in the plugin file we will need to register our new command. Rubygems has this utility class, called CommandManager. It registers and installs all the individual sub-commands supported by the gem command. If you would like to register a new command against the Gem::CommandManager instance, you need to do the following:\n1 2 3  require \"rubygems/command_manager\" Gem::CommandManager.instance.register_command(:taken)   This will tell Rubygems that there’s a new command in town, called taken. This also expects that the command program will be stored in the lib/rubygems/commands/taken_command.rb file. Let’s create it!\n1 2  class Gem::Commands::TakenCommand Gem::Command end   There are couple of key things when it comes to Rubygems plugins. The first would be that each command class should inherit from the Gem::Command class. If you look inside the actual source code of the Gem::Command class, you will notice the following comment:\n1 2 3  # Base class for all Gem commands. When creating a new gem command, # define #initialize, #execute, #arguments, #defaults_str, # #description and #usage (as appropriate)...   This means that, in our new command we will need to implement the required methods. Let’s begin by adding the initialize method:\n1 2 3  def initialize super(\"taken\", \"Checks if the gem name is taken.\") end   Since our taken command will not need any special configurations, we can keep the initialize method short and sweet. As the first argument to the initializer, we pass the command name - in our case taken. The second argument is the short summary of the command.\nThe next method that we will need to override is the arguments methods. This method is pretty simple - it’s just used to provide details of the arguments that a command will take. In our case, that’s the gem name, whose name we would like to check. Our implementation of the method would look like:\n1 2 3  def arguments # :nodoc: \"GEMNAME gem name to check\" end   Next is the description method. All it does is return a string containing a longer description of what the command will do.\n1 2 3 4 5  def description  The `taken` command gets all of the available gems names and check if a gem name is free or taken. EOF end   These are the only methods that we need at the moment. The last one is the execute method, which will do all of the work in our new Rubygems command.\nImplementing execute This method will do most of the heavy lifting in our plugin. We can separate the flow of the command in couple of steps:\n Get the gem name from the command arguments, Throw some kind of an error if it’s blank or has multiple gem names, Fetch the latest list of gems, Find out if a gem with the name already exists, and Depending on the former step, inform the user for the result  First, let’s take the gem name from the command arguments. If you took a bit of a deeper look in the Gem::Command class, I am sure you’ve noticed the Gem::Command#get_one_gem_name method. This method will take care of the first two steps of the flow. The actual source code is the following:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  ## # Get a single gem name from the command line. Fail if there is no gem name # or if there is more than one gem name given. def get_one_gem_name args = options[:args] if args.nil? or args.empty? then raise Gem::CommandLineError, \"Please specify a gem name on the command line (e.g. gem build GEMNAME)\" end if args.size  1 then raise Gem::CommandLineError, \"Too many gem names (#{args.join(', ')}); please specify only one\" end args.first end   Nice and easy. Let’s add invoke this method in our execute method:\n1 2 3  def execute gem_name = get_one_gem_name end   The next step is to get the latest list of gems. Rubygems has a class called Gem::SpecFetcher, that handles metadata updates from remote gem repositories. Simply said, this class with retrieve gem specifications and allow you to work with them. Now, under the hood, the Gem::SpecFetcher uses a class called Gem::RemoteFetcher. This class handles communication with remote sources, like Rubygems.org. It knows how to fetch gem details and info.\nSince we would like to have our command to work with the gem specs, we need to introduce a fetcher to our execute method and utilize the Gem::SpecFetcher#detect method.\n1 2 3 4 5 6 7 8  def execute gem_name = get_one_gem_name fetcher = Gem::SpecFetcher.fetcher spec_tuples = fetcher.detect do |name_tuple| gem_name == name_tuple.name end end   The spec_tuples will be a collection of objects from the Gem::NameTuple class. If you open it’s source code, you can see that it’s a utility class that represents a gem, in a certain format. The explanation within the class is the following:\n1 2  # Represents a gem of name +name+ at +version+ of +platform+. These # wrap the data returned from the indexes.   Since each Gem::NameTuple object has a name method, we compare the gem name that was provided by the user with the name from the gem spec. If it matches, that means that there’s already a gem with that name.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  def execute gem_name = get_one_gem_name fetcher = Gem::SpecFetcher.fetcher spec_tuples = fetcher.detect do |name_tuple| gem_name == name_tuple.name end if name_free?(spec_tuples) $stdout.puts \"It will be yours. Oh yes. It will be yours. The gem name '#{name}' is available.\" else $stdout.puts \"The gem name '#{name}' is taken.\" end private def name_free?(spec) !spec.flatten.length.zero? end end   This is it. We check if the the spec_tuples length is not zero and we show the user the appropriate message.\nBeyond the command If you have been following this small tutorial, I am sure you are starting to get an idea of how you can utilize Rubygems' API to build a plugin. You could pack all of this logic into a gem, add some tests and publish it. Then people can install the gem and use the newly created taken command.\nBut, this command is just scratching the surface of the possibilities that Rubygems offers. And as a side-win, the Rubygems code is really great. In the Git logs you can see names that are well respected in the Ruby community. You can learn how they’ve modeled their exceptions. Or maybe, how they do the security or the HTTP layer.\nHave you ever done any contributions to Rubygems? Or maybe you have written a Rubygems plugin? Or maybe, you would like to write one but you have run out of ideas? Hit me up in the comments!\nLiked this article? You can buy me a coffee. Or simply subscribe to my newsletter and get my fresh posts in your inbox. It's short and sweet, going out monthly to over 1,000 subscribers.  ","wordCount":"1660","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Ilija"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ieftimov.com/post/your-first-rubygem-plugin/"},"publisher":{"@type":"Organization","name":"Ilija Eftimov ⚡️","logo":{"@type":"ImageObject","url":"https://ieftimov.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://ieftimov.com/ accesskey=h title="Ilija Eftimov ⚡️ (Alt + H)">Ilija Eftimov ⚡️</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://ieftimov.com/posts title=Archive><span>Archive</span></a></li><li><a href=https://ieftimov.com/about title=About><span>About</span></a></li><li><a href=https://ieftimov.com/newsletter title=Newsletter><span>Newsletter</span></a></li><li><a href=https://forms.gle/orfXK5jh1LRaiFzo8 title="Suggest a topic"><span>Suggest a topic</span></a></li><li><a href=https://www.buymeacoffee.com/ieftimov title="Buy me a ☕"><span>Buy me a ☕</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Write your first Rubygems plugin</h1><div class=post-meta>March 31, 2016&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Ilija</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#extensibility aria-label=Extensibility>Extensibility</a></li><li><a href=#taken aria-label=Taken?>Taken?</a></li><li><a href=#setting-the-foundations aria-label="Setting the foundations">Setting the foundations</a></li><li><a href=#defining-the-new-command aria-label="Defining the new command">Defining the new command</a></li><li><a href=#implementing-execute aria-label="Implementing execute">Implementing <code>execute</code></a></li><li><a href=#beyond-the-command aria-label="Beyond the command">Beyond the command</a></li></ul></div></details></div><div class=post-content><p>I don&rsquo;t think that at this point Rubygems needs any introduction. Except if
you have been living under a rock for the last 10 years or so. In that case,
I think that you wouldn&rsquo;t be here reading this blog. You would be having a
problem understanding why someone would like to share what they are eating, or
what they are doing at the moment. For the rest of you, have you heard that
Rubygems is extensible? Let&rsquo;s see how Rubygems does this, and how we can make
our own Rubygem plugin.</p><h2 id=extensibility>Extensibility<a hidden class=anchor aria-hidden=true href=#extensibility>#</a></h2><p>Rubygems, since version 1.3.2 has the ability to load plugins installed in the
gems collection or the <code>$LOAD_PATH</code>. This means that you can create a Ruby
program that will extend Rubygems with your own logic. The best way to go about
this is by packing it into a gem. It gets a bit of <em>meta</em>, I know. Basically,
what I am saying is that you can have a gem which will extend Rubygems, when
installed.</p><p>Now, there are is a naming convention when it comes to plugins. They must be
named <code>rubygems_plugin</code> and placed at the root of your gem’s <code>#require_path</code>.
Plugins are discovered via <code>Gem::find_files</code> and then loaded. But, instead of
dwelling into the theory, why don&rsquo;t we go ahead and build one ourselves?</p><h2 id=taken>Taken?<a hidden class=anchor aria-hidden=true href=#taken>#</a></h2><p>No, not this guy!</p><p><img src=http://e.lvme.me/o3rw8jl.jpg alt></p><p>We are going to keep it peaceful here, no guns, kidnappers and violence. We
will continue talking about gems. Any time we want to create a new gem, we are
in a need of a name. Let&rsquo;s make a Rubygems plugin that will add a command to
check if a gem name is available. The desired command will be:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gem taken liam</code></pre></td></tr></table></div></div><p>And the output can vary between</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>The gem name &#39;liam&#39; is taken.</code></pre></td></tr></table></div></div><p>and</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>It will be yours. Oh yes. It will be yours. The gem name &#39;liam&#39; is available.</code></pre></td></tr></table></div></div><p>And you guess it - the plugin&rsquo;s name will be <code>taken</code>.</p><h2 id=setting-the-foundations>Setting the foundations<a hidden class=anchor aria-hidden=true href=#setting-the-foundations>#</a></h2><p>Let&rsquo;s create a new gem, using the command:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bundle new taken</code></pre></td></tr></table></div></div><p>This will create a new barebones gem, called <code>Taken</code>:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>create  taken/Gemfile
create  taken/.gitignore
create  taken/lib/taken.rb
create  taken/lib/taken/version.rb
create  taken/taken.gemspec
create  taken/Rakefile
create  taken/README.md
create  taken/bin/console
create  taken/bin/setup
create  taken/.travis.yml
create  taken/test/test_helper.rb
create  taken/test/taken_test.rb
create  taken/LICENSE.txt
create  taken/CODE_OF_CONDUCT.md

Initializing git repo in /some/path/here/taken</code></pre></td></tr></table></div></div><p>First, let&rsquo;s do a bit of restructuring of our gem files and directories, before
we start with writing some code. In the <code>lib</code> directory, we will need to add
the <code>rubygems_plugin.rb</code> file, which will be picked up by Rubygems and will
load our new command. Next, in the same directory, we will need to create a new
directory with the name <code>rubygems</code>. Here, we will store all of the needed files
for this particular Rubygems plugin.</p><p>This is what our lib directory should look like:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>➜  ls lib
rubygems/  rubygems_plugin.rb</code></pre></td></tr></table></div></div><p>That&rsquo;s all. Let&rsquo;s open the <code>rubygems_plugin.rb</code> and start writing our new
command.</p><h2 id=defining-the-new-command>Defining the new command<a hidden class=anchor aria-hidden=true href=#defining-the-new-command>#</a></h2><p>First, in the plugin file we will need to register our new command. Rubygems
has this utility class, called <code>CommandManager</code>. It registers and installs all
the individual sub-commands supported by the gem command. If you would like to
register a new command against the <code>Gem::CommandManager</code> instance, you need to
do the following:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#0087ff>require</span> <span style=color:#00afaf>&#34;rubygems/command_manager&#34;</span>

<span style=color:#d75f00>Gem</span>::<span style=color:#d75f00>CommandManager</span>.instance.register_command(<span style=color:#00afaf>:taken</span>)</code></pre></td></tr></table></div></div><p>This will tell Rubygems that there&rsquo;s a new command in town, called <code>taken</code>. This
also expects that the command program will be stored in the
<code>lib/rubygems/commands/taken_command.rb</code> file. Let&rsquo;s create it!</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>class</span> <span style=color:#0087ff>Gem</span>::<span style=color:#d75f00>Commands</span>::<span style=color:#d75f00>TakenCommand</span> &lt; <span style=color:#d75f00>Gem</span>::<span style=color:#d75f00>Command</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>There are couple of key things when it comes to Rubygems plugins. The first
would be that each command class <strong>should</strong> inherit from the <code>Gem::Command</code>
class. If you look inside the actual source code of the <code>Gem::Command</code> class,
you will notice the following comment:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e># Base class for all Gem commands.  When creating a new gem command,</span>
<span style=color:#4e4e4e># define #initialize, #execute, #arguments, #defaults_str,</span>
<span style=color:#4e4e4e># #description and #usage (as appropriate)...</span></code></pre></td></tr></table></div></div><p>This means that, in our new command we will need to implement the required
methods. Let&rsquo;s begin by adding the initialize method:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>def</span> <span style=color:#0087ff>initialize</span>
  <span style=color:#5f8700>super</span>(<span style=color:#00afaf>&#34;taken&#34;</span>, <span style=color:#00afaf>&#34;Checks if the gem name is taken.&#34;</span>)
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Since our <code>taken</code> command will not need any special configurations, we can keep
the initialize method short and sweet. As the first argument to the
initializer, we pass the command name - in our case <code>taken</code>. The second
argument is the short summary of the command.</p><p>The next method that we will need to override is the <code>arguments</code> methods. This
method is pretty simple - it&rsquo;s just used to provide details of the arguments
that a command will take. In our case, that&rsquo;s the gem name, whose name we would
like to check. Our implementation of the method would look like:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>def</span> <span style=color:#0087ff>arguments</span> <span style=color:#4e4e4e># :nodoc:</span>
  <span style=color:#00afaf>&#34;GEMNAME       gem name to check&#34;</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Next is the <code>description</code> method. All it does is return a string containing a
longer description of what the command will do.</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>def</span> <span style=color:#0087ff>description</span>
  <span style=color:#00afaf>&lt;&lt;-EOF
</span><span style=color:#00afaf></span>    <span style=color:#d75f00>The</span> <span style=color:#4e4e4e>`taken`</span> command <span style=color:#0087ff>gets</span> all of the available gems names <span style=color:#5f8700>and</span> check <span style=color:#5f8700>if</span> a gem <span style=color:#0087ff>name</span> is free <span style=color:#5f8700>or</span> taken.
  <span style=color:#d75f00>EOF</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>These are the only methods that we need at the moment. The last one is the
<code>execute</code> method, which will do all of the work in our new Rubygems command.</p><h2 id=implementing-execute>Implementing <code>execute</code><a hidden class=anchor aria-hidden=true href=#implementing-execute>#</a></h2><p>This method will do most of the heavy lifting in our plugin. We can separate
the flow of the command in couple of steps:</p><ol><li>Get the gem name from the command arguments,</li><li>Throw some kind of an error if it&rsquo;s blank or has multiple gem names,</li><li>Fetch the latest list of gems,</li><li>Find out if a gem with the name already exists, and</li><li>Depending on the former step, inform the user for the result</li></ol><p>First, let&rsquo;s take the gem name from the command arguments. If you took a bit of
a deeper look in the <code>Gem::Command</code> class, I am sure you&rsquo;ve noticed the
<code>Gem::Command#get_one_gem_name</code> method. This method will take care of the first
two steps of the flow. The actual source code is the following:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e>##</span>
<span style=color:#4e4e4e># Get a single gem name from the command line.  Fail if there is no gem name</span>
<span style=color:#4e4e4e># or if there is more than one gem name given.</span>

<span style=color:#5f8700>def</span> <span style=color:#0087ff>get_one_gem_name</span>
  args = options[<span style=color:#00afaf>:args</span>]

  <span style=color:#5f8700>if</span> args.nil? <span style=color:#5f8700>or</span> args.empty? <span style=color:#5f8700>then</span>
    <span style=color:#5f8700>raise</span> <span style=color:#d75f00>Gem</span>::<span style=color:#d75f00>CommandLineError</span>,
          <span style=color:#00afaf>&#34;Please specify a gem name on the command line (e.g. gem build GEMNAME)&#34;</span>
  <span style=color:#5f8700>end</span>

  <span style=color:#5f8700>if</span> args.size &gt; <span style=color:#00afaf>1</span> <span style=color:#5f8700>then</span>
    <span style=color:#5f8700>raise</span> <span style=color:#d75f00>Gem</span>::<span style=color:#d75f00>CommandLineError</span>,
          <span style=color:#00afaf>&#34;Too many gem names (</span><span style=color:#00afaf>#{</span>args.join(<span style=color:#00afaf>&#39;, &#39;</span>)<span style=color:#00afaf>}</span><span style=color:#00afaf>); please specify only one&#34;</span>
  <span style=color:#5f8700>end</span>

  args.first
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Nice and easy. Let&rsquo;s add invoke this method in our <code>execute</code> method:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>def</span> <span style=color:#0087ff>execute</span>
  gem_name = get_one_gem_name
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>The next step is to get the latest list of gems. Rubygems has a class called
<code>Gem::SpecFetcher</code>, that handles metadata updates from remote gem repositories.
Simply said, this class with retrieve gem specifications and allow you to work
with them. Now, under the hood, the <code>Gem::SpecFetcher</code> uses a class called
<code>Gem::RemoteFetcher</code>. This class handles communication with remote sources,
like Rubygems.org. It knows how to fetch gem details and info.</p><p>Since we would like to have our command to work with the gem specs, we need to
introduce a <code>fetcher</code> to our <code>execute</code> method and utilize the
<code>Gem::SpecFetcher#detect</code> method.</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>def</span> <span style=color:#0087ff>execute</span>
  gem_name = get_one_gem_name

  fetcher = <span style=color:#d75f00>Gem</span>::<span style=color:#d75f00>SpecFetcher</span>.fetcher
  spec_tuples = fetcher.detect <span style=color:#5f8700>do</span> |name_tuple|
    gem_name == name_tuple.name
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>The <code>spec_tuples</code> will be a collection of objects from the <code>Gem::NameTuple</code>
class. If you open it&rsquo;s source code, you can see that it&rsquo;s a utility class that
represents a gem, in a certain format. The explanation within the class is the
following:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e># Represents a gem of name +name+ at +version+ of +platform+. These</span>
<span style=color:#4e4e4e># wrap the data returned from the indexes.</span></code></pre></td></tr></table></div></div><p>Since each <code>Gem::NameTuple</code> object has a <code>name</code> method, we compare the gem name
that was provided by the user with the name from the gem spec. If it matches,
that means that there&rsquo;s already a gem with that name.</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>def</span> <span style=color:#0087ff>execute</span>
  gem_name = get_one_gem_name

  fetcher = <span style=color:#d75f00>Gem</span>::<span style=color:#d75f00>SpecFetcher</span>.fetcher
  spec_tuples = fetcher.detect <span style=color:#5f8700>do</span> |name_tuple|
    gem_name == name_tuple.name
  <span style=color:#5f8700>end</span>

  <span style=color:#5f8700>if</span> name_free?(spec_tuples)
    $stdout.puts <span style=color:#00afaf>&#34;It will be yours. Oh yes. It will be yours. The gem name &#39;</span><span style=color:#00afaf>#{</span><span style=color:#0087ff>name</span><span style=color:#00afaf>}</span><span style=color:#00afaf>&#39; is available.&#34;</span>
  <span style=color:#5f8700>else</span>
    $stdout.puts <span style=color:#00afaf>&#34;The gem name &#39;</span><span style=color:#00afaf>#{</span><span style=color:#0087ff>name</span><span style=color:#00afaf>}</span><span style=color:#00afaf>&#39; is taken.&#34;</span>
  <span style=color:#5f8700>end</span>

  <span style=color:#5f8700>private</span>

  <span style=color:#5f8700>def</span> <span style=color:#0087ff>name_free?</span>(spec)
    !spec.flatten.length.zero?
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>This is it. We check if the the spec_tuples length is not zero and we show the
user the appropriate message.</p><h2 id=beyond-the-command>Beyond the command<a hidden class=anchor aria-hidden=true href=#beyond-the-command>#</a></h2><p>If you have been following this small tutorial, I am sure you are starting to
get an idea of how you can utilize Rubygems' API to build a plugin. You could
pack all of this logic into a gem, add some tests and publish it. Then people
can install the gem and use the newly created <code>taken</code> command.</p><p>But, this command is just scratching the surface of the possibilities that
Rubygems offers. And as a side-win, the Rubygems code is really great. In the
Git logs you can see names that are well respected in the Ruby community. You
can learn how they&rsquo;ve modeled their exceptions. Or maybe, how they do the
security or the HTTP layer.</p><p>Have you ever done any contributions to Rubygems? Or maybe you have written a
Rubygems plugin? Or maybe, you would like to write one but you have run out of
ideas? Hit me up in the comments!</p><section class=subscribe><b>Liked this article?</b>
You can <a href=https://www.buymeacoffee.com/ieftimov>buy me a coffee</a>.
Or simply <a href=/newsletter>subscribe to my
newsletter</a> and get my fresh posts in your inbox. It's short and sweet,
going out monthly to over 1,000 subscribers.</section></div><footer class=post-footer><ul class=post-tags><li><a href=https://ieftimov.com/tags/plugin/>plugin</a></li><li><a href=https://ieftimov.com/tags/taken/>taken</a></li></ul><nav class=paginav><a class=prev href=https://ieftimov.com/post/git-history-is-underrated/><span class=title>« Prev Page</span><br><span>Git history is underrated</span></a>
<a class=next href=https://ieftimov.com/post/you-cant-rescue-them-all/><span class=title>Next Page »</span><br><span>You Can't Rescue Them All</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Write your first Rubygems plugin on twitter" href="https://twitter.com/intent/tweet/?text=Write%20your%20first%20Rubygems%20plugin&url=https%3a%2f%2fieftimov.com%2fpost%2fyour-first-rubygem-plugin%2f&hashtags=plugin%2ctaken"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Write your first Rubygems plugin on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fieftimov.com%2fpost%2fyour-first-rubygem-plugin%2f&title=Write%20your%20first%20Rubygems%20plugin&summary=Write%20your%20first%20Rubygems%20plugin&source=https%3a%2f%2fieftimov.com%2fpost%2fyour-first-rubygem-plugin%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Write your first Rubygems plugin on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fieftimov.com%2fpost%2fyour-first-rubygem-plugin%2f&title=Write%20your%20first%20Rubygems%20plugin"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Write your first Rubygems plugin on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fieftimov.com%2fpost%2fyour-first-rubygem-plugin%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Write your first Rubygems plugin on whatsapp" href="https://api.whatsapp.com/send?text=Write%20your%20first%20Rubygems%20plugin%20-%20https%3a%2f%2fieftimov.com%2fpost%2fyour-first-rubygem-plugin%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Write your first Rubygems plugin on telegram" href="https://telegram.me/share/url?text=Write%20your%20first%20Rubygems%20plugin&url=https%3a%2f%2fieftimov.com%2fpost%2fyour-first-rubygem-plugin%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>Copyright 2021 © Ilija Eftimov</span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>