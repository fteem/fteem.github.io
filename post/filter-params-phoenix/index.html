<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Filter request params from Phoenix logs - Ilija Eftimov</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Filter request params from Phoenix logs">
<meta itemprop="description" content="Phoenix is a really powerful and customizable framework. One of it&#39;s small but important configurations is filtering custom params from the logs. I am sure that this will be more interesting to beginner than experienced developers, but nevertheless, let&#39;s see what&#39;s the motivation behind this and how to do it in Phoenix.
Motivation First, I&#39;d like you to understand the motivation behind this and why this is useful. Think about it.">

<meta itemprop="wordCount" content="437">



<meta itemprop="keywords" content="logging,filtering,params," /><meta property="og:title" content="Filter request params from Phoenix logs" />
<meta property="og:description" content="Phoenix is a really powerful and customizable framework. One of it&#39;s small but important configurations is filtering custom params from the logs. I am sure that this will be more interesting to beginner than experienced developers, but nevertheless, let&#39;s see what&#39;s the motivation behind this and how to do it in Phoenix.
Motivation First, I&#39;d like you to understand the motivation behind this and why this is useful. Think about it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ieftimov.com/post/filter-params-phoenix/" />
<meta property="article:published_time" content="2015-10-23T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Filter request params from Phoenix logs"/>
<meta name="twitter:description" content="Phoenix is a really powerful and customizable framework. One of it&#39;s small but important configurations is filtering custom params from the logs. I am sure that this will be more interesting to beginner than experienced developers, but nevertheless, let&#39;s see what&#39;s the motivation behind this and how to do it in Phoenix.
Motivation First, I&#39;d like you to understand the motivation behind this and why this is useful. Think about it."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/main.css" />
		<link rel="stylesheet" type="text/css" href="https://ieftimov.com/css/overrides.css" />
	

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://ieftimov.com/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://ieftimov.com/js/main.js"></script><script src="https://ieftimov.com/js/tooltip.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://ieftimov.com/">
				<img src="/avatar.png" alt="Ilija Eftimov" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://ieftimov.com/">Ilija Eftimov</a></h1>
	<div class="site-description"><p>Thoughts on simple software engineering</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/fteem" title="Github"><i data-feather="github"></i></a></li><li><a href="https://twitter.com/itsilija" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://www.linkedin.com/in/ieftimov" title="Linkedin"><i data-feather="linkedin"></i></a></li><li><a href="mailto:blog@ieftimov.com" title="Email"><i data-feather="mail"></i></a></li><li><a href="https://t.me/ieftimovcom" title="Telegram Channel"><i data-feather="send"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav><span class="scheme-toggle"><a href="#" id="scheme-toggle"></a></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/categories/testing-in-go">Testing in Go</a>
			</li>
			
			<li>
				<a href="/posts">Archive</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="https://forms.gle/orfXK5jh1LRaiFzo8">Suggest a topic</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">23</span>
							<span class="rest">Oct 2015</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Filter request params from Phoenix logs</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Phoenix is a really powerful and customizable framework. One of it's small but
important configurations is filtering custom params from the logs. I am sure
that this will be more interesting to beginner than experienced developers, but
nevertheless, let's see what's the motivation behind this and how to do it in
Phoenix.</p>
<h2 id="motivation">Motivation</h2>
<p>First, I'd like you to understand the motivation behind this and why this is
useful. Think about it. Our applications usually have login credentials, i.e.
username and password. In our databases, we almost always keep the username in
plain text, while the password is encryped with some sort of a hashing
algorithm.</p>
<p>While logging events is a very nice, although simple, feature of any web
framework (or, most of the software in the world), it can be a security flaw if
not configured properly. Logs enable us, the people that build and maintain the
software, to see how our application is behaving. It's logging all sorts of
information. All of the logs are stored on the hard drive of the server that's
running the application.</p>
<p>So, it we are storing the passwords in the databases as hashes, why would we
want the logs to contain any login credentials in plain text? This is quite a
security flaw. If someone gains access to the logs, they'll have access to a
lot of user credentials.</p>
<h2 id="in-practice">In practice</h2>
<p>All of the web frameworks (that I've seen/tried/used) filter the <code>password</code> and
<code>password_confirmation</code> params in their logs. But, what if you are building an
API? For example, what if the user needs to supply an <code>API_KEY</code> param with
every request?  We wouldn't want the key to be stored in the logs in plain
text.</p>
<p>Custom params filters come into play here. Phoenix allows us to customize the
list of filtered params from the logs. This is easily achived by adding:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">config <span style="color:#b84">:phoenix</span>, <span style="color:#b84">:filter_parameters</span>, [<span style="color:#b84">&#34;</span><span style="color:#b84">password</span><span style="color:#b84">&#34;</span>, <span style="color:#b84">&#34;</span><span style="color:#b84">api_key</span><span style="color:#b84">&#34;</span>]</code></pre></div>
<p>Now, there are two things to keep in mind. The first is to decide in which
environment(s) we want the filtering to be applied. For example, if we want
this to happen only in production environment, this line needs to be added in
the <code>config/prod.exs</code> file. In case we need filtering in all environments, it
should be added in the <code>config/config.exs</code> file.</p>
<p>The second thing is to understand that by adding this line, the default filters
are overriden. This means that if we leave out <code>&quot;password&quot;</code> from the list, it
will not be filtered, although it's a default configuration.</p>
<p>Hope this clears up filtering params from the logs in Phoenix. If you have any
questions or feedback, feel free to join the discussion below!</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/logging">logging</a></li>
							
							<li><a href="/tags/filtering">filtering</a></li>
							
							<li><a href="/tags/params">params</a></li>
							
						</ul>
					
				
			</div><div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'eftimov';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the </a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2015  Copyright Â© Ilija Eftimov |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-11264459-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
