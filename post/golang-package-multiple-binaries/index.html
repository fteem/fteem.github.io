<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Packing multiple binaries in a Golang package | Ilija Eftimov ⚡️</title><meta name=keywords content="binaries,conventions"><meta name=description content="Recently, while writing a small Golang program for setting reminders I came across a small confusion that I guess most newcomers to Golang will have - how to organise a package in a way that will enable it to cleanly contain two or more binaries.
This post is not aimed at experienced Golang programmers, it&rsquo;s mostly aimed at beginners to understand how to compose more complex packages, beyond making the usual &ldquo;one package one binary&rdquo; ones."><meta name=author content="Ilija"><link rel=canonical href=https://ieftimov.com/post/golang-package-multiple-binaries/><link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://ieftimov.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ieftimov.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ieftimov.com/favicon-32x32.png><link rel=apple-touch-icon href=https://ieftimov.com/apple-touch-icon.png><link rel=mask-icon href=https://ieftimov.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script async defer data-domain=ieftimov.com src=https://plausible.io/js/plausible.js></script><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><meta property="og:title" content="Packing multiple binaries in a Golang package"><meta property="og:description" content="Recently, while writing a small Golang program for setting reminders I came across a small confusion that I guess most newcomers to Golang will have - how to organise a package in a way that will enable it to cleanly contain two or more binaries.
This post is not aimed at experienced Golang programmers, it&rsquo;s mostly aimed at beginners to understand how to compose more complex packages, beyond making the usual &ldquo;one package one binary&rdquo; ones."><meta property="og:type" content="article"><meta property="og:url" content="https://ieftimov.com/post/golang-package-multiple-binaries/"><meta property="og:image" content="https://ieftimov.com/cards/golang-package-multiple-binaries.png"><meta property="article:section" content="posts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ieftimov.com/cards/golang-package-multiple-binaries.png"><meta name=twitter:title content="Packing multiple binaries in a Golang package"><meta name=twitter:description content="Recently, while writing a small Golang program for setting reminders I came across a small confusion that I guess most newcomers to Golang will have - how to organise a package in a way that will enable it to cleanly contain two or more binaries.
This post is not aimed at experienced Golang programmers, it&rsquo;s mostly aimed at beginners to understand how to compose more complex packages, beyond making the usual &ldquo;one package one binary&rdquo; ones."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ieftimov.com/posts/"},{"@type":"ListItem","position":2,"name":"Packing multiple binaries in a Golang package","item":"https://ieftimov.com/post/golang-package-multiple-binaries/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Packing multiple binaries in a Golang package","name":"Packing multiple binaries in a Golang package","description":"Recently, while writing a small Golang program for setting reminders I came across a small confusion that I guess most newcomers to Golang will have - how to organise a package in a way that will enable it to cleanly contain two or more binaries.\nThis post is not aimed at experienced Golang programmers, it\u0026rsquo;s mostly aimed at beginners to understand how to compose more complex packages, beyond making the usual \u0026ldquo;one package one binary\u0026rdquo; ones.","keywords":["binaries","conventions"],"articleBody":"Recently, while writing a small Golang program for setting reminders I came across a small confusion that I guess most newcomers to Golang will have - how to organise a package in a way that will enable it to cleanly contain two or more binaries.\nThis post is not aimed at experienced Golang programmers, it’s mostly aimed at beginners to understand how to compose more complex packages, beyond making the usual “one package one binary” ones. It’s essentially what I would like to have read (or understand) after spinning my wheels for a bit while building my first (more complex) package.\nBut, if you are one of the experienced folks I would be very grateful if you finish reading this article and call out any mistakes you might find. Also I, and probably other beginners, would be happy to find out any other alternative approaches to this problem.\nThat being said, let’s begin by seeing what an elementary package layout looks like, and then we can continue with building a more complex one.\nFortune telling Imagine we need to build a CLI program in Golang. One that needs to tell us our fortune, or provide advice on a subject that we are thinking about. Just like a Magic 8-Ball.\nLet’s begin by fleshing out the main file of this package:\n// eight_ball.go package main import ( \"bufio\" \"fmt\" \"math/rand\" \"os\" \"time\" ) func main() { rand.Seed(time.Now().Unix()) reader := bufio.NewReader(os.Stdin) answers := []string{ \"It is certain\", \"It is decidedly so\", \"Without a doubt\", \"Yes, definitely\", \"You may rely on it\", \"As I see it, yes\", \"Most likely\", \"Outlook good\", \"Yes\", \"Signs point to yes\", \"Reply hazy try again\", \"Ask again later\", \"Better not tell you now\", \"Cannot predict now\", \"Concentrate and ask again\", \"Don't count on it\", \"My reply is no\", \"My sources say no\", \"Outlook not so good\", \"Very doubtful\", } fmt.Print(\"What is your question? \") reader.ReadString('\\n') fmt.Println(answers[rand.Intn(len(answers))]) } The implementation is quite straightforward. We have a list of predefined answers, blatantly ripped off from Wikipedia’s article on Magic 8-ball. The program takes the input from STDIN, ignores it (obviously) and with the help of the rand package takes a random answer from the array, which is then printed to STDOUT.\nWe can test this by running go run eight_ball.go:\n› go run main.go What is your question? Will I win the lottery this year? My sources say no I guess I won’t be getting rich by wining the lottery. Now, let’s throw in another program in our package. This one, following the same theme, can be about fortune cookies.\n// cookie.go package main import ( \"fmt\" \"math/rand\" \"time\" ) func main() { rand.Seed(time.Now().Unix()) quotes := []string{ \"The beginning of wisdom is to desire it.\", \"You will have a very pleasant experience.\", \"You will inherit some money or a small piece of land.\", \"You will live a long, happy life.\", \"You will spend old age in comfort and material wealth.\", \"You will step on the soil of many countries.\", \"You will take a chance in something in the near future.\", \"You will witness a special ceremony.\", \"Your everlasting patience will be rewarded sooner or later.\", \"Your great attention to detail is both a blessing and a curse.\", \"Your heart is a place to draw true happiness.\", \"Your ability to juggle many tasks will take you far.\", \"A friend asks only for your time, not your money.\", \"You will be invited to an exciting event.\", } fmt.Println(quotes[rand.Intn(len(quotes))]) } If you are carefully reading the code, you can see the approach is basically the same. We have a list of predefined quotes, and using the math/rand package we print out a random quote when the program is executed.\nIf we run the program, we would get the following output:\n› go run cookie.go You will live a long, happy life. Nice and simple. The program works flawlessly.\nBuilding it So how can we build this now in a binary, and distrubite it for different operating systems and architectures. It’s really one of the things that Go really shines for, right?\nIf you have done any Go you would immediately say: using go build. Let’s give that a shot:\n› go build # github.com/fortune_telling ./eight_ball.go:11:6: main redeclared in this block previous declaration at ./cookie.go:9:6 Whoops, what happenned? Well, the error is quite self-descriptive. Basically we have the main function defined in both of these files. But, on the other hand if we rename those functions they will not be run when we create binaries out of the programs. Let’s try to rename the main function as foo in eight_ball.go, and then try to run the program using go run:\n› go run eight_ball.go # command-line-arguments runtime.main_main·f: relocation target main.main not defined runtime.main_main·f: undefined: \"main.main\" As you can see, then the binary cannot be built, since Go’s compiler complains about the missing main function. On the other hand, the missing main function in eight_ball.go will actually make go build work.\nWhy is that? Well you see, in a package with a name foo there can only be one main function. When the package is built, that main function will be the entry point for the program (in the binary), so it’s mandatory the package has it. Since eight_ball.go is missing it, and cookie.go has it, the package main will have a single main function (in cookie.go), rendering the main package as valid.\nSplit the packages Okay, so by now hopefully it’s clear that we cannot have two binaries with two entry points in a single package. So, why don’t we split the files in two packages. For example, cookie.go can have a cookie package, while eight_ball.go can have an eight_ball package. Both of them will have a main function and everything should work smoothly, right?\nLet’s do that and give it a shot. First, let’s rename the packages in the cookie.go and eight_ball.go files respectively:\n// cookie.go package cookie import ( \"fmt\" \"math/rand\" \"time\" ) func main() { // Snipped } // eight_ball.go package eight_ball import ( \"bufio\" \"fmt\" \"math/rand\" \"os\" \"time\" ) func main() { // Snipped } Let’s try to build these packages now:\n› go build cookie.go › go build eight_ball.go Okay, cool. We ran go build on the files and there were no problems. That means that Go produced the binaries for each of these files and we could run them.\nNope. It didn’t.\nIf we see Go’s documentation on the go build command, we will find this segment:\n When compiling a single main package, build writes the resulting executable to an output file named after the first source file (‘go build ed.go rx.go’ writes ‘ed’ or ‘ed.exe’) or the source code directory (‘go build unix/sam’ writes ‘sam’ or ‘sam.exe’). The ‘.exe’ suffix is added when writing a Windows executable.\n Also, this:\n When compiling multiple packages or a single non-main package, build compiles the packages but discards the resulting object, serving only as a check that the packages can be built.\n This means that, to produce a binary of a package, whose name will be derived from the folder name it is stored in, we need to build a main package. That means that our cookie.go and eight_ball.go files will have to be contained in their own folders, while their package names have to stay main.\nReorganizing our files What we need to do is quite simple actually. In our working directory let’s introduce a folder called cmd, which will store both of our commands.\nLet’s run the following commands:\n› mkdir -p cmd/{cookie,eight_ball}/ › mv cookie.go cmd/cookie/main.go › mv eight_ball.go cmd/eight_ball/main.go If we run tree on our working directory, we will see the following structure:\n› tree . └── cmd ├── cookie │ └── main.go └── eight_ball └── main.go If we try to build the packages now we won’t get far as well:\n› go build can't load package: package github.com/fortune_teller: no Go files in /Users/ie/projects/go/src/github.com/fortune_teller But, the restructuring of the packages allows us to now use the go install ./... command, which will install our packages in our $GOPATH/bin directory:\n› go install ./... › cookie A thrilling time is in your immediate future. › eight_ball What is your question? Will I win the lottery this year? Don't count on it Whoa, so, what happenned? How did these programs just got installed?\nWhat happenned is the following - since we moved the programs to their own subfolders in our workspace, when built (and installed) they will inherit the name of the folder they are in. Therefore, cmd/cookie/main.go will compile into a cookie binary, while cmd/eight_ball/main.go will compile into a eight_ball binary. Then, after buildilng, these binaries will be installed into the Go binaries path ($GOPATH/bin).\nIf you would like to build the binaries for each of the two packages, without installing them to $GOPATH/bin, then you will need to cd in to the paths where the main.go files are, and run go build there:\n› cd cmd/cookie › go build › ./cookie Your greatest fortune is the large number of friends you have. › cd fortune_teller/cmd/eight_ball › go build › ./eight_ball What is your question? Will I win the lottery? Yes, definitely What if I want a library as part of the package? This question makes sense - what if with the package one wants to ship some additional code. Or even better, what if you would like to import code from the package in the CLI programs?\nLet’s extract the answers and quotes variables from the CLI programs into a new package, and try to import that one back in:\n// content.go package fortune_teller func Answers() []string { return []string{ \"It is certain\", \"It is decidedly so\", \"Without a doubt\", \"Yes, definitely\", \"You may rely on it\", \"As I see it, yes\", \"Most likely\", \"Outlook good\", \"Yes\", \"Signs point to yes\", \"Reply hazy try again\", \"Ask again later\", \"Better not tell you now\", \"Cannot predict now\", \"Concentrate and ask again\", \"Don't count on it\", \"My reply is no\", \"My sources say no\", \"Outlook not so good\", \"Very doubtful\", } } func Quotes() []string { return []string{ \"There is a true and sincere friendship between you and your friends.\", \"You find beauty in ordinary things, do not lose this ability.\", \"Ideas are like children; there are none so wonderful as your own.\", \"It takes more than good memory to have good memories.\", \"A thrilling time is in your immediate future.\", \"Your blessing is no more than being safe and sound for the whole lifetime.\", \"Plan for many pleasures ahead.\", \"The joyfulness of a man prolongeth his days.\", \"Your everlasting patience will be rewarded sooner or later.\", \"Make two grins grow where there was only a grouch before.\", \"Something you lost will soon turn up.\", \"Your heart is pure, and your mind clear, and your soul devout.\", \"Excitement and intrigue follow you closely wherever you go!\", \"A pleasant surprise is in store for you.\", \"May life throw you a pleasant curve.\", \"As the purse is emptied the heart is filled.\", } } After extracting these two functions in a top level package, which will return the content for the two commands, we can import the package in the cookie and eight_ball commands, which will utilise the content. By being able to extract code in a common package, it allows us to easily reuse any of the shared code between multiple commands.\nFor example, if we had a database driver that would write to a database (i.e. sqlite), we could easily import this driver in both cookie and eight_ball and use the code within the context of the program.\nLet’s modify now the CLI programs to import the top-level package:\n// cmd/cookie/main.go package main import ( \"fmt\" \"math/rand\" \"time\" ft \"github.com/fteem/fortune_teller\" ) func main() { rand.Seed(time.Now().Unix()) quotes := ft.Quotes() fmt.Println(quotes[rand.Intn(len(quotes))]) } // cmd/eight_ball/main.go package main import ( \"bufio\" \"fmt\" \"math/rand\" \"os\" \"time\" ft \"github.com/fteem/fortune_teller\" ) func main() { rand.Seed(time.Now().Unix()) reader := bufio.NewReader(os.Stdin) answers := ft.Answers() fmt.Print(\"What is your question? \") reader.ReadString('\\n') fmt.Println(answers[rand.Intn(len(answers))]) } It’s as simple as that. Here we purposely alias the package to ft, so we don’t have to type fortune_teller every time we want to invoke these functions. To test the commands manually, the simplest way is to install them using go install ./..., which will install all of the packages that can be found in the path (and all of it’s subpaths).\nIt works! After trying this approach out, I noticed that some other popular packages use a similar structure of building packages. For example, you can see that BoltDB places it’s command line program in a cmd/bolt path. So does packr, and other various libraries that I have noticed. So, I would safely assume that this pattern of organising your packages is clean and safe to use.\nSince you got to the end, I will assume that you would like some more reading resources around building and installing packages, and file structure organisation. I recommend you continue your journey in Go with the following links:\n How to Write Go Code Command go - Compile packages and dependencies Structuring Applications in Go - I think this is probably the origin of the structural pattern used in this article  If you would like to see the code used in this article, you can get it from my Github.\n Liked this article? Subscribe to my newsletter and get future articles in your inbox. It's a short and sweet read, going out to +1000 of other engineers.  I care about your privacy, and will never send you spam. You can unsubscribe at any time.\n ","wordCount":"2255","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Ilija"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ieftimov.com/post/golang-package-multiple-binaries/"},"publisher":{"@type":"Organization","name":"Ilija Eftimov ⚡️","logo":{"@type":"ImageObject","url":"https://ieftimov.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://ieftimov.com/ accesskey=h title="Ilija Eftimov ⚡️ (Alt + H)">Ilija Eftimov ⚡️</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://ieftimov.com/ title=About><span>About</span></a></li><li><a href=https://ieftimov.com/posts title=Writing><span>Writing</span></a></li><li><a href=https://ieftimov.com/newsletter title=Newsletter><span>Newsletter</span></a></li><li><a href=https://forms.gle/orfXK5jh1LRaiFzo8 title="Suggest a topic"><span>Suggest a topic</span></a></li><li><a href=https://www.buymeacoffee.com/ieftimov title="Buy me a ☕"><span>Buy me a ☕</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Packing multiple binaries in a Golang package</h1><div class=post-meta>January 23, 2018&nbsp;·&nbsp;11 min&nbsp;·&nbsp;Ilija</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#fortune-telling aria-label="Fortune telling">Fortune telling</a></li><li><a href=#building-it aria-label="Building it">Building it</a></li><li><a href=#split-the-packages aria-label="Split the packages">Split the packages</a></li><li><a href=#reorganizing-our-files aria-label="Reorganizing our files">Reorganizing our files</a></li><li><a href=#what-if-i-want-a-library-as-part-of-the-package aria-label="What if I want a library as part of the package?">What if I want a library as part of the package?</a></li><li><a href=#it-works aria-label="It works!">It works!</a></li></ul></div></details></div><div class=post-content><p>Recently, while writing a small Golang program for setting reminders I came
across a small confusion that I guess most newcomers to Golang will have - how
to organise a package in a way that will enable it to cleanly contain two or
more binaries.</p><p><img src=/golang-package-multiple-binaries/deliveries.png alt></p><p>This post is not aimed at experienced Golang programmers, it&rsquo;s mostly aimed at
beginners to understand how to compose more complex packages, beyond making the
usual &ldquo;one package one binary&rdquo; ones. It&rsquo;s essentially what I would like to have
read (or understand) after spinning my wheels for a bit while building my first
(more complex) package.</p><p>But, if you are one of the experienced folks I would be very grateful if you
finish reading this article and call out any mistakes you might find. Also I,
and probably other beginners, would be happy to find out any other alternative
approaches to this problem.</p><p>That being said, let&rsquo;s begin by seeing what an elementary package layout looks
like, and then we can continue with building a more complex one.</p><h2 id=fortune-telling>Fortune telling<a hidden class=anchor aria-hidden=true href=#fortune-telling>#</a></h2><p>Imagine we need to build a CLI program in Golang. One that needs to tell us
our fortune, or provide advice on a subject that we are thinking about. Just like
a <a href=https://en.wikipedia.org/wiki/Magic_8-Ball>Magic 8-Ball</a>.</p><p>Let&rsquo;s begin by fleshing out the <code>main</code> file of this package:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#586e75>// eight_ball.go
</span><span style=color:#586e75></span><span style=color:#719e07>package</span> main

<span style=color:#719e07>import</span> (
	<span style=color:#2aa198>&#34;bufio&#34;</span>
	<span style=color:#2aa198>&#34;fmt&#34;</span>
	<span style=color:#2aa198>&#34;math/rand&#34;</span>
	<span style=color:#2aa198>&#34;os&#34;</span>
	<span style=color:#2aa198>&#34;time&#34;</span>
)

<span style=color:#268bd2>func</span> <span style=color:#268bd2>main</span>() {
	rand.<span style=color:#268bd2>Seed</span>(time.<span style=color:#268bd2>Now</span>().<span style=color:#268bd2>Unix</span>())
	reader <span style=color:#719e07>:=</span> bufio.<span style=color:#268bd2>NewReader</span>(os.Stdin)
	answers <span style=color:#719e07>:=</span> []<span style=color:#dc322f>string</span>{
		<span style=color:#2aa198>&#34;It is certain&#34;</span>,
		<span style=color:#2aa198>&#34;It is decidedly so&#34;</span>,
		<span style=color:#2aa198>&#34;Without a doubt&#34;</span>,
		<span style=color:#2aa198>&#34;Yes, definitely&#34;</span>,
		<span style=color:#2aa198>&#34;You may rely on it&#34;</span>,
		<span style=color:#2aa198>&#34;As I see it, yes&#34;</span>,
		<span style=color:#2aa198>&#34;Most likely&#34;</span>,
		<span style=color:#2aa198>&#34;Outlook good&#34;</span>,
		<span style=color:#2aa198>&#34;Yes&#34;</span>,
		<span style=color:#2aa198>&#34;Signs point to yes&#34;</span>,
		<span style=color:#2aa198>&#34;Reply hazy try again&#34;</span>,
		<span style=color:#2aa198>&#34;Ask again later&#34;</span>,
		<span style=color:#2aa198>&#34;Better not tell you now&#34;</span>,
		<span style=color:#2aa198>&#34;Cannot predict now&#34;</span>,
		<span style=color:#2aa198>&#34;Concentrate and ask again&#34;</span>,
		<span style=color:#2aa198>&#34;Don&#39;t count on it&#34;</span>,
		<span style=color:#2aa198>&#34;My reply is no&#34;</span>,
		<span style=color:#2aa198>&#34;My sources say no&#34;</span>,
		<span style=color:#2aa198>&#34;Outlook not so good&#34;</span>,
		<span style=color:#2aa198>&#34;Very doubtful&#34;</span>,
	}

	fmt.<span style=color:#268bd2>Print</span>(<span style=color:#2aa198>&#34;What is your question? &#34;</span>)
	reader.<span style=color:#268bd2>ReadString</span>(<span style=color:#2aa198>&#39;\n&#39;</span>)

	fmt.<span style=color:#268bd2>Println</span>(answers[rand.<span style=color:#268bd2>Intn</span>(<span style=color:#b58900>len</span>(answers))])
}</code></pre></div><p>The implementation is quite straightforward. We have a list of predefined
answers, blatantly ripped off from
<a href=https://en.wikipedia.org/wiki/Magic_8-Ball>Wikipedia&rsquo;s article on Magic 8-ball</a>. The
program takes the input from <code>STDIN</code>, ignores it (obviously) and with the help of
the <code>rand</code> package takes a random answer from the array, which is then printed
to <code>STDOUT</code>.</p><p>We can test this by running <code>go run eight_ball.go</code>:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go run main.go
What is your question? Will I win the lottery this year?
My sources say no</code></pre></div><p>I guess I won&rsquo;t be getting rich by wining the lottery. Now, let&rsquo;s throw in
another program in our package. This one, following the same theme, can be about
fortune cookies.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#586e75>// cookie.go
</span><span style=color:#586e75></span><span style=color:#719e07>package</span> main

<span style=color:#719e07>import</span> (
	<span style=color:#2aa198>&#34;fmt&#34;</span>
	<span style=color:#2aa198>&#34;math/rand&#34;</span>
	<span style=color:#2aa198>&#34;time&#34;</span>
)

<span style=color:#268bd2>func</span> <span style=color:#268bd2>main</span>() {
	rand.<span style=color:#268bd2>Seed</span>(time.<span style=color:#268bd2>Now</span>().<span style=color:#268bd2>Unix</span>())
	quotes <span style=color:#719e07>:=</span> []<span style=color:#dc322f>string</span>{
		<span style=color:#2aa198>&#34;The beginning of wisdom is to desire it.&#34;</span>,
		<span style=color:#2aa198>&#34;You will have a very pleasant experience.&#34;</span>,
		<span style=color:#2aa198>&#34;You will inherit some money or a small piece of land.&#34;</span>,
		<span style=color:#2aa198>&#34;You will live a long, happy life.&#34;</span>,
		<span style=color:#2aa198>&#34;You will spend old age in comfort and material wealth.&#34;</span>,
		<span style=color:#2aa198>&#34;You will step on the soil of many countries.&#34;</span>,
		<span style=color:#2aa198>&#34;You will take a chance in something in the near future.&#34;</span>,
		<span style=color:#2aa198>&#34;You will witness a special ceremony.&#34;</span>,
		<span style=color:#2aa198>&#34;Your everlasting patience will be rewarded sooner or later.&#34;</span>,
		<span style=color:#2aa198>&#34;Your great attention to detail is both a blessing and a curse.&#34;</span>,
		<span style=color:#2aa198>&#34;Your heart is a place to draw true happiness.&#34;</span>,
		<span style=color:#2aa198>&#34;Your ability to juggle many tasks will take you far.&#34;</span>,
		<span style=color:#2aa198>&#34;A friend asks only for your time, not your money.&#34;</span>,
		<span style=color:#2aa198>&#34;You will be invited to an exciting event.&#34;</span>,
	}

	fmt.<span style=color:#268bd2>Println</span>(quotes[rand.<span style=color:#268bd2>Intn</span>(<span style=color:#b58900>len</span>(quotes))])
}</code></pre></div><p>If you are carefully reading the code, you can see the approach is basically the
same. We have a list of predefined quotes, and using the <code>math/rand</code> package
we print out a random quote when the program is executed.</p><p>If we run the program, we would get the following output:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go run cookie.go
You will live a long, happy life.</code></pre></div><p>Nice and simple. The program works flawlessly.</p><p><img src=/golang-package-multiple-binaries/under_construction.png alt></p><h2 id=building-it>Building it<a hidden class=anchor aria-hidden=true href=#building-it>#</a></h2><p>So how can we build this now in a binary, and distrubite it
for different operating systems and architectures. It&rsquo;s really one of the things
that Go really shines for, right?</p><p>If you have done any Go you would immediately say: using <code>go build</code>. Let&rsquo;s give
that a shot:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go build
<span style=color:#586e75># github.com/fortune_telling</span>
./eight_ball.go:11:6: main redeclared in this block
	previous declaration at ./cookie.go:9:6</code></pre></div><p>Whoops, what happenned? Well, the error is quite self-descriptive. Basically we
have the <code>main</code> function defined in both of these files. But, on the other hand
if we rename those functions they will not be run when we create binaries out
of the programs. Let&rsquo;s try to rename the <code>main</code> function as <code>foo</code> in
<code>eight_ball.go</code>, and then try to run the program using <code>go run</code>:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go run eight_ball.go
<span style=color:#586e75># command-line-arguments</span>
runtime.main_main·f: relocation target main.main not defined
runtime.main_main·f: undefined: <span style=color:#2aa198>&#34;main.main&#34;</span></code></pre></div><p>As you can see, then the binary cannot be built, since Go&rsquo;s compiler complains
about the missing <code>main</code> function. On the other hand, the missing <code>main</code>
function in <code>eight_ball.go</code> will actually make <code>go build</code> work.</p><p>Why is that? Well you see, in a package with a name <code>foo</code> there can only be one
<code>main</code> function. When the package is built, that <code>main</code> function will be the
entry point for the program (in the binary), so it&rsquo;s mandatory the package has it.
Since <code>eight_ball.go</code> is missing it, and <code>cookie.go</code> has it, the package <code>main</code>
will have a single <code>main</code> function (in <code>cookie.go</code>), rendering the <code>main</code> package
as valid.</p><h2 id=split-the-packages>Split the packages<a hidden class=anchor aria-hidden=true href=#split-the-packages>#</a></h2><p>Okay, so by now hopefully it&rsquo;s clear that we cannot have two binaries with two
entry points in a single package. So, why don&rsquo;t we split the files in two packages.
For example, <code>cookie.go</code> can have a <code>cookie</code> package, while <code>eight_ball.go</code> can
have an <code>eight_ball</code> package. Both of them will have a <code>main</code> function and
everything should work smoothly, right?</p><p>Let&rsquo;s do that and give it a shot. First, let&rsquo;s rename the packages in the
<code>cookie.go</code> and <code>eight_ball.go</code> files respectively:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#586e75>// cookie.go
</span><span style=color:#586e75></span><span style=color:#719e07>package</span> cookie

<span style=color:#719e07>import</span> (
	<span style=color:#2aa198>&#34;fmt&#34;</span>
	<span style=color:#2aa198>&#34;math/rand&#34;</span>
	<span style=color:#2aa198>&#34;time&#34;</span>
)

<span style=color:#268bd2>func</span> <span style=color:#268bd2>main</span>() {
	<span style=color:#586e75>// Snipped
</span><span style=color:#586e75></span>}</code></pre></div><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#586e75>// eight_ball.go
</span><span style=color:#586e75></span><span style=color:#719e07>package</span> eight_ball

<span style=color:#719e07>import</span> (
	<span style=color:#2aa198>&#34;bufio&#34;</span>
	<span style=color:#2aa198>&#34;fmt&#34;</span>
	<span style=color:#2aa198>&#34;math/rand&#34;</span>
	<span style=color:#2aa198>&#34;os&#34;</span>
	<span style=color:#2aa198>&#34;time&#34;</span>
)

<span style=color:#268bd2>func</span> <span style=color:#268bd2>main</span>() {
	<span style=color:#586e75>// Snipped
</span><span style=color:#586e75></span>}</code></pre></div><p>Let&rsquo;s try to build these packages now:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go build cookie.go</code></pre></div><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go build eight_ball.go</code></pre></div><p>Okay, cool. We ran <code>go build</code> on the files and there were no problems. That means
that Go produced the binaries for each of these files and we could run them.</p><p>Nope. It didn&rsquo;t.</p><p>If we see <a href=https://golang.org/cmd/go/#hdr-Compile_packages_and_dependencies>Go&rsquo;s documentation</a>
on the <code>go build</code> command, we will find this segment:</p><blockquote><p>When compiling a single main package, build writes the resulting executable to
an output file named after the first source file (&lsquo;go build ed.go rx.go&rsquo; writes
&lsquo;ed&rsquo; or &lsquo;ed.exe&rsquo;) or the source code directory (&lsquo;go build unix/sam&rsquo; writes &lsquo;sam&rsquo;
or &lsquo;sam.exe&rsquo;). The &lsquo;.exe&rsquo; suffix is added when writing a Windows executable.</p></blockquote><p>Also, this:</p><blockquote><p>When compiling multiple packages or a single non-main package, build compiles
the packages but discards the resulting object, serving only as a check that
the packages can be built.</p></blockquote><p>This means that, to produce a binary of a package, whose name will be derived
from the folder name it is stored in, we need to build a <code>main</code> package. That
means that our <code>cookie.go</code> and <code>eight_ball.go</code> files will have to be contained
in their own folders, while their package names have to stay <code>main</code>.</p><h2 id=reorganizing-our-files>Reorganizing our files<a hidden class=anchor aria-hidden=true href=#reorganizing-our-files>#</a></h2><p>What we need to do is quite simple actually. In our working directory let&rsquo;s
introduce a folder called <code>cmd</code>, which will store both of our commands.</p><p>Let&rsquo;s run the following commands:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› mkdir -p cmd/<span style=color:#719e07>{</span>cookie,eight_ball<span style=color:#719e07>}</span>/

› mv cookie.go cmd/cookie/main.go

› mv eight_ball.go cmd/eight_ball/main.go</code></pre></div><p>If we run <code>tree</code> on our working directory, we will see the following structure:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› tree
.
└── cmd
    ├── cookie
    │   └── main.go
    └── eight_ball
        └── main.go</code></pre></div><p>If we try to build the packages now we won&rsquo;t get far as well:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go build
can&#39;t load package: package github.com/fortune_teller: no Go files in /Users/ie/projects/go/src/github.com/fortune_teller</code></pre></div><p>But, the restructuring of the packages allows us to now use the <code>go install ./...</code>
command, which will install our packages in our <code>$GOPATH/bin</code> directory:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› go install ./...

› cookie
A thrilling <span style=color:#b58900>time</span> is in your immediate future.

› eight_ball
What is your question? Will I win the lottery this year?
Don&#39;t count on it</code></pre></div><p>Whoa, so, what happenned? How did these programs just got installed?</p><p>What happenned is the following - since we moved the programs to their own
subfolders in our workspace, when built (and installed) they will inherit the
name of the folder they are in. Therefore, <code>cmd/cookie/main.go</code> will compile
into a <code>cookie</code> binary, while <code>cmd/eight_ball/main.go</code> will compile into a
<code>eight_ball</code> binary. Then, after buildilng, these binaries will be installed
into the Go binaries path (<code>$GOPATH/bin</code>).</p><p>If you would like to build the binaries for each of the two packages, without
installing them to <code>$GOPATH/bin</code>, then you will need to <code>cd</code> in to the paths
where the <code>main.go</code> files are, and run <code>go build</code> there:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› <span style=color:#b58900>cd</span> cmd/cookie

› go build

› ./cookie
Your greatest fortune is the large number of friends you have.</code></pre></div><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>› <span style=color:#b58900>cd</span> fortune_teller/cmd/eight_ball

› go build

› ./eight_ball
What is your question? Will I win the lottery?
Yes, definitely</code></pre></div><p><img src=/golang-package-multiple-binaries/inspection.png alt></p><h2 id=what-if-i-want-a-library-as-part-of-the-package>What if I want a library as part of the package?<a hidden class=anchor aria-hidden=true href=#what-if-i-want-a-library-as-part-of-the-package>#</a></h2><p>This question makes sense - what if with the package one wants to ship some
additional code. Or even better, what if you would like to <code>import</code> code from
the package in the CLI programs?</p><p>Let&rsquo;s extract the <code>answers</code> and <code>quotes</code> variables from the CLI programs into a
new package, and try to import that one back in:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#586e75>// content.go
</span><span style=color:#586e75></span><span style=color:#719e07>package</span> fortune_teller

<span style=color:#268bd2>func</span> <span style=color:#268bd2>Answers</span>() []<span style=color:#dc322f>string</span> {
	<span style=color:#719e07>return</span> []<span style=color:#dc322f>string</span>{
		<span style=color:#2aa198>&#34;It is certain&#34;</span>,
		<span style=color:#2aa198>&#34;It is decidedly so&#34;</span>,
		<span style=color:#2aa198>&#34;Without a doubt&#34;</span>,
		<span style=color:#2aa198>&#34;Yes, definitely&#34;</span>,
		<span style=color:#2aa198>&#34;You may rely on it&#34;</span>,
		<span style=color:#2aa198>&#34;As I see it, yes&#34;</span>,
		<span style=color:#2aa198>&#34;Most likely&#34;</span>,
		<span style=color:#2aa198>&#34;Outlook good&#34;</span>,
		<span style=color:#2aa198>&#34;Yes&#34;</span>,
		<span style=color:#2aa198>&#34;Signs point to yes&#34;</span>,
		<span style=color:#2aa198>&#34;Reply hazy try again&#34;</span>,
		<span style=color:#2aa198>&#34;Ask again later&#34;</span>,
		<span style=color:#2aa198>&#34;Better not tell you now&#34;</span>,
		<span style=color:#2aa198>&#34;Cannot predict now&#34;</span>,
		<span style=color:#2aa198>&#34;Concentrate and ask again&#34;</span>,
		<span style=color:#2aa198>&#34;Don&#39;t count on it&#34;</span>,
		<span style=color:#2aa198>&#34;My reply is no&#34;</span>,
		<span style=color:#2aa198>&#34;My sources say no&#34;</span>,
		<span style=color:#2aa198>&#34;Outlook not so good&#34;</span>,
		<span style=color:#2aa198>&#34;Very doubtful&#34;</span>,
	}
}

<span style=color:#268bd2>func</span> <span style=color:#268bd2>Quotes</span>() []<span style=color:#dc322f>string</span> {
	<span style=color:#719e07>return</span> []<span style=color:#dc322f>string</span>{
		<span style=color:#2aa198>&#34;There is a true and sincere friendship between you and your friends.&#34;</span>,
		<span style=color:#2aa198>&#34;You find beauty in ordinary things, do not lose this ability.&#34;</span>,
		<span style=color:#2aa198>&#34;Ideas are like children; there are none so wonderful as your own.&#34;</span>,
		<span style=color:#2aa198>&#34;It takes more than good memory to have good memories.&#34;</span>,
		<span style=color:#2aa198>&#34;A thrilling time is in your immediate future.&#34;</span>,
		<span style=color:#2aa198>&#34;Your blessing is no more than being safe and sound for the whole lifetime.&#34;</span>,
		<span style=color:#2aa198>&#34;Plan for many pleasures ahead.&#34;</span>,
		<span style=color:#2aa198>&#34;The joyfulness of a man prolongeth his days.&#34;</span>,
		<span style=color:#2aa198>&#34;Your everlasting patience will be rewarded sooner or later.&#34;</span>,
		<span style=color:#2aa198>&#34;Make two grins grow where there was only a grouch before.&#34;</span>,
		<span style=color:#2aa198>&#34;Something you lost will soon turn up.&#34;</span>,
		<span style=color:#2aa198>&#34;Your heart is pure, and your mind clear, and your soul devout.&#34;</span>,
		<span style=color:#2aa198>&#34;Excitement and intrigue follow you closely wherever you go!&#34;</span>,
		<span style=color:#2aa198>&#34;A pleasant surprise is in store for you.&#34;</span>,
		<span style=color:#2aa198>&#34;May life throw you a pleasant curve.&#34;</span>,
		<span style=color:#2aa198>&#34;As the purse is emptied the heart is filled.&#34;</span>,
	}
}</code></pre></div><p>After extracting these two functions in a top level package, which will return
the content for the two commands, we can <code>import</code> the package in the <code>cookie</code>
and <code>eight_ball</code> commands, which will utilise the content. By being able to
extract code in a common package, it allows us to easily reuse any
of the shared code between multiple commands.</p><p>For example, if we had a database driver that would write to a database
(i.e. <code>sqlite</code>), we could easily <code>import</code> this driver in both <code>cookie</code> and
<code>eight_ball</code> and use the code within the context of the program.</p><p>Let&rsquo;s modify now the CLI programs to <code>import</code> the top-level package:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#586e75>// cmd/cookie/main.go
</span><span style=color:#586e75></span><span style=color:#719e07>package</span> main

<span style=color:#719e07>import</span> (
	<span style=color:#2aa198>&#34;fmt&#34;</span>
	<span style=color:#2aa198>&#34;math/rand&#34;</span>
	<span style=color:#2aa198>&#34;time&#34;</span>

	ft <span style=color:#2aa198>&#34;github.com/fteem/fortune_teller&#34;</span>
)

<span style=color:#268bd2>func</span> <span style=color:#268bd2>main</span>() {
	rand.<span style=color:#268bd2>Seed</span>(time.<span style=color:#268bd2>Now</span>().<span style=color:#268bd2>Unix</span>())
	quotes <span style=color:#719e07>:=</span> ft.<span style=color:#268bd2>Quotes</span>()
	fmt.<span style=color:#268bd2>Println</span>(quotes[rand.<span style=color:#268bd2>Intn</span>(<span style=color:#b58900>len</span>(quotes))])
}</code></pre></div><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#586e75>// cmd/eight_ball/main.go
</span><span style=color:#586e75></span><span style=color:#719e07>package</span> main

<span style=color:#719e07>import</span> (
	<span style=color:#2aa198>&#34;bufio&#34;</span>
	<span style=color:#2aa198>&#34;fmt&#34;</span>
	<span style=color:#2aa198>&#34;math/rand&#34;</span>
	<span style=color:#2aa198>&#34;os&#34;</span>
	<span style=color:#2aa198>&#34;time&#34;</span>

	ft <span style=color:#2aa198>&#34;github.com/fteem/fortune_teller&#34;</span>
)

<span style=color:#268bd2>func</span> <span style=color:#268bd2>main</span>() {
	rand.<span style=color:#268bd2>Seed</span>(time.<span style=color:#268bd2>Now</span>().<span style=color:#268bd2>Unix</span>())
	reader <span style=color:#719e07>:=</span> bufio.<span style=color:#268bd2>NewReader</span>(os.Stdin)
	answers <span style=color:#719e07>:=</span> ft.<span style=color:#268bd2>Answers</span>()
	fmt.<span style=color:#268bd2>Print</span>(<span style=color:#2aa198>&#34;What is your question? &#34;</span>)
	reader.<span style=color:#268bd2>ReadString</span>(<span style=color:#2aa198>&#39;\n&#39;</span>)

	fmt.<span style=color:#268bd2>Println</span>(answers[rand.<span style=color:#268bd2>Intn</span>(<span style=color:#b58900>len</span>(answers))])
}</code></pre></div><p>It&rsquo;s as simple as that. Here we purposely alias the package to <code>ft</code>, so we don&rsquo;t
have to type <code>fortune_teller</code> every time we want to invoke these functions. To
test the commands manually, the simplest way is to install them using
<code>go install ./...</code>, which will install all of the packages that can be found in
the path (and all of it&rsquo;s subpaths).</p><h2 id=it-works>It works!<a hidden class=anchor aria-hidden=true href=#it-works>#</a></h2><p>After trying this approach out, I noticed that some other popular packages use
a similar structure of building packages. For example, you can see that <code>BoltDB</code>
<a href=https://github.com/boltdb/bolt>places</a> it&rsquo;s command line program
in a <code>cmd/bolt</code> path. So does <a href=https://github.com/gobuffalo/packr>packr</a>, and
other various libraries that I have noticed. So, I would safely assume that
this pattern of organising your packages is clean and safe to use.</p><p>Since you got to the end, I will assume that you would like some more reading
resources around building and installing packages, and file structure organisation.
I recommend you continue your journey in Go with the following links:</p><ul><li><a href=https://golang.org/doc/code.html>How to Write Go Code</a></li><li><a href=https://golang.org/cmd/go/#hdr-Compile_packages_and_dependencies>Command go - Compile packages and dependencies</a></li><li><a href=https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091>Structuring Applications in Go</a> - I think this is probably the origin of the structural pattern used in this article</li></ul><p>If you would like to see the code used in this article, you can get it
<a href=https://github.com/fteem/fortune_teller>from my Github</a>.</p><section class=subscribe><p><b>Liked this article?</b>
Subscribe to my newsletter and get future articles in your inbox. It's a
short and sweet read, going out to +1000 of other engineers.</p><script async data-uid=5495dc64a0 src=https://ilija.ck.page/5495dc64a0/index.js></script><p class=privacy>I care about your privacy, and will never send you spam. You can unsubscribe at any time.</p></section></div><footer class=post-footer><ul class=post-tags><li><a href=https://ieftimov.com/tags/binaries/>binaries</a></li><li><a href=https://ieftimov.com/tags/conventions/>conventions</a></li></ul><nav class=paginav><a class=prev href=https://ieftimov.com/post/create-manage-macos-launchd-agents-golang/><span class=title>« Prev Page</span><br><span>Create and manage MacOS LaunchAgents using Go</span></a>
<a class=next href=https://ieftimov.com/post/understand-how-why-add-idempotent-requests-api/><span class=title>Next Page »</span><br><span>Understanding why and how to add idempotent requests to your APIs</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Packing multiple binaries in a Golang package on twitter" href="https://twitter.com/intent/tweet/?text=Packing%20multiple%20binaries%20in%20a%20Golang%20package&url=https%3a%2f%2fieftimov.com%2fpost%2fgolang-package-multiple-binaries%2f&hashtags=binaries%2cconventions"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Packing multiple binaries in a Golang package on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fieftimov.com%2fpost%2fgolang-package-multiple-binaries%2f&title=Packing%20multiple%20binaries%20in%20a%20Golang%20package&summary=Packing%20multiple%20binaries%20in%20a%20Golang%20package&source=https%3a%2f%2fieftimov.com%2fpost%2fgolang-package-multiple-binaries%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Packing multiple binaries in a Golang package on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fieftimov.com%2fpost%2fgolang-package-multiple-binaries%2f&title=Packing%20multiple%20binaries%20in%20a%20Golang%20package"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Packing multiple binaries in a Golang package on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fieftimov.com%2fpost%2fgolang-package-multiple-binaries%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Packing multiple binaries in a Golang package on whatsapp" href="https://api.whatsapp.com/send?text=Packing%20multiple%20binaries%20in%20a%20Golang%20package%20-%20https%3a%2f%2fieftimov.com%2fpost%2fgolang-package-multiple-binaries%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Packing multiple binaries in a Golang package on telegram" href="https://telegram.me/share/url?text=Packing%20multiple%20binaries%20in%20a%20Golang%20package&url=https%3a%2f%2fieftimov.com%2fpost%2fgolang-package-multiple-binaries%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>Copyright 2021 © Ilija Eftimov</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>