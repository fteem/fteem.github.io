<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Packing multiple binaries in a Golang package - Ilija Eftimov</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Packing multiple binaries in a Golang package" />
<meta property="og:description" content="Recently, while writing a small Golang program for setting reminders I came across a small confusion that I guess most newcomers to Golang will have - how to organise a package in a way that will enable it to cleanly contain two or more binaries.
This post is not aimed at experienced Golang programmers, it&#39;s mostly aimed at beginners to understand how to compose more complex packages, beyond making the usual &ldquo;one package one binary&rdquo; ones." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ieftimov.com/post/golang-package-multiple-binaries/" />
<meta property="og:image" content="https://ieftimov.com/cards/golang-package-multiple-binaries.png" />
<meta property="article:published_time" content="2018-01-23T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ieftimov.com/cards/golang-package-multiple-binaries.png"/>

<meta name="twitter:title" content="Packing multiple binaries in a Golang package"/>
<meta name="twitter:description" content="Recently, while writing a small Golang program for setting reminders I came across a small confusion that I guess most newcomers to Golang will have - how to organise a package in a way that will enable it to cleanly contain two or more binaries.
This post is not aimed at experienced Golang programmers, it&#39;s mostly aimed at beginners to understand how to compose more complex packages, beyond making the usual &ldquo;one package one binary&rdquo; ones."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/main.css" />
		<link rel="stylesheet" type="text/css" href="https://ieftimov.com/css/overrides.css" />
	

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://ieftimov.com/js/main.js"></script><script src="https://ieftimov.com/js/tooltip.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://ieftimov.com/">
				<img src="https://pbs.twimg.com/profile_images/1194757753585225728/JbET17PZ_400x400.jpg" alt="Ilija Eftimov" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://ieftimov.com/">Ilija Eftimov</a></h1>
	<div class="site-description"><p>Software engineer, author and open source contributor</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/fteem" title="Github"><i data-feather="github"></i></a></li><li><a href="https://twitter.com/fteem" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://www.linkedin.com/in/ieftimov" title="Linkedin"><i data-feather="linkedin"></i></a></li><li><a href="mailto:blog@ieftimov.com" title="Email"><i data-feather="mail"></i></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/categories/testing-in-go">Testing in Go</a>
			</li>
			
			<li>
				<a href="/posts">Archive</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="https://forms.gle/orfXK5jh1LRaiFzo8">Suggest a topic</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">23</span>
							<span class="rest">Jan 2018</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Packing multiple binaries in a Golang package</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Recently, while writing a small Golang program for setting reminders I came
across a small confusion that I guess most newcomers to Golang will have - how
to organise a package in a way that will enable it to cleanly contain two or
more binaries.</p>
<p><img src="/golang-package-multiple-binaries/deliveries.png" alt=""></p>
<p>This post is not aimed at experienced Golang programmers, it's mostly aimed at
beginners to understand how to compose more complex packages, beyond making the
usual &ldquo;one package one binary&rdquo; ones. It's essentially what I would like to have
read (or understand) after spinning my wheels for a bit while building my first
(more complex) package.</p>
<p>But, if you are one of the experienced folks I would be very grateful if you
finish reading this article and call out any mistakes you might find. Also I,
and probably other beginners, would be happy to find out any other alternative
approaches to this problem.</p>
<p>That being said, let's begin by seeing what an elementary package layout looks
like, and then we can continue with building a more complex one.</p>
<h2 id="fortune-telling">Fortune telling</h2>
<p>Imagine we need to build a CLI program in Golang. One that needs to tell us
our fortune, or provide advice on a subject that we are thinking about. Just like
a <a href="https://en.wikipedia.org/wiki/Magic_8-Ball">Magic 8-Ball</a>.</p>
<p>Let's begin by fleshing out the <code>main</code> file of this package:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// eight_ball.go
</span><span style="color:#998;font-style:italic"></span><span style="font-weight:bold">package</span> main

<span style="font-weight:bold">import</span> (
	<span style="color:#b84">&#34;bufio&#34;</span>
	<span style="color:#b84">&#34;fmt&#34;</span>
	<span style="color:#b84">&#34;math/rand&#34;</span>
	<span style="color:#b84">&#34;os&#34;</span>
	<span style="color:#b84">&#34;time&#34;</span>
)

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
	rand.<span style="color:#900;font-weight:bold">Seed</span>(time.<span style="color:#900;font-weight:bold">Now</span>().<span style="color:#900;font-weight:bold">Unix</span>())
	reader <span style="font-weight:bold">:=</span> bufio.<span style="color:#900;font-weight:bold">NewReader</span>(os.Stdin)
	answers <span style="font-weight:bold">:=</span> []<span style="color:#458;font-weight:bold">string</span>{
		<span style="color:#b84">&#34;It is certain&#34;</span>,
		<span style="color:#b84">&#34;It is decidedly so&#34;</span>,
		<span style="color:#b84">&#34;Without a doubt&#34;</span>,
		<span style="color:#b84">&#34;Yes, definitely&#34;</span>,
		<span style="color:#b84">&#34;You may rely on it&#34;</span>,
		<span style="color:#b84">&#34;As I see it, yes&#34;</span>,
		<span style="color:#b84">&#34;Most likely&#34;</span>,
		<span style="color:#b84">&#34;Outlook good&#34;</span>,
		<span style="color:#b84">&#34;Yes&#34;</span>,
		<span style="color:#b84">&#34;Signs point to yes&#34;</span>,
		<span style="color:#b84">&#34;Reply hazy try again&#34;</span>,
		<span style="color:#b84">&#34;Ask again later&#34;</span>,
		<span style="color:#b84">&#34;Better not tell you now&#34;</span>,
		<span style="color:#b84">&#34;Cannot predict now&#34;</span>,
		<span style="color:#b84">&#34;Concentrate and ask again&#34;</span>,
		<span style="color:#b84">&#34;Don&#39;t count on it&#34;</span>,
		<span style="color:#b84">&#34;My reply is no&#34;</span>,
		<span style="color:#b84">&#34;My sources say no&#34;</span>,
		<span style="color:#b84">&#34;Outlook not so good&#34;</span>,
		<span style="color:#b84">&#34;Very doubtful&#34;</span>,
	}

	fmt.<span style="color:#900;font-weight:bold">Print</span>(<span style="color:#b84">&#34;What is your question? &#34;</span>)
	reader.<span style="color:#900;font-weight:bold">ReadString</span>(<span style="color:#b84">&#39;\n&#39;</span>)

	fmt.<span style="color:#900;font-weight:bold">Println</span>(answers[rand.<span style="color:#900;font-weight:bold">Intn</span>(<span style="color:#999">len</span>(answers))])
}</code></pre></div>
<p>The implementation is quite straightforward. We have a list of predefined
answers, blatantly ripped off from
<a href="https://en.wikipedia.org/wiki/Magic_8-Ball">Wikipedia's article on Magic 8-ball</a>. The
program takes the input from <code>STDIN</code>, ignores it (obviously) and with the help of
the <code>rand</code> package takes a random answer from the array, which is then printed
to <code>STDOUT</code>.</p>
<p>We can test this by running <code>go run eight_ball.go</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go run main.go
What is your question? Will I win the lottery this year?
My sources say no</code></pre></div>
<p>I guess I won't be getting rich by wining the lottery. Now, let's throw in
another program in our package. This one, following the same theme, can be about
fortune cookies.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// cookie.go
</span><span style="color:#998;font-style:italic"></span><span style="font-weight:bold">package</span> main

<span style="font-weight:bold">import</span> (
	<span style="color:#b84">&#34;fmt&#34;</span>
	<span style="color:#b84">&#34;math/rand&#34;</span>
	<span style="color:#b84">&#34;time&#34;</span>
)

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
	rand.<span style="color:#900;font-weight:bold">Seed</span>(time.<span style="color:#900;font-weight:bold">Now</span>().<span style="color:#900;font-weight:bold">Unix</span>())
	quotes <span style="font-weight:bold">:=</span> []<span style="color:#458;font-weight:bold">string</span>{
		<span style="color:#b84">&#34;The beginning of wisdom is to desire it.&#34;</span>,
		<span style="color:#b84">&#34;You will have a very pleasant experience.&#34;</span>,
		<span style="color:#b84">&#34;You will inherit some money or a small piece of land.&#34;</span>,
		<span style="color:#b84">&#34;You will live a long, happy life.&#34;</span>,
		<span style="color:#b84">&#34;You will spend old age in comfort and material wealth.&#34;</span>,
		<span style="color:#b84">&#34;You will step on the soil of many countries.&#34;</span>,
		<span style="color:#b84">&#34;You will take a chance in something in the near future.&#34;</span>,
		<span style="color:#b84">&#34;You will witness a special ceremony.&#34;</span>,
		<span style="color:#b84">&#34;Your everlasting patience will be rewarded sooner or later.&#34;</span>,
		<span style="color:#b84">&#34;Your great attention to detail is both a blessing and a curse.&#34;</span>,
		<span style="color:#b84">&#34;Your heart is a place to draw true happiness.&#34;</span>,
		<span style="color:#b84">&#34;Your ability to juggle many tasks will take you far.&#34;</span>,
		<span style="color:#b84">&#34;A friend asks only for your time, not your money.&#34;</span>,
		<span style="color:#b84">&#34;You will be invited to an exciting event.&#34;</span>,
	}

	fmt.<span style="color:#900;font-weight:bold">Println</span>(quotes[rand.<span style="color:#900;font-weight:bold">Intn</span>(<span style="color:#999">len</span>(quotes))])
}</code></pre></div>
<p>If you are carefully reading the code, you can see the approach is basically the
same. We have a list of predefined quotes, and using the <code>math/rand</code> package
we print out a random quote when the program is executed.</p>
<p>If we run the program, we would get the following output:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go run cookie.go
You will live a long, happy life.</code></pre></div>
<p>Nice and simple. The program works flawlessly.</p>
<p><img src="/golang-package-multiple-binaries/under_construction.png" alt=""></p>
<h2 id="building-it">Building it</h2>
<p>So how can we build this now in a binary, and distrubite it
for different operating systems and architectures. It's really one of the things
that Go really shines for, right?</p>
<p>If you have done any Go you would immediately say: using <code>go build</code>. Let's give
that a shot:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go build
<span style="color:#998;font-style:italic"># github.com/fortune_telling</span>
./eight_ball.go:11:6: main redeclared in this block
	previous declaration at ./cookie.go:9:6</code></pre></div>
<p>Whoops, what happenned? Well, the error is quite self-descriptive. Basically we
have the <code>main</code> function defined in both of these files. But, on the other hand
if we rename those functions they will not be run when we create binaries out
of the programs. Let's try to rename the <code>main</code> function as <code>foo</code> in
<code>eight_ball.go</code>, and then try to run the program using <code>go run</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go run eight_ball.go
<span style="color:#998;font-style:italic"># command-line-arguments</span>
runtime.main_main·f: relocation target main.main not defined
runtime.main_main·f: undefined: <span style="color:#b84">&#34;main.main&#34;</span></code></pre></div>
<p>As you can see, then the binary cannot be built, since Go's compiler complains
about the missing <code>main</code> function. On the other hand, the missing <code>main</code>
function in <code>eight_ball.go</code> will actually make <code>go build</code> work.</p>
<p>Why is that? Well you see, in a package with a name <code>foo</code> there can only be one
<code>main</code> function. When the package is built, that <code>main</code> function will be the
entry point for the program (in the binary), so it's mandatory the package has it.
Since <code>eight_ball.go</code> is missing it, and <code>cookie.go</code> has it, the package <code>main</code>
will have a single <code>main</code> function (in <code>cookie.go</code>), rendering the <code>main</code> package
as valid.</p>
<script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
      <form action="https://app.convertkit.com/forms/1137919/subscriptions" class="seva-form formkit-form" method="post" data-sv-form="1137919" data-uid="73e1f57c10" data-format="inline" data-version="5" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Cool. Check email in 3...2...1...&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null},&quot;custom_css&quot;:{&quot;css&quot;:null},&quot;incentive_email&quot;:{&quot;action&quot;:&quot;url&quot;,&quot;auto_confirm&quot;:false,&quot;button_text&quot;:&quot;Confirm your subscription&quot;,&quot;content_one&quot;:&quot;Thanks for signing up. Click the link below to confirm your subscription and you'll be on your way.&quot;,&quot;content_two&quot;:&quot;It's good to have you!&quot;,&quot;from_email_address_id&quot;:1421437,&quot;url&quot;:&quot;https://app.convertkit.com/confirm-subscription&quot;,&quot;send_email&quot;:false,&quot;subject&quot;:&quot;Important: confirm your subscription&quot;,&quot;upload_file_name&quot;:null,&quot;upload_key&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:null,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:null,&quot;devices&quot;:null,&quot;show_once_every&quot;:null},&quot;powered_by&quot;:{&quot;show&quot;:false,&quot;url&quot;:&quot;https://convertkit.com?utm_source=dynamic&amp;utm_medium=referral&amp;utm_campaign=poweredby&amp;utm_content=form&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:null},&quot;slide_in&quot;:{&quot;display_in&quot;:null,&quot;trigger&quot;:null,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:null,&quot;devices&quot;:null,&quot;show_once_every&quot;:null},&quot;sticky_bar&quot;:{&quot;display_in&quot;:null,&quot;trigger&quot;:null,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:null,&quot;devices&quot;:null,&quot;show_once_every&quot;:null},&quot;thank_you_page&quot;:{&quot;enabled&quot;:false}},&quot;version&quot;:&quot;5&quot;}" min-width="400 500 600 700 800 900" style="background-color: rgb(249, 250, 251); border-radius: 4px;max-width:900px;"><div class="formkit-background" style="opacity: 0.2;"></div><div data-style="minimal"><div class="formkit-header" data-element="header" style="color: rgb(77, 77, 77); font-size: 27px; font-weight: 700;"><h1 style="margin-top:0;">In a hurry?</h1></div><div class="formkit-subheader" data-element="subheader" style="color: rgb(104, 104, 104); font-size: 18px;"><p>I've prepared a quick TL;DR PDF with a 4-step recipe to pack multiple binaries in a Golang module. Drop your e-mail address and get it now!</p></div><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" data-stacked="false" class="seva-fields formkit-fields"><div class="formkit-field"><input class="formkit-input" name="email_address" placeholder="Your email address" required="" type="email" style="color: rgb(0, 0, 0); border-color: rgb(227, 227, 227); border-radius: 4px; font-weight: 400;"></div><button data-element="submit" class="formkit-submit formkit-submit" style="color: rgb(255, 255, 255); background-color: rgb(192, 91, 77); border-radius: 4px; font-weight: 400;"><div class="formkit-spinner"><div></div><div></div><div></div></div><span>Gimme!</span></button></div><div class="formkit-guarantee" data-element="guarantee" style="color: rgb(77, 77, 77); font-size: 13px; font-weight: 400;"><p>I HATE spam probably as much as you do.</p></div></div><style>.formkit-form[data-uid="73e1f57c10"] *{box-sizing:border-box;}.formkit-form[data-uid="73e1f57c10"]{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.formkit-form[data-uid="73e1f57c10"] legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table;}.formkit-form[data-uid="73e1f57c10"] fieldset{border:0;padding:0.01em 0 0 0;margin:0;min-width:0;}.formkit-form[data-uid="73e1f57c10"] body:not(:-moz-handler-blocked) fieldset{display:table-cell;}.formkit-form[data-uid="73e1f57c10"] h1,.formkit-form[data-uid="73e1f57c10"] h2,.formkit-form[data-uid="73e1f57c10"] h3,.formkit-form[data-uid="73e1f57c10"] h4,.formkit-form[data-uid="73e1f57c10"] h5,.formkit-form[data-uid="73e1f57c10"] h6{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="73e1f57c10"] p{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="73e1f57c10"] ol:not([template-default]),.formkit-form[data-uid="73e1f57c10"] ul:not([template-default]),.formkit-form[data-uid="73e1f57c10"] blockquote:not([template-default]){text-align:left;}.formkit-form[data-uid="73e1f57c10"] p:not([template-default]),.formkit-form[data-uid="73e1f57c10"] hr:not([template-default]),.formkit-form[data-uid="73e1f57c10"] blockquote:not([template-default]),.formkit-form[data-uid="73e1f57c10"] ol:not([template-default]),.formkit-form[data-uid="73e1f57c10"] ul:not([template-default]){color:inherit;font-style:initial;}.formkit-form[data-uid="73e1f57c10"][data-format="modal"]{display:none;}.formkit-form[data-uid="73e1f57c10"][data-format="slide in"]{display:none;}.formkit-form[data-uid="73e1f57c10"] .formkit-input,.formkit-form[data-uid="73e1f57c10"] .formkit-select,.formkit-form[data-uid="73e1f57c10"] .formkit-checkboxes{width:100%;}.formkit-form[data-uid="73e1f57c10"] .formkit-button,.formkit-form[data-uid="73e1f57c10"] .formkit-submit{border:0;border-radius:5px;color:#ffffff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;cursor:pointer;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle;}.formkit-form[data-uid="73e1f57c10"] .formkit-button:hover,.formkit-form[data-uid="73e1f57c10"] .formkit-submit:hover,.formkit-form[data-uid="73e1f57c10"] .formkit-button:focus,.formkit-form[data-uid="73e1f57c10"] .formkit-submit:focus{outline:none;}.formkit-form[data-uid="73e1f57c10"] .formkit-button:hover > span,.formkit-form[data-uid="73e1f57c10"] .formkit-submit:hover > span,.formkit-form[data-uid="73e1f57c10"] .formkit-button:focus > span,.formkit-form[data-uid="73e1f57c10"] .formkit-submit:focus > span{background-color:rgba(0,0,0,0.1);}.formkit-form[data-uid="73e1f57c10"] .formkit-button > span,.formkit-form[data-uid="73e1f57c10"] .formkit-submit > span{display:block;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;padding:12px 24px;}.formkit-form[data-uid="73e1f57c10"] .formkit-input{background:#ffffff;padding:12px;border:1px solid #e3e3e3;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:0;-webkit-transition:border-color ease-out 300ms;transition:border-color ease-out 300ms;}.formkit-form[data-uid="73e1f57c10"] .formkit-input:focus{outline:none;border-color:#1677be;-webkit-transition:border-color ease 300ms;transition:border-color ease 300ms;}.formkit-form[data-uid="73e1f57c10"] .formkit-input::-webkit-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="73e1f57c10"] .formkit-input::-moz-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="73e1f57c10"] .formkit-input:-ms-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="73e1f57c10"] .formkit-input::placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="73e1f57c10"] [data-group="dropdown"]{position:relative;display:inline-block;width:100%;}.formkit-form[data-uid="73e1f57c10"] [data-group="dropdown"]::before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent transparent;border-style:solid;border-width:6px 6px 0 6px;height:0;width:0;z-index:999;}.formkit-form[data-uid="73e1f57c10"] [data-group="dropdown"] select{height:auto;width:100%;cursor:pointer;color:#333333;line-height:1.4;margin-bottom:0;padding:0 6px;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px;padding-right:25px;border:1px solid #e3e3e3;background:#ffffff;}.formkit-form[data-uid="73e1f57c10"] [data-group="dropdown"] select:focus{outline:none;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"]{text-align:left;margin:0;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"]{margin-bottom:10px;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] *{cursor:pointer;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"]:last-of-type{margin-bottom:0;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]{display:none;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"] + label::after{content:none;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::after{border-color:#ffffff;content:"";}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::before{background:#10bf7a;border-color:#10bf7a;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] label{position:relative;display:inline-block;padding-left:28px;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] label::before,.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] label::after{position:absolute;content:"";display:inline-block;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] label::before{height:16px;width:16px;border:1px solid #e3e3e3;background:#ffffff;left:0px;top:3px;}.formkit-form[data-uid="73e1f57c10"] [data-group="checkboxes"] [data-group="checkbox"] label::after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px;}.formkit-form[data-uid="73e1f57c10"] .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%;}.formkit-form[data-uid="73e1f57c10"] .formkit-alert:empty{display:none;}.formkit-form[data-uid="73e1f57c10"] .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c;}.formkit-form[data-uid="73e1f57c10"] .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110;}.formkit-form[data-uid="73e1f57c10"] .formkit-spinner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:0px;width:0px;margin:0 auto;position:absolute;top:0;left:0;right:0;width:0px;overflow:hidden;text-align:center;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;}.formkit-form[data-uid="73e1f57c10"] .formkit-spinner > div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:0.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-73e1f57c10- 1.4s infinite ease-in-out both;animation:formkit-bouncedelay-formkit-form-data-uid-73e1f57c10- 1.4s infinite ease-in-out both;}.formkit-form[data-uid="73e1f57c10"] .formkit-spinner > div:nth-child(1){-webkit-animation-delay:-0.32s;animation-delay:-0.32s;}.formkit-form[data-uid="73e1f57c10"] .formkit-spinner > div:nth-child(2){-webkit-animation-delay:-0.16s;animation-delay:-0.16s;}.formkit-form[data-uid="73e1f57c10"] .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px;}.formkit-form[data-uid="73e1f57c10"] .formkit-submit[data-active] .formkit-spinner ~ span{opacity:0;}.formkit-form[data-uid="73e1f57c10"] .formkit-powered-by[data-active="false"]{opacity:0.35;}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-73e1f57c10-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}@keyframes formkit-bouncedelay-formkit-form-data-uid-73e1f57c10-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}.formkit-form[data-uid="73e1f57c10"] blockquote{padding:10px 20px;margin:0 0 20px;border-left:5px solid #e1e1e1;} .formkit-form[data-uid="73e1f57c10"]{border:1px solid #e3e3e3;max-width:700px;position:relative;overflow:hidden;}.formkit-form[data-uid="73e1f57c10"] .formkit-background{width:100%;height:100%;position:absolute;top:0;left:0;background-size:cover;background-position:center;opacity:0.3;z-index:1;}.formkit-form[data-uid="73e1f57c10"] [data-style="minimal"]{padding:20px;width:100%;z-index:2;position:relative;}.formkit-form[data-uid="73e1f57c10"] .formkit-header{margin:0 0 27px 0;text-align:center;}.formkit-form[data-uid="73e1f57c10"] .formkit-subheader{margin:18px 0;text-align:center;}.formkit-form[data-uid="73e1f57c10"] .formkit-guarantee{font-size:13px;margin:10px 0 15px 0;text-align:center;}.formkit-form[data-uid="73e1f57c10"] .formkit-guarantee > p{margin:0;}.formkit-form[data-uid="73e1f57c10"] .formkit-powered-by{color:#7d7d7d;display:block;font-size:12px;margin:10px 0 0 0;text-align:center;}.formkit-form[data-uid="73e1f57c10"] .formkit-fields{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:25px auto 0 auto;}.formkit-form[data-uid="73e1f57c10"] .formkit-field{min-width:220px;}.formkit-form[data-uid="73e1f57c10"] .formkit-field,.formkit-form[data-uid="73e1f57c10"] .formkit-submit{margin:0 0 15px 0;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;}.formkit-form[data-uid="73e1f57c10"][min-width~="600"] [data-style="minimal"]{padding:40px;}.formkit-form[data-uid="73e1f57c10"][min-width~="600"] .formkit-fields[data-stacked="false"]{margin-left:-5px;margin-right:-5px;}.formkit-form[data-uid="73e1f57c10"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-field,.formkit-form[data-uid="73e1f57c10"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-submit{margin:0 5px 15px 5px;}.formkit-form[data-uid="73e1f57c10"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-field{-webkit-flex:100 1 auto;-ms-flex:100 1 auto;flex:100 1 auto;}.formkit-form[data-uid="73e1f57c10"][min-width~="600"] .formkit-fields[data-stacked="false"] .formkit-submit{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;} </style></form>


<h2 id="split-the-packages">Split the packages</h2>
<p>Okay, so by now hopefully it's clear that we cannot have two binaries with two
entry points in a single package. So, why don't we split the files in two packages.
For example, <code>cookie.go</code> can have a <code>cookie</code> package, while <code>eight_ball.go</code> can
have an <code>eight_ball</code> package. Both of them will have a <code>main</code> function and
everything should work smoothly, right?</p>
<p>Let's do that and give it a shot. First, let's rename the packages in the
<code>cookie.go</code> and <code>eight_ball.go</code> files respectively:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// cookie.go
</span><span style="color:#998;font-style:italic"></span><span style="font-weight:bold">package</span> cookie

<span style="font-weight:bold">import</span> (
	<span style="color:#b84">&#34;fmt&#34;</span>
	<span style="color:#b84">&#34;math/rand&#34;</span>
	<span style="color:#b84">&#34;time&#34;</span>
)

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
	<span style="color:#998;font-style:italic">// Snipped
</span><span style="color:#998;font-style:italic"></span>}</code></pre></div>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// eight_ball.go
</span><span style="color:#998;font-style:italic"></span><span style="font-weight:bold">package</span> eight_ball

<span style="font-weight:bold">import</span> (
	<span style="color:#b84">&#34;bufio&#34;</span>
	<span style="color:#b84">&#34;fmt&#34;</span>
	<span style="color:#b84">&#34;math/rand&#34;</span>
	<span style="color:#b84">&#34;os&#34;</span>
	<span style="color:#b84">&#34;time&#34;</span>
)

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
	<span style="color:#998;font-style:italic">// Snipped
</span><span style="color:#998;font-style:italic"></span>}</code></pre></div>
<p>Let's try to build these packages now:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go build cookie.go</code></pre></div>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go build eight_ball.go</code></pre></div>
<p>Okay, cool. We ran <code>go build</code> on the files and there were no problems. That means
that Go produced the binaries for each of these files and we could run them.</p>
<p>Nope. It didn't.</p>
<p>If we see <a href="https://golang.org/cmd/go/#hdr-Compile_packages_and_dependencies">Go's documentation</a>
on the <code>go build</code> command, we will find this segment:</p>
<blockquote>
<p>When compiling a single main package, build writes the resulting executable to
an output file named after the first source file (&lsquo;go build ed.go rx.go&rsquo; writes
&lsquo;ed&rsquo; or &lsquo;ed.exe&rsquo;) or the source code directory (&lsquo;go build unix/sam&rsquo; writes &lsquo;sam&rsquo;
or &lsquo;sam.exe&rsquo;). The &lsquo;.exe&rsquo; suffix is added when writing a Windows executable.</p>
</blockquote>
<p>Also, this:</p>
<blockquote>
<p>When compiling multiple packages or a single non-main package, build compiles
the packages but discards the resulting object, serving only as a check that
the packages can be built.</p>
</blockquote>
<p>This means that, to produce a binary of a package, whose name will be derived
from the folder name it is stored in, we need to build a <code>main</code> package. That
means that our <code>cookie.go</code> and <code>eight_ball.go</code> files will have to be contained
in their own folders, while their package names have to stay <code>main</code>.</p>
<h2 id="reorganizing-our-files">Reorganizing our files</h2>
<p>What we need to do is quite simple actually. In our working directory let's
introduce a folder called <code>cmd</code>, which will store both of our commands.</p>
<p>Let's run the following commands:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› mkdir -p cmd/<span style="font-weight:bold">{</span>cookie,eight_ball<span style="font-weight:bold">}</span>/

› mv cookie.go cmd/cookie/main.go

› mv eight_ball.go cmd/eight_ball/main.go</code></pre></div>
<p>If we run <code>tree</code> on our working directory, we will see the following structure:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› tree
.
└── cmd
    ├── cookie
    │   └── main.go
    └── eight_ball
        └── main.go</code></pre></div>
<p>If we try to build the packages now we won't get far as well:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go build
can<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>t load package: package github.com/fortune_teller: no Go files in /Users/ie/projects/go/src/github.com/fortune_teller</code></pre></div>
<p>But, the restructuring of the packages allows us to now use the <code>go install ./...</code>
command, which will install our packages in our <code>$GOPATH/bin</code> directory:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› go install ./...

› cookie
A thrilling <span style="color:#999">time</span> is in your immediate future.

› eight_ball
What is your question? Will I win the lottery this year?
Don<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>t count on it</code></pre></div>
<p>Whoa, so, what happenned? How did these programs just got installed?</p>
<p>What happenned is the following - since we moved the programs to their own
subfolders in our workspace, when built (and installed) they will inherit the
name of the folder they are in. Therefore, <code>cmd/cookie/main.go</code> will compile
into a <code>cookie</code> binary, while <code>cmd/eight_ball/main.go</code> will compile into a
<code>eight_ball</code> binary. Then, after buildilng, these binaries will be installed
into the Go binaries path (<code>$GOPATH/bin</code>).</p>
<p>If you would like to build the binaries for each of the two packages, without
installing them to <code>$GOPATH/bin</code>, then you will need to <code>cd</code> in to the paths
where the <code>main.go</code> files are, and run <code>go build</code> there:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› <span style="color:#999">cd</span> cmd/cookie

› go build

› ./cookie
Your greatest fortune is the large number of friends you have.</code></pre></div>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">› <span style="color:#999">cd</span> fortune_teller/cmd/eight_ball

› go build

› ./eight_ball
What is your question? Will I win the lottery?
Yes, definitely</code></pre></div>
<p><img src="/golang-package-multiple-binaries/inspection.png" alt=""></p>
<h2 id="what-if-i-want-a-library-as-part-of-the-package">What if I want a library as part of the package?</h2>
<p>This question makes sense - what if with the package one wants to ship some
additional code. Or even better, what if you would like to <code>import</code> code from
the package in the CLI programs?</p>
<p>Let's extract the <code>answers</code> and <code>quotes</code> variables from the CLI programs into a
new package, and try to import that one back in:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// content.go
</span><span style="color:#998;font-style:italic"></span><span style="font-weight:bold">package</span> fortune_teller

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">Answers</span>() []<span style="color:#458;font-weight:bold">string</span> {
	<span style="font-weight:bold">return</span> []<span style="color:#458;font-weight:bold">string</span>{
		<span style="color:#b84">&#34;It is certain&#34;</span>,
		<span style="color:#b84">&#34;It is decidedly so&#34;</span>,
		<span style="color:#b84">&#34;Without a doubt&#34;</span>,
		<span style="color:#b84">&#34;Yes, definitely&#34;</span>,
		<span style="color:#b84">&#34;You may rely on it&#34;</span>,
		<span style="color:#b84">&#34;As I see it, yes&#34;</span>,
		<span style="color:#b84">&#34;Most likely&#34;</span>,
		<span style="color:#b84">&#34;Outlook good&#34;</span>,
		<span style="color:#b84">&#34;Yes&#34;</span>,
		<span style="color:#b84">&#34;Signs point to yes&#34;</span>,
		<span style="color:#b84">&#34;Reply hazy try again&#34;</span>,
		<span style="color:#b84">&#34;Ask again later&#34;</span>,
		<span style="color:#b84">&#34;Better not tell you now&#34;</span>,
		<span style="color:#b84">&#34;Cannot predict now&#34;</span>,
		<span style="color:#b84">&#34;Concentrate and ask again&#34;</span>,
		<span style="color:#b84">&#34;Don&#39;t count on it&#34;</span>,
		<span style="color:#b84">&#34;My reply is no&#34;</span>,
		<span style="color:#b84">&#34;My sources say no&#34;</span>,
		<span style="color:#b84">&#34;Outlook not so good&#34;</span>,
		<span style="color:#b84">&#34;Very doubtful&#34;</span>,
	}
}

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">Quotes</span>() []<span style="color:#458;font-weight:bold">string</span> {
	<span style="font-weight:bold">return</span> []<span style="color:#458;font-weight:bold">string</span>{
		<span style="color:#b84">&#34;There is a true and sincere friendship between you and your friends.&#34;</span>,
		<span style="color:#b84">&#34;You find beauty in ordinary things, do not lose this ability.&#34;</span>,
		<span style="color:#b84">&#34;Ideas are like children; there are none so wonderful as your own.&#34;</span>,
		<span style="color:#b84">&#34;It takes more than good memory to have good memories.&#34;</span>,
		<span style="color:#b84">&#34;A thrilling time is in your immediate future.&#34;</span>,
		<span style="color:#b84">&#34;Your blessing is no more than being safe and sound for the whole lifetime.&#34;</span>,
		<span style="color:#b84">&#34;Plan for many pleasures ahead.&#34;</span>,
		<span style="color:#b84">&#34;The joyfulness of a man prolongeth his days.&#34;</span>,
		<span style="color:#b84">&#34;Your everlasting patience will be rewarded sooner or later.&#34;</span>,
		<span style="color:#b84">&#34;Make two grins grow where there was only a grouch before.&#34;</span>,
		<span style="color:#b84">&#34;Something you lost will soon turn up.&#34;</span>,
		<span style="color:#b84">&#34;Your heart is pure, and your mind clear, and your soul devout.&#34;</span>,
		<span style="color:#b84">&#34;Excitement and intrigue follow you closely wherever you go!&#34;</span>,
		<span style="color:#b84">&#34;A pleasant surprise is in store for you.&#34;</span>,
		<span style="color:#b84">&#34;May life throw you a pleasant curve.&#34;</span>,
		<span style="color:#b84">&#34;As the purse is emptied the heart is filled.&#34;</span>,
	}
}</code></pre></div>
<p>After extracting these two functions in a top level package, which will return
the content for the two commands, we can <code>import</code> the package in the <code>cookie</code>
and <code>eight_ball</code> commands, which will utilise the content. By being able to
extract code in a common package, it allows us to easily reuse any
of the shared code between multiple commands.</p>
<p>For example, if we had a database driver that would write to a database
(i.e. <code>sqlite</code>), we could easily <code>import</code> this driver in both <code>cookie</code> and
<code>eight_ball</code> and use the code within the context of the program.</p>
<p>Let's modify now the CLI programs to <code>import</code> the top-level package:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// cmd/cookie/main.go
</span><span style="color:#998;font-style:italic"></span><span style="font-weight:bold">package</span> main

<span style="font-weight:bold">import</span> (
	<span style="color:#b84">&#34;fmt&#34;</span>
	<span style="color:#b84">&#34;math/rand&#34;</span>
	<span style="color:#b84">&#34;time&#34;</span>

	ft <span style="color:#b84">&#34;github.com/fteem/fortune_teller&#34;</span>
)

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
	rand.<span style="color:#900;font-weight:bold">Seed</span>(time.<span style="color:#900;font-weight:bold">Now</span>().<span style="color:#900;font-weight:bold">Unix</span>())
	quotes <span style="font-weight:bold">:=</span> ft.<span style="color:#900;font-weight:bold">Quotes</span>()
	fmt.<span style="color:#900;font-weight:bold">Println</span>(quotes[rand.<span style="color:#900;font-weight:bold">Intn</span>(<span style="color:#999">len</span>(quotes))])
}</code></pre></div>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// cmd/eight_ball/main.go
</span><span style="color:#998;font-style:italic"></span><span style="font-weight:bold">package</span> main

<span style="font-weight:bold">import</span> (
	<span style="color:#b84">&#34;bufio&#34;</span>
	<span style="color:#b84">&#34;fmt&#34;</span>
	<span style="color:#b84">&#34;math/rand&#34;</span>
	<span style="color:#b84">&#34;os&#34;</span>
	<span style="color:#b84">&#34;time&#34;</span>

	ft <span style="color:#b84">&#34;github.com/fteem/fortune_teller&#34;</span>
)

<span style="font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
	rand.<span style="color:#900;font-weight:bold">Seed</span>(time.<span style="color:#900;font-weight:bold">Now</span>().<span style="color:#900;font-weight:bold">Unix</span>())
	reader <span style="font-weight:bold">:=</span> bufio.<span style="color:#900;font-weight:bold">NewReader</span>(os.Stdin)
	answers <span style="font-weight:bold">:=</span> ft.<span style="color:#900;font-weight:bold">Answers</span>()
	fmt.<span style="color:#900;font-weight:bold">Print</span>(<span style="color:#b84">&#34;What is your question? &#34;</span>)
	reader.<span style="color:#900;font-weight:bold">ReadString</span>(<span style="color:#b84">&#39;\n&#39;</span>)

	fmt.<span style="color:#900;font-weight:bold">Println</span>(answers[rand.<span style="color:#900;font-weight:bold">Intn</span>(<span style="color:#999">len</span>(answers))])
}</code></pre></div>
<p>It's as simple as that. Here we purposely alias the package to <code>ft</code>, so we don't
have to type <code>fortune_teller</code> every time we want to invoke these functions. To
test the commands manually, the simplest way is to install them using
<code>go install ./...</code>, which will install all of the packages that can be found in
the path (and all of it's subpaths).</p>
<h2 id="it-works">It works!</h2>
<p>After trying this approach out, I noticed that some other popular packages use
a similar structure of building packages. For example, you can see that <code>BoltDB</code>
<a href="https://github.com/boltdb/bolt">places</a> it's command line program
in a <code>cmd/bolt</code> path. So does <a href="https://github.com/gobuffalo/packr">packr</a>, and
other various libraries that I have noticed. So, I would safely assume that
this pattern of organising your packages is clean and safe to use.</p>
<p>Since you got to the end, I will assume that you would like some more reading
resources around building and installing packages, and file structure organisation.
I recommend you continue your journey in Go with the following links:</p>
<ul>
<li><a href="https://golang.org/doc/code.html">How to Write Go Code</a></li>
<li><a href="https://golang.org/cmd/go/#hdr-Compile_packages_and_dependencies">Command go - Compile packages and dependencies</a></li>
<li><a href="https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091">Structuring Applications in Go</a> - I think this is probably the origin of the structural pattern used in this article</li>
</ul>
<p>If you would like to see the code used in this article, you can get it
<a href="https://github.com/fteem/fortune_teller">from my Github</a>.</p>







<div id="mc_embed_signup">
<form action="https://pm.us20.list-manage.com/subscribe/post?u=d9a6471309140dcd520d05346&amp;id=2aac491644" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
        <div class="heading">Join The Newsletter</div>
        <p>
            I write about backend technologies, programming and cloud architectures. Join hundreds of other developers that get my content, twice a month. Unsubscribe whenever. Never spam.
        </p>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Your email address" required>
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">

      
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d9a6471309140dcd520d05346_2aac491644" tabindex="-1" value=""></div>

    <p>You can also subscribe <a href="/index.xml">via RSS</a>.</p>
    </div>
</form>
</div>



<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:1585609,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>


			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/binaries">binaries</a></li>
							
							<li><a href="/tags/conventions">conventions</a></li>
							
						</ul>
					
				
			</div><div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'eftimov';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
		Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> Copyright © 2014 - 2019 Ilija Eftimov |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-11264459-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
