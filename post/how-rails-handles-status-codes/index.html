<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How Rails handles status codes | Ilija Eftimov ⚡️</title><meta name=keywords content="status,codes,http"><meta name=description content="Recently, I have been building an API as part of my day job. Rails is a great framework to build APIs in, and it has been a joy so far. When building the responses of the API, it&rsquo;s paramount to understand what HTTP statuses you should utilize, which will in return help the consumers by providing more meaningful responses.
Sure, you could always have a status property in the response JSON, which will be a human-readable status code."><meta name=author content="Ilija"><link rel=canonical href=https://ieftimov.com/post/how-rails-handles-status-codes/><link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://ieftimov.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ieftimov.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ieftimov.com/favicon-32x32.png><link rel=apple-touch-icon href=https://ieftimov.com/apple-touch-icon.png><link rel=mask-icon href=https://ieftimov.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script async defer data-domain=ieftimov.com src=https://plausible.io/js/plausible.js></script><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><meta property="og:title" content="How Rails handles status codes"><meta property="og:description" content="Recently, I have been building an API as part of my day job. Rails is a great framework to build APIs in, and it has been a joy so far. When building the responses of the API, it&rsquo;s paramount to understand what HTTP statuses you should utilize, which will in return help the consumers by providing more meaningful responses.
Sure, you could always have a status property in the response JSON, which will be a human-readable status code."><meta property="og:type" content="article"><meta property="og:url" content="https://ieftimov.com/post/how-rails-handles-status-codes/"><meta property="og:image" content="https://ieftimov.com/cards/how-rails-handles-status-codes.png"><meta property="article:section" content="posts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ieftimov.com/cards/how-rails-handles-status-codes.png"><meta name=twitter:title content="How Rails handles status codes"><meta name=twitter:description content="Recently, I have been building an API as part of my day job. Rails is a great framework to build APIs in, and it has been a joy so far. When building the responses of the API, it&rsquo;s paramount to understand what HTTP statuses you should utilize, which will in return help the consumers by providing more meaningful responses.
Sure, you could always have a status property in the response JSON, which will be a human-readable status code."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ieftimov.com/posts/"},{"@type":"ListItem","position":2,"name":"How Rails handles status codes","item":"https://ieftimov.com/post/how-rails-handles-status-codes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How Rails handles status codes","name":"How Rails handles status codes","description":"Recently, I have been building an API as part of my day job. Rails is a great framework to build APIs in, and it has been a joy so far. When building the responses of the API, it\u0026rsquo;s paramount to understand what HTTP statuses you should utilize, which will in return help the consumers by providing more meaningful responses.\nSure, you could always have a status property in the response JSON, which will be a human-readable status code.","keywords":["status","codes","http"],"articleBody":"Recently, I have been building an API as part of my day job. Rails is a great framework to build APIs in, and it has been a joy so far. When building the responses of the API, it’s paramount to understand what HTTP statuses you should utilize, which will in return help the consumers by providing more meaningful responses.\nSure, you could always have a status property in the response JSON, which will be a human-readable status code. But, I would like you to think about HTTP status codes as a nice card on a present, with your beautiful handwriting and best wishes to whom the gift goes to. HTTP status code don’t just add more semantical correctness, but they also speak about the nature of the response.\nRails and statuses Ruby on Rails, being a great framework, adds a very nice layer of abstraction of the status codes, and allows the developers to easily use custom status codes in their responses. I am sure, at some point you have seen something like:\nrender json: @resource, status: 201 # Created While this might be sometimes redundant, the render method in Rails allows you to specify HTTP status codes for the response. But also, being very developer friendly, Rails allows you to do the same with “human readable” status codes:\nrender json: @resource, status: :created The two code samples are identical, they specify the HTTP 201 status code to the response. But, what are the available Rails status codes (as symbols) that you can use? And how does Rails actually do this?\nStatus codes The HTTP status codes list is a quite stable and static list. Although sometimes status codes are added to the list, once you learn it, keeping up to date is rather easy. The latest addition to this list is HTTP 451 - Unavailable For Legal Reasons. You can see the RFC where it was proposed here.\nSo, how does Rails knows how to create all of these symbols, so we can use them in our render methods? Well, what’s very interesting is that Rails actually doesn’t do much about this. It relies on Rack, which does all of this magic. In an irb session, type:\n Rack::Utils::HTTP_STATUS_CODES {100=\"Continue\", 101=\"Switching Protocols\", 102=\"Processing\", 200=\"OK\", 201=\"Created\", 202=\"Accepted\", 203=\"Non-Authoritative Information\", 204=\"No Content\", 205=\"Reset Content\", 206=\"Partial Content\", 207=\"Multi-Status\", 208=\"Already Reported\", 226=\"IM Used\", 300=\"Multiple Choices\", 301=\"Moved Permanently\", 302=\"Found\", 303=\"See Other\", 304=\"Not Modified\", 305=\"Use Proxy\", 307=\"Temporary Redirect\", 308=\"Permanent Redirect\", 400=\"Bad Request\", 401=\"Unauthorized\", 402=\"Payment Required\", 403=\"Forbidden\", 404=\"Not Found\", 405=\"Method Not Allowed\", 406=\"Not Acceptable\", 407=\"Proxy Authentication Required\", 408=\"Request Timeout\", 409=\"Conflict\", 410=\"Gone\", 411=\"Length Required\", 412=\"Precondition Failed\", 413=\"Payload Too Large\", 414=\"URI Too Long\", 415=\"Unsupported Media Type\", 416=\"Range Not Satisfiable\", 417=\"Expectation Failed\", 422=\"Unprocessable Entity\", 423=\"Locked\", 424=\"Failed Dependency\", 426=\"Upgrade Required\", 428=\"Precondition Required\", 429=\"Too Many Requests\", 431=\"Request Header Fields Too Large\", 500=\"Internal Server Error\", 501=\"Not Implemented\", 502=\"Bad Gateway\", 503=\"Service Unavailable\", 504=\"Gateway Timeout\", 505=\"HTTP Version Not Supported\", 506=\"Variant Also Negotiates\", 507=\"Insufficient Storage\", 508=\"Loop Detected\", 510=\"Not Extended\", 511=\"Network Authentication Required\"} As you can see, the Rack::Utils::HTTP_STATUS_CODES is a Hash that has all of the HTTP status codes, with the corresponding messages. If you open the Rack::Utils documentation you can see how these are programmatically created, including the code that does the conversion. The status codes are pulled from this CSV file and are parsed using this piece of code:\nruby -ne 'm = /^(\\d{3}),(?!Unassigned|\\(Unused\\))([^,]+)/.match($_) and puts \"#{m[1]} = \\x27#{m[2].strip}\\x27,\"' Great. But, how do we get the symbolized versions of the status messages? Well, Rack does that for us as well. In an irb session, try this:\n Rack::Utils::SYMBOL_TO_STATUS_CODE {:continue=100, :switching_protocols=101, :processing=102, :ok=200, :created=201, :accepted=202, :non_authoritative_information=203, :no_content=204, :reset_content=205, :partial_content=206, :multi_status=207, :already_reported=208, :im_used=226, :multiple_choices=300, :moved_permanently=301, :found=302, :see_other=303, :not_modified=304, :use_proxy=305, :temporary_redirect=307, :permanent_redirect=308, :bad_request=400, :unauthorized=401, :payment_required=402, :forbidden=403, :not_found=404, :method_not_allowed=405, :not_acceptable=406, :proxy_authentication_required=407, :request_timeout=408, :conflict=409, :gone=410, :length_required=411, :precondition_failed=412, :payload_too_large=413, :uri_too_long=414, :unsupported_media_type=415, :range_not_satisfiable=416, :expectation_failed=417, :unprocessable_entity=422, :locked=423, :failed_dependency=424, :upgrade_required=426, :precondition_required=428, :too_many_requests=429, :request_header_fields_too_large=431, :internal_server_error=500, :not_implemented=501, :bad_gateway=502, :service_unavailable=503, :gateway_timeout=504, :http_version_not_supported=505, :variant_also_negotiates=506, :insufficient_storage=507, :loop_detected=508, :not_extended=510, :network_authentication_required=511} As you can see, the Rack::Utils::SYMBOL_TO_STATUS_CODE constant contains all of the status codes as symbols. The documentation also shows the actual conversion, from HTTP_STATUS_CODES to SYMBOL_TO_STATUS_CODE:\nHash[*HTTP_STATUS_CODES.map { |code, message| [message.downcase.gsub(/\\s|-|'/, '_').to_sym, code] }.flatten] Having all of this documentation in place, is rather easy to see how everything falls into place. Rails being a Rack app, can utilize everything that Rack provides, and this is just an example. But, how does Rails actually plugs this into its runtime and has the ability to understand what is the status code?\nA bit deeper Rails' source code, although very well documented and well structured, can still be overwhelming to someone that hasn’t spent enough time digging through. If you are a Ruby developer, I encourage you to spend some time around Rails' code - you will learn a lot, I promise you!\nSo, how does Rails know what status code to apply to the response, if you provide just the symbolized version on the status? Well, let’s start with Rails' class hierarchy, which is quite nice.\nOn the surface, or what we usually see as developers, the rendering is done in the controllers. If you open any of your applications' ApplicationController, you will see something like:\nclass ApplicationController  ActionController::Base ... end This means that all of our controllers are subclasses of the ActionController::Base class. If you open the source code of the ActionController::Base class, you will see some very interesting things, that can be quite informative. But for our use case, we are interested in the following:\nMODULES = [ AbstractController::Rendering, AbstractController::Translation, AbstractController::AssetPaths, Helpers, UrlFor, Redirecting, ActionView::Layouts, Rendering, Renderers::All, ConditionalGet, EtagWithTemplateDigest, Caching, MimeResponds, ImplicitRender, StrongParameters, Cookies, Flash, FormBuilder, RequestForgeryProtection, ForceSSL, Streaming, DataStreaming, HttpAuthentication::Basic::ControllerMethods, HttpAuthentication::Digest::ControllerMethods, HttpAuthentication::Token::ControllerMethods, # Before callbacks should also be executed the earliest as possible, so # also include them at the bottom. AbstractController::Callbacks, # Append rescue at the bottom to wrap as much as possible. Rescue, # Add instrumentations hooks at the bottom, to ensure they instrument # all the methods properly. Instrumentation, # Params wrapper should come before instrumentation so they are # properly showed in logs ParamsWrapper ] MODULES.each do |mod| include mod end This piece of code, actually includes all of these modules in the ActionController::Base class, which in return gives us all of the functionlities that our controllers have. Just look at the module names, like Redirecting, ActionView::Layouts, Rendering, Cookies, Flash and so on. Very self-explanatory, right?\nWell, the classes that we are interested in are AbstractController::Rendering and ActionController::Rendering. The first one is an abstract class, kind of like an interface, and the second one is the default implementation class, which contains all of the rendering mechanisms that Rails uses to render your response. When we call render in our controllers, we are executing the ActionController::Rendering#render method, which does couple of things for us: it normalizes the arguments, the options and then builds the body of the response. When it normalizes the arguments, deep inside the _normalize_render method, it contains these lines of code:\nif options[:status] options[:status] = Rack::Utils.status_code(options[:status]) end This piece of code, takes the :status option from our render call, and translates the symbol to an actual HTTP code. If we go back to Rack::Utils documentation, we can see the actual implementation of the status_code method:\n# File 'lib/rack/utils.rb', line 573 def status_code(status) if status.is_a?(Symbol) SYMBOL_TO_STATUS_CODE[status] || 500 else status.to_i end end Here’s how your status: :created gets translated to a status: 201. As you can see, although Rails' source is sometimes hard to digest, it’s very well done and navigating through it is not that hard.\nWhat about exceptions? So now we know how Rails does the expected rendering, which was created by us, developers. But, what happens when Rails hits an exception of some sort, but it still has to recover from it and return a proper HTTP status code to the client?\nAlthough at first you might expect some sort of a rescue block in ActionController::Metal class, this is not the case. Open any Rails app you have on your computer, and run in it’s root directory:\n➜ rake middleware use Rack::Sendfile use ActionDispatch::Static use ActionDispatch::LoadInterlock use ActiveSupport::Cache::Strategy::LocalCache::Middleware use Rack::Runtime use ActionDispatch::RequestId use Rails::Rack::Logger *use ActionDispatch::ShowExceptions* use ActionDispatch::DebugExceptions use ActionDispatch::RemoteIp use ActionDispatch::Reloader use ActionDispatch::Callbacks use ActiveRecord::Migration::CheckPending use ActiveRecord::ConnectionAdapters::ConnectionManagement use ActiveRecord::QueryCache use Rack::Head use Rack::ConditionalGet use Rack::ETag use ActionView::Digestor::PerRequestDigestCacheExpiry run YourApp::Application.routes Actually, the exceptions are handled in Rails' middleware, more specifically in the ActionDispatch::ShowExceptions middleware class. It wraps a group of exceptions and maps them to a specific status code. This is the code that does the mapping:\nmodule ActionDispatch class ExceptionWrapper cattr_accessor :rescue_responses @@rescue_responses = Hash.new(:internal_server_error) @@rescue_responses.merge!( 'ActionController::RoutingError' = :not_found, 'AbstractController::ActionNotFound' = :not_found, 'ActionController::MethodNotAllowed' = :method_not_allowed, 'ActionController::UnknownHttpMethod' = :method_not_allowed, 'ActionController::NotImplemented' = :not_implemented, 'ActionController::UnknownFormat' = :not_acceptable, 'ActionController::InvalidAuthenticityToken' = :unprocessable_entity, 'ActionController::InvalidCrossOriginRequest' = :unprocessable_entity, 'ActionDispatch::ParamsParser::ParseError' = :bad_request, 'ActionController::BadRequest' = :bad_request, 'ActionController::ParameterMissing' = :bad_request, 'Rack::Utils::ParameterTypeError' = :bad_request, 'Rack::Utils::InvalidParameterError' = :bad_request ) ... end end All of the exceptions that can occur in the request/response lifecycle are mapped to a specific status code, which will be returned by the middleware if an exception is rescued. You can see this functionality in ActionDispatch::ShowExceptions#call method, which invokes the render_exception method if an Exception is rescued:\ndef call(env) request = ActionDispatch::Request.new env @app.call(env) rescue Exception = exception if request.show_exceptions? render_exception(request, exception) else raise exception end end def render_exception(request, exception) backtrace_cleaner = request.get_header 'action_dispatch.backtrace_cleaner' wrapper = ExceptionWrapper.new(backtrace_cleaner, exception) status = wrapper.status_code request.set_header \"action_dispatch.exception\", wrapper.exception request.set_header \"action_dispatch.original_path\", request.path_info request.path_info = \"/#{status}\" response = @exceptions_app.call(request.env) response[1]['X-Cascade'] == 'pass' ? pass_response(status) : response rescue Exception = failsafe_error $stderr.puts \"Error during failsafe response: #{failsafe_error}\\n#{failsafe_error.backtrace * \"\\n\"}\" FAILSAFE_RESPONSE end Now, when the exception is being rendered, the ExceptionWrapper comes into the picture. It will wrap the exception, and return an appropriate status code, which is translated from the symbolized variant, to the number version, using:\ndef status_code self.class.status_code_for_exception(@exception.class.name) end The status_code method invokes the status_code_for_exception method, which converts the status code:\ndef self.status_code_for_exception(class_name) Rack::Utils.status_code(@@rescue_responses[class_name]) end And that’s about it. After that, the middleware stack is being executed in order to return the new response, with the exception and the proper HTTP status code attached.\nAfter all Although all of this Rails “magic” might be a bit much to digest at first, Rails' source code does quite a good job of explaining what is going on. And as you can see, there’s always something more than meets the eye. If you need to remember anything from this blogpost is that Rails does a very good (and interesting) job at handling HTTP status codes, to make your app’s responses semantically correct and client friendly.\nIf you got to this point - thanks so much for reading. I know it was a bit of a long journey, and I hope it was informative for you. Looking forward to reading your comments!\nLiked this article? Subscribe to my newsletter and get future articles in your inbox. It's a short and sweet read, going out to +1000 of other engineers.\n    ","wordCount":"1793","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Ilija"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ieftimov.com/post/how-rails-handles-status-codes/"},"publisher":{"@type":"Organization","name":"Ilija Eftimov ⚡️","logo":{"@type":"ImageObject","url":"https://ieftimov.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://ieftimov.com/ accesskey=h title="Ilija Eftimov ⚡️ (Alt + H)">Ilija Eftimov ⚡️</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://ieftimov.com/ title=About><span>About</span></a></li><li><a href=https://ieftimov.com/posts title=Writing><span>Writing</span></a></li><li><a href=https://ieftimov.com/newsletter title=Newsletter><span>Newsletter</span></a></li><li><a href=https://forms.gle/orfXK5jh1LRaiFzo8 title="Suggest a topic"><span>Suggest a topic</span></a></li><li><a href=https://www.buymeacoffee.com/ieftimov title="Buy me a ☕"><span>Buy me a ☕</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How Rails handles status codes</h1><div class=post-meta>May 27, 2016&nbsp;·&nbsp;9 min&nbsp;·&nbsp;Ilija</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#rails-and-statuses aria-label="Rails and statuses">Rails and statuses</a></li><li><a href=#status-codes aria-label="Status codes">Status codes</a></li><li><a href=#a-bit-deeper aria-label="A bit deeper">A bit deeper</a></li><li><a href=#what-about-exceptions aria-label="What about exceptions?">What about exceptions?</a></li><li><a href=#after-all aria-label="After all">After all</a></li></ul></div></details></div><div class=post-content><p>Recently, I have been building an API as part of my day job. Rails is a great
framework to build APIs in, and it has been a joy so far. When building the
responses of the API, it&rsquo;s paramount to understand what HTTP statuses you
should utilize, which will in return help the consumers by providing more
meaningful responses.</p><p>Sure, you could always have a <code>status</code> property in the response JSON, which
will be a human-readable status code. But, I would like you to think about HTTP
status codes as a nice card on a present, with your beautiful handwriting and
best wishes to whom the gift goes to. HTTP status code don&rsquo;t just add more
semantical correctness, but they also speak about the nature of the response.</p><h2 id=rails-and-statuses>Rails and statuses<a hidden class=anchor aria-hidden=true href=#rails-and-statuses>#</a></h2><p>Ruby on Rails, being a great framework, adds a very nice layer of abstraction
of the status codes, and allows the developers to easily use custom status
codes in their responses. I am sure, at some point you have seen something
like:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>render <span style=color:#2aa198>json</span>: @resource, <span style=color:#2aa198>status</span>: <span style=color:#2aa198>201</span> <span style=color:#586e75># Created</span></code></pre></div><p>While this might be sometimes redundant, the <code>render</code> method in Rails allows
you to specify HTTP status codes for the response. But also, being very
developer friendly, Rails allows you to do the same with &ldquo;human readable&rdquo;
status codes:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>render <span style=color:#2aa198>json</span>: @resource, <span style=color:#2aa198>status</span>: <span style=color:#2aa198>:created</span></code></pre></div><p>The two code samples are identical, they specify the HTTP 201 status code to
the response. But, what are the available Rails status codes (as symbols) that
you can use? And how does Rails actually do this?</p><h2 id=status-codes>Status codes<a hidden class=anchor aria-hidden=true href=#status-codes>#</a></h2><p>The HTTP status codes list is a quite stable and static list. Although
sometimes status codes are added to the list, once you learn it, keeping up to
date is rather easy. The latest addition to this list is HTTP 451 - Unavailable
For Legal Reasons. You can see the RFC where it was proposed
<a href=http://tools.ietf.org/html/rfc7725>here</a>.</p><p>So, how does Rails knows how to create all of these symbols, so we can use them
in our <code>render</code> methods? Well, what&rsquo;s very interesting is that Rails actually
doesn&rsquo;t do much about this. It relies on Rack, which does all of this magic. In
an <code>irb</code> session, type:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>&gt;&gt;</span> <span style=color:#cb4b16>Rack</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Utils</span><span style=color:#719e07>::</span><span style=color:#cb4b16>HTTP_STATUS_CODES</span>

{<span style=color:#2aa198>100</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Continue&#34;</span>,
 <span style=color:#2aa198>101</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Switching Protocols&#34;</span>,
 <span style=color:#2aa198>102</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Processing&#34;</span>,
 <span style=color:#2aa198>200</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;OK&#34;</span>,
 <span style=color:#2aa198>201</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Created&#34;</span>,
 <span style=color:#2aa198>202</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Accepted&#34;</span>,
 <span style=color:#2aa198>203</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Non-Authoritative Information&#34;</span>,
 <span style=color:#2aa198>204</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;No Content&#34;</span>,
 <span style=color:#2aa198>205</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Reset Content&#34;</span>,
 <span style=color:#2aa198>206</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Partial Content&#34;</span>,
 <span style=color:#2aa198>207</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Multi-Status&#34;</span>,
 <span style=color:#2aa198>208</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Already Reported&#34;</span>,
 <span style=color:#2aa198>226</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;IM Used&#34;</span>,
 <span style=color:#2aa198>300</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Multiple Choices&#34;</span>,
 <span style=color:#2aa198>301</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Moved Permanently&#34;</span>,
 <span style=color:#2aa198>302</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Found&#34;</span>,
 <span style=color:#2aa198>303</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;See Other&#34;</span>,
 <span style=color:#2aa198>304</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Not Modified&#34;</span>,
 <span style=color:#2aa198>305</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Use Proxy&#34;</span>,
 <span style=color:#2aa198>307</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Temporary Redirect&#34;</span>,
 <span style=color:#2aa198>308</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Permanent Redirect&#34;</span>,
 <span style=color:#2aa198>400</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Bad Request&#34;</span>,
 <span style=color:#2aa198>401</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Unauthorized&#34;</span>,
 <span style=color:#2aa198>402</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Payment Required&#34;</span>,
 <span style=color:#2aa198>403</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Forbidden&#34;</span>,
 <span style=color:#2aa198>404</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Not Found&#34;</span>,
 <span style=color:#2aa198>405</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Method Not Allowed&#34;</span>,
 <span style=color:#2aa198>406</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Not Acceptable&#34;</span>,
 <span style=color:#2aa198>407</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Proxy Authentication Required&#34;</span>,
 <span style=color:#2aa198>408</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Request Timeout&#34;</span>,
 <span style=color:#2aa198>409</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Conflict&#34;</span>,
 <span style=color:#2aa198>410</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Gone&#34;</span>,
 <span style=color:#2aa198>411</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Length Required&#34;</span>,
 <span style=color:#2aa198>412</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Precondition Failed&#34;</span>,
 <span style=color:#2aa198>413</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Payload Too Large&#34;</span>,
 <span style=color:#2aa198>414</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;URI Too Long&#34;</span>,
 <span style=color:#2aa198>415</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Unsupported Media Type&#34;</span>,
 <span style=color:#2aa198>416</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Range Not Satisfiable&#34;</span>,
 <span style=color:#2aa198>417</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Expectation Failed&#34;</span>,
 <span style=color:#2aa198>422</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Unprocessable Entity&#34;</span>,
 <span style=color:#2aa198>423</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Locked&#34;</span>,
 <span style=color:#2aa198>424</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Failed Dependency&#34;</span>,
 <span style=color:#2aa198>426</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Upgrade Required&#34;</span>,
 <span style=color:#2aa198>428</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Precondition Required&#34;</span>,
 <span style=color:#2aa198>429</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Too Many Requests&#34;</span>,
 <span style=color:#2aa198>431</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Request Header Fields Too Large&#34;</span>,
 <span style=color:#2aa198>500</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Internal Server Error&#34;</span>,
 <span style=color:#2aa198>501</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Not Implemented&#34;</span>,
 <span style=color:#2aa198>502</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Bad Gateway&#34;</span>,
 <span style=color:#2aa198>503</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Service Unavailable&#34;</span>,
 <span style=color:#2aa198>504</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Gateway Timeout&#34;</span>,
 <span style=color:#2aa198>505</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;HTTP Version Not Supported&#34;</span>,
 <span style=color:#2aa198>506</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Variant Also Negotiates&#34;</span>,
 <span style=color:#2aa198>507</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Insufficient Storage&#34;</span>,
 <span style=color:#2aa198>508</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Loop Detected&#34;</span>,
 <span style=color:#2aa198>510</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Not Extended&#34;</span>,
 <span style=color:#2aa198>511</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>&#34;Network Authentication Required&#34;</span>}</code></pre></div><p>As you can see, the <code>Rack::Utils::HTTP_STATUS_CODES</code> is a Hash that has all of
the HTTP status codes, with the corresponding messages. If you open the
<code>Rack::Utils</code>
<a href=http://www.rubydoc.info/github/rack/rack/master/Rack/Utils#HTTP_STATUS_CODES-constant>documentation</a>
you can see how these are programmatically created, including the code that
does the conversion. The status codes are pulled from
<a href=www.iana.org/assignments/http-status-codes/http-status-codes-1.csv>this CSV file</a>
and are parsed using this piece of code:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>ruby <span style=color:#719e07>-</span>ne <span style=color:#2aa198>&#39;m = /^(\d{3}),(?!Unassigned|\(Unused\))([^,]+)/.match($_) and puts &#34;#{m[1]} =&gt; \x27#{m[2].strip}\x27,&#34;&#39;</span></code></pre></div><p>Great. But, how do we get the symbolized versions of the status messages? Well,
Rack does that for us as well. In an <code>irb</code> session, try this:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>&gt;&gt;</span> <span style=color:#cb4b16>Rack</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Utils</span><span style=color:#719e07>::</span><span style=color:#cb4b16>SYMBOL_TO_STATUS_CODE</span>
{<span style=color:#2aa198>:continue</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>100</span>,
 <span style=color:#2aa198>:switching_protocols</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>101</span>,
 <span style=color:#2aa198>:processing</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>102</span>,
 <span style=color:#2aa198>:ok</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>200</span>,
 <span style=color:#2aa198>:created</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>201</span>,
 <span style=color:#2aa198>:accepted</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>202</span>,
 <span style=color:#2aa198>:non_authoritative_information</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>203</span>,
 <span style=color:#2aa198>:no_content</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>204</span>,
 <span style=color:#2aa198>:reset_content</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>205</span>,
 <span style=color:#2aa198>:partial_content</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>206</span>,
 <span style=color:#2aa198>:multi_status</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>207</span>,
 <span style=color:#2aa198>:already_reported</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>208</span>,
 <span style=color:#2aa198>:im_used</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>226</span>,
 <span style=color:#2aa198>:multiple_choices</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>300</span>,
 <span style=color:#2aa198>:moved_permanently</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>301</span>,
 <span style=color:#2aa198>:found</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>302</span>,
 <span style=color:#2aa198>:see_other</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>303</span>,
 <span style=color:#2aa198>:not_modified</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>304</span>,
 <span style=color:#2aa198>:use_proxy</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>305</span>,
 <span style=color:#2aa198>:temporary_redirect</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>307</span>,
 <span style=color:#2aa198>:permanent_redirect</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>308</span>,
 <span style=color:#2aa198>:bad_request</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>400</span>,
 <span style=color:#2aa198>:unauthorized</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>401</span>,
 <span style=color:#2aa198>:payment_required</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>402</span>,
 <span style=color:#2aa198>:forbidden</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>403</span>,
 <span style=color:#2aa198>:not_found</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>404</span>,
 <span style=color:#2aa198>:method_not_allowed</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>405</span>,
 <span style=color:#2aa198>:not_acceptable</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>406</span>,
 <span style=color:#2aa198>:proxy_authentication_required</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>407</span>,
 <span style=color:#2aa198>:request_timeout</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>408</span>,
 <span style=color:#2aa198>:conflict</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>409</span>,
 <span style=color:#2aa198>:gone</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>410</span>,
 <span style=color:#2aa198>:length_required</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>411</span>,
 <span style=color:#2aa198>:precondition_failed</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>412</span>,
 <span style=color:#2aa198>:payload_too_large</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>413</span>,
 <span style=color:#2aa198>:uri_too_long</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>414</span>,
 <span style=color:#2aa198>:unsupported_media_type</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>415</span>,
 <span style=color:#2aa198>:range_not_satisfiable</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>416</span>,
 <span style=color:#2aa198>:expectation_failed</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>417</span>,
 <span style=color:#2aa198>:unprocessable_entity</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>422</span>,
 <span style=color:#2aa198>:locked</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>423</span>,
 <span style=color:#2aa198>:failed_dependency</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>424</span>,
 <span style=color:#2aa198>:upgrade_required</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>426</span>,
 <span style=color:#2aa198>:precondition_required</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>428</span>,
 <span style=color:#2aa198>:too_many_requests</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>429</span>,
 <span style=color:#2aa198>:request_header_fields_too_large</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>431</span>,
 <span style=color:#2aa198>:internal_server_error</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>500</span>,
 <span style=color:#2aa198>:not_implemented</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>501</span>,
 <span style=color:#2aa198>:bad_gateway</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>502</span>,
 <span style=color:#2aa198>:service_unavailable</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>503</span>,
 <span style=color:#2aa198>:gateway_timeout</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>504</span>,
 <span style=color:#2aa198>:http_version_not_supported</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>505</span>,
 <span style=color:#2aa198>:variant_also_negotiates</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>506</span>,
 <span style=color:#2aa198>:insufficient_storage</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>507</span>,
 <span style=color:#2aa198>:loop_detected</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>508</span>,
 <span style=color:#2aa198>:not_extended</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>510</span>,
 <span style=color:#2aa198>:network_authentication_required</span><span style=color:#719e07>=&gt;</span><span style=color:#2aa198>511</span>}</code></pre></div><p>As you can see, the <code>Rack::Utils::SYMBOL_TO_STATUS_CODE</code> constant contains all
of the status codes as symbols. The
<a href=http://www.rubydoc.info/github/rack/rack/master/Rack/Utils#SYMBOL_TO_STATUS_CODE-constant>documentation</a>
also shows the actual conversion, from <code>HTTP_STATUS_CODES</code> to
<code>SYMBOL_TO_STATUS_CODE</code>:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#cb4b16>Hash</span><span style=color:#719e07>[*</span><span style=color:#cb4b16>HTTP_STATUS_CODES</span><span style=color:#719e07>.</span>map { <span style=color:#719e07>|</span>code, message<span style=color:#719e07>|</span>
  <span style=color:#719e07>[</span>message<span style=color:#719e07>.</span>downcase<span style=color:#719e07>.</span>gsub(<span style=color:#dc322f>/\s|-|&#39;/</span>, <span style=color:#2aa198>&#39;_&#39;</span>)<span style=color:#719e07>.</span>to_sym, code<span style=color:#719e07>]</span>
}<span style=color:#719e07>.</span>flatten<span style=color:#719e07>]</span></code></pre></div><p>Having all of this documentation in place, is rather easy to see how everything
falls into place. Rails being a Rack app, can utilize everything that Rack
provides, and this is just an example. But, how does Rails actually plugs this
into its runtime and has the ability to understand what is the status code?</p><h2 id=a-bit-deeper>A bit deeper<a hidden class=anchor aria-hidden=true href=#a-bit-deeper>#</a></h2><p>Rails' source code, although very well documented and well structured, can still be
overwhelming to someone that hasn&rsquo;t spent enough time digging through. If you are
a Ruby developer, I encourage you to spend some time around Rails' code - you
will learn a lot, I promise you!</p><p>So, how does Rails know what status code to apply to the response, if you provide
just the symbolized version on the status? Well, let&rsquo;s start with Rails' class
hierarchy, which is quite nice.</p><p>On the surface, or what we usually see as developers, the rendering is done in
the controllers. If you open any of your applications' <code>ApplicationController</code>,
you will see something like:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>class</span> <span style=color:#268bd2>ApplicationController</span> <span style=color:#719e07>&lt;</span> <span style=color:#cb4b16>ActionController</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Base</span>
  <span style=color:#719e07>...</span>
<span style=color:#719e07>end</span></code></pre></div><p>This means that all of our controllers are subclasses of the
<code>ActionController::Base</code> class. If you open the
<a href=https://github.com/rails/rails/blob/52ce6ece8c8f74064bb64e0a0b1ddd83092718e1/actionpack/lib/action_controller/base.rb>source code</a>
of the <code>ActionController::Base</code> class, you will see some very interesting things,
that can be quite informative. But for our use case, we are interested in the
following:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#cb4b16>MODULES</span> <span style=color:#719e07>=</span> <span style=color:#719e07>[</span>
  <span style=color:#cb4b16>AbstractController</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Rendering</span>,
  <span style=color:#cb4b16>AbstractController</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Translation</span>,
  <span style=color:#cb4b16>AbstractController</span><span style=color:#719e07>::</span><span style=color:#cb4b16>AssetPaths</span>,

  <span style=color:#cb4b16>Helpers</span>,
  <span style=color:#cb4b16>UrlFor</span>,
  <span style=color:#cb4b16>Redirecting</span>,
  <span style=color:#cb4b16>ActionView</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Layouts</span>,
  <span style=color:#cb4b16>Rendering</span>,
  <span style=color:#cb4b16>Renderers</span><span style=color:#719e07>::</span><span style=color:#cb4b16>All</span>,
  <span style=color:#cb4b16>ConditionalGet</span>,
  <span style=color:#cb4b16>EtagWithTemplateDigest</span>,
  <span style=color:#cb4b16>Caching</span>,
  <span style=color:#cb4b16>MimeResponds</span>,
  <span style=color:#cb4b16>ImplicitRender</span>,
  <span style=color:#cb4b16>StrongParameters</span>,

  <span style=color:#cb4b16>Cookies</span>,
  <span style=color:#cb4b16>Flash</span>,
  <span style=color:#cb4b16>FormBuilder</span>,
  <span style=color:#cb4b16>RequestForgeryProtection</span>,
  <span style=color:#cb4b16>ForceSSL</span>,
  <span style=color:#cb4b16>Streaming</span>,
  <span style=color:#cb4b16>DataStreaming</span>,
  <span style=color:#cb4b16>HttpAuthentication</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Basic</span><span style=color:#719e07>::</span><span style=color:#cb4b16>ControllerMethods</span>,
  <span style=color:#cb4b16>HttpAuthentication</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Digest</span><span style=color:#719e07>::</span><span style=color:#cb4b16>ControllerMethods</span>,
  <span style=color:#cb4b16>HttpAuthentication</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Token</span><span style=color:#719e07>::</span><span style=color:#cb4b16>ControllerMethods</span>,

  <span style=color:#586e75># Before callbacks should also be executed the earliest as possible, so</span>
  <span style=color:#586e75># also include them at the bottom.</span>
  <span style=color:#cb4b16>AbstractController</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Callbacks</span>,

  <span style=color:#586e75># Append rescue at the bottom to wrap as much as possible.</span>
  <span style=color:#cb4b16>Rescue</span>,

  <span style=color:#586e75># Add instrumentations hooks at the bottom, to ensure they instrument</span>
  <span style=color:#586e75># all the methods properly.</span>
  <span style=color:#cb4b16>Instrumentation</span>,

  <span style=color:#586e75># Params wrapper should come before instrumentation so they are</span>
  <span style=color:#586e75># properly showed in logs</span>
  <span style=color:#cb4b16>ParamsWrapper</span>
<span style=color:#719e07>]</span>

<span style=color:#cb4b16>MODULES</span><span style=color:#719e07>.</span>each <span style=color:#719e07>do</span> <span style=color:#719e07>|</span>mod<span style=color:#719e07>|</span>
  <span style=color:#719e07>include</span> mod
<span style=color:#719e07>end</span></code></pre></div><p>This piece of code, actually includes all of these modules in the
<code>ActionController::Base</code> class, which in return gives us all of the
functionlities that our controllers have. Just look at the module names, like
<code>Redirecting</code>, <code>ActionView::Layouts</code>, <code>Rendering</code>, <code>Cookies</code>, <code>Flash</code> and so on.
Very self-explanatory, right?</p><p>Well, the classes that we are interested in are <code>AbstractController::Rendering</code>
and <code>ActionController::Rendering</code>. The first one is an abstract class, kind of
like an interface, and the second one is the default implementation class, which
contains all of the rendering mechanisms that Rails uses to render your response.
When we call <code>render</code> in our controllers, we are executing the
<code>ActionController::Rendering#render</code> method, which does couple of things for us:
it normalizes the arguments, the options and then builds the body of the response.
When it normalizes the arguments, deep inside the <code>_normalize_render</code> method, it
contains these lines of code:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>if</span> options<span style=color:#719e07>[</span><span style=color:#2aa198>:status</span><span style=color:#719e07>]</span>
  options<span style=color:#719e07>[</span><span style=color:#2aa198>:status</span><span style=color:#719e07>]</span> <span style=color:#719e07>=</span> <span style=color:#cb4b16>Rack</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Utils</span><span style=color:#719e07>.</span>status_code(options<span style=color:#719e07>[</span><span style=color:#2aa198>:status</span><span style=color:#719e07>]</span>)
<span style=color:#719e07>end</span></code></pre></div><p>This piece of code, takes the <code>:status</code> option from our render call, and
translates the symbol to an actual HTTP code. If we go back to <code>Rack::Utils</code>
documentation, we can see the actual implementation of the <code>status_code</code> method:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#586e75># File &#39;lib/rack/utils.rb&#39;, line 573</span>

<span style=color:#719e07>def</span> <span style=color:#268bd2>status_code</span>(status)
  <span style=color:#719e07>if</span> status<span style=color:#719e07>.</span>is_a?(<span style=color:#cb4b16>Symbol</span>)
    <span style=color:#cb4b16>SYMBOL_TO_STATUS_CODE</span><span style=color:#719e07>[</span>status<span style=color:#719e07>]</span> <span style=color:#719e07>||</span> <span style=color:#2aa198>500</span>
  <span style=color:#719e07>else</span>
    status<span style=color:#719e07>.</span>to_i
  <span style=color:#719e07>end</span>
<span style=color:#719e07>end</span></code></pre></div><p>Here&rsquo;s how your <code>status: :created</code> gets translated to a <code>status: 201</code>. As you
can see, although Rails' source is sometimes hard to digest, it&rsquo;s very well
done and navigating through it is not that hard.</p><h2 id=what-about-exceptions>What about exceptions?<a hidden class=anchor aria-hidden=true href=#what-about-exceptions>#</a></h2><p>So now we know how Rails does the expected rendering, which was created by us,
developers. But, what happens when Rails hits an exception of some sort, but it
still has to recover from it and return a proper HTTP status code to the client?</p><p>Although at first you might expect some sort of a <code>rescue</code> block in
<code>ActionController::Metal</code> class, this is not the case. Open any Rails app you
have on your computer, and run in it&rsquo;s root directory:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>➜  rake middleware

use Rack::Sendfile
use ActionDispatch::Static
use ActionDispatch::LoadInterlock
use ActiveSupport::Cache::Strategy::LocalCache::Middleware
use Rack::Runtime
use ActionDispatch::RequestId
use Rails::Rack::Logger
*use ActionDispatch::ShowExceptions*
use ActionDispatch::DebugExceptions
use ActionDispatch::RemoteIp
use ActionDispatch::Reloader
use ActionDispatch::Callbacks
use ActiveRecord::Migration::CheckPending
use ActiveRecord::ConnectionAdapters::ConnectionManagement
use ActiveRecord::QueryCache
use Rack::Head
use Rack::ConditionalGet
use Rack::ETag
use ActionView::Digestor::PerRequestDigestCacheExpiry
run YourApp::Application.routes</code></pre></div><p>Actually, the exceptions are handled in Rails' middleware, more specifically in
the <code>ActionDispatch::ShowExceptions</code> middleware class. It wraps a group of
exceptions and maps them to a specific status code. This is the code that does
the mapping:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>module</span> ActionDispatch
  <span style=color:#719e07>class</span> <span style=color:#268bd2>ExceptionWrapper</span>
    cattr_accessor <span style=color:#2aa198>:rescue_responses</span>
    @@rescue_responses <span style=color:#719e07>=</span> <span style=color:#cb4b16>Hash</span><span style=color:#719e07>.</span>new(<span style=color:#2aa198>:internal_server_error</span>)
    @@rescue_responses<span style=color:#719e07>.</span>merge!(
      <span style=color:#2aa198>&#39;ActionController::RoutingError&#39;</span>              <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:not_found</span>,
      <span style=color:#2aa198>&#39;AbstractController::ActionNotFound&#39;</span>          <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:not_found</span>,
      <span style=color:#2aa198>&#39;ActionController::MethodNotAllowed&#39;</span>          <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:method_not_allowed</span>,
      <span style=color:#2aa198>&#39;ActionController::UnknownHttpMethod&#39;</span>         <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:method_not_allowed</span>,
      <span style=color:#2aa198>&#39;ActionController::NotImplemented&#39;</span>            <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:not_implemented</span>,
      <span style=color:#2aa198>&#39;ActionController::UnknownFormat&#39;</span>             <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:not_acceptable</span>,
      <span style=color:#2aa198>&#39;ActionController::InvalidAuthenticityToken&#39;</span>  <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:unprocessable_entity</span>,
      <span style=color:#2aa198>&#39;ActionController::InvalidCrossOriginRequest&#39;</span> <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:unprocessable_entity</span>,
      <span style=color:#2aa198>&#39;ActionDispatch::ParamsParser::ParseError&#39;</span>    <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:bad_request</span>,
      <span style=color:#2aa198>&#39;ActionController::BadRequest&#39;</span>                <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:bad_request</span>,
      <span style=color:#2aa198>&#39;ActionController::ParameterMissing&#39;</span>          <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:bad_request</span>,
      <span style=color:#2aa198>&#39;Rack::Utils::ParameterTypeError&#39;</span>             <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:bad_request</span>,
      <span style=color:#2aa198>&#39;Rack::Utils::InvalidParameterError&#39;</span>          <span style=color:#719e07>=&gt;</span> <span style=color:#2aa198>:bad_request</span>
    )
    <span style=color:#719e07>...</span>
  <span style=color:#719e07>end</span>
<span style=color:#719e07>end</span></code></pre></div><p>All of the exceptions that can occur in the request/response lifecycle are mapped
to a specific status code, which will be returned by the middleware if an
exception is rescued. You can see this functionality in
<code>ActionDispatch::ShowExceptions#call</code> method, which invokes the
<code>render_exception</code> method if an <code>Exception</code> is rescued:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>def</span> <span style=color:#268bd2>call</span>(env)
  request <span style=color:#719e07>=</span> <span style=color:#cb4b16>ActionDispatch</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Request</span><span style=color:#719e07>.</span>new env
  @app<span style=color:#719e07>.</span>call(env)
<span style=color:#719e07>rescue</span> <span style=color:#cb4b16>Exception</span> <span style=color:#719e07>=&gt;</span> exception
  <span style=color:#719e07>if</span> request<span style=color:#719e07>.</span>show_exceptions?
    render_exception(request, exception)
  <span style=color:#719e07>else</span>
    <span style=color:#719e07>raise</span> exception
  <span style=color:#719e07>end</span>
<span style=color:#719e07>end</span></code></pre></div><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>def</span> <span style=color:#268bd2>render_exception</span>(request, exception)
  backtrace_cleaner <span style=color:#719e07>=</span> request<span style=color:#719e07>.</span>get_header <span style=color:#2aa198>&#39;action_dispatch.backtrace_cleaner&#39;</span>
  wrapper <span style=color:#719e07>=</span> <span style=color:#cb4b16>ExceptionWrapper</span><span style=color:#719e07>.</span>new(backtrace_cleaner, exception)
  status  <span style=color:#719e07>=</span> wrapper<span style=color:#719e07>.</span>status_code
  request<span style=color:#719e07>.</span>set_header <span style=color:#2aa198>&#34;action_dispatch.exception&#34;</span>, wrapper<span style=color:#719e07>.</span>exception
  request<span style=color:#719e07>.</span>set_header <span style=color:#2aa198>&#34;action_dispatch.original_path&#34;</span>, request<span style=color:#719e07>.</span>path_info
  request<span style=color:#719e07>.</span>path_info <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;/</span><span style=color:#2aa198>#{</span>status<span style=color:#2aa198>}</span><span style=color:#2aa198>&#34;</span>
  response <span style=color:#719e07>=</span> @exceptions_app<span style=color:#719e07>.</span>call(request<span style=color:#719e07>.</span>env)
  response<span style=color:#719e07>[</span><span style=color:#2aa198>1</span><span style=color:#719e07>][</span><span style=color:#2aa198>&#39;X-Cascade&#39;</span><span style=color:#719e07>]</span> <span style=color:#719e07>==</span> <span style=color:#2aa198>&#39;pass&#39;</span> ? pass_response(status) : response
<span style=color:#719e07>rescue</span> <span style=color:#cb4b16>Exception</span> <span style=color:#719e07>=&gt;</span> failsafe_error
  $stderr<span style=color:#719e07>.</span>puts <span style=color:#2aa198>&#34;Error during failsafe response: </span><span style=color:#2aa198>#{</span>failsafe_error<span style=color:#2aa198>}</span><span style=color:#cb4b16>\n</span><span style=color:#2aa198>  </span><span style=color:#2aa198>#{</span>failsafe_error<span style=color:#719e07>.</span>backtrace <span style=color:#719e07>*</span> <span style=color:#2aa198>&#34;</span><span style=color:#cb4b16>\n</span><span style=color:#2aa198>  &#34;</span><span style=color:#2aa198>}</span><span style=color:#2aa198>&#34;</span>
  <span style=color:#cb4b16>FAILSAFE_RESPONSE</span>
<span style=color:#719e07>end</span></code></pre></div><p>Now, when the exception is being rendered, the <code>ExceptionWrapper</code> comes into the
picture. It will wrap the exception, and return an appropriate status code, which
is translated from the symbolized variant, to the number version, using:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>def</span> <span style=color:#268bd2>status_code</span>
  <span style=color:#b58900>self</span><span style=color:#719e07>.</span>class<span style=color:#719e07>.</span>status_code_for_exception(@exception<span style=color:#719e07>.</span>class<span style=color:#719e07>.</span>name)
<span style=color:#719e07>end</span></code></pre></div><p>The <code>status_code</code> method invokes the <code>status_code_for_exception</code> method, which
converts the status code:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#719e07>def</span> <span style=color:#268bd2>self</span><span style=color:#719e07>.</span><span style=color:#268bd2>status_code_for_exception</span>(class_name)
  <span style=color:#cb4b16>Rack</span><span style=color:#719e07>::</span><span style=color:#cb4b16>Utils</span><span style=color:#719e07>.</span>status_code(@@rescue_responses<span style=color:#719e07>[</span>class_name<span style=color:#719e07>]</span>)
<span style=color:#719e07>end</span></code></pre></div><p>And that&rsquo;s about it. After that, the middleware stack is being executed in order
to return the new response, with the exception and the proper HTTP status code
attached.</p><h2 id=after-all>After all<a hidden class=anchor aria-hidden=true href=#after-all>#</a></h2><p>Although all of this Rails &ldquo;magic&rdquo; might be a bit much to digest at first,
Rails' source code does quite a good job of explaining what is going on. And as
you can see, there&rsquo;s always something more than meets the eye. If you need to
remember anything from this blogpost is that Rails does a very good (and
interesting) job at handling HTTP status codes, to make your app&rsquo;s responses
semantically correct and client friendly.</p><p>If you got to this point - thanks so much for reading. I know it was a bit of a
long journey, and I hope it was informative for you. Looking forward to reading
your comments!</p><div id=revue-embed><form action=https://www.getrevue.co/profile/itsilija/add_subscriber method=post id=revue-form name=revue-form target=_blank><p><b>Liked this article?</b>
Subscribe to my newsletter and get future articles in your inbox. It's a
short and sweet read, going out to +1000 of other engineers.</p><div class=revue-form-group><input class=revue-form-field placeholder="Your email address..." type=email name=member[email] id=member_email></div><div class=revue-form-actions><input type=submit value=Subscribe name=member[subscribe] id=member_submit></div></form></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://ieftimov.com/tags/status/>status</a></li><li><a href=https://ieftimov.com/tags/codes/>codes</a></li><li><a href=https://ieftimov.com/tags/http/>http</a></li></ul><nav class=paginav><a class=prev href=https://ieftimov.com/post/learn-your-tools-navigating-git-history/><span class=title>« Prev Page</span><br><span>Learn your tools: Navigating your Git History</span></a>
<a class=next href=https://ieftimov.com/post/decorators-and-presenters/><span class=title>Next Page »</span><br><span>A bit about decorators and presenters</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share How Rails handles status codes on twitter" href="https://twitter.com/intent/tweet/?text=How%20Rails%20handles%20status%20codes&url=https%3a%2f%2fieftimov.com%2fpost%2fhow-rails-handles-status-codes%2f&hashtags=status%2ccodes%2chttp"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How Rails handles status codes on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fieftimov.com%2fpost%2fhow-rails-handles-status-codes%2f&title=How%20Rails%20handles%20status%20codes&summary=How%20Rails%20handles%20status%20codes&source=https%3a%2f%2fieftimov.com%2fpost%2fhow-rails-handles-status-codes%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How Rails handles status codes on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fieftimov.com%2fpost%2fhow-rails-handles-status-codes%2f&title=How%20Rails%20handles%20status%20codes"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How Rails handles status codes on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fieftimov.com%2fpost%2fhow-rails-handles-status-codes%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How Rails handles status codes on whatsapp" href="https://api.whatsapp.com/send?text=How%20Rails%20handles%20status%20codes%20-%20https%3a%2f%2fieftimov.com%2fpost%2fhow-rails-handles-status-codes%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How Rails handles status codes on telegram" href="https://telegram.me/share/url?text=How%20Rails%20handles%20status%20codes&url=https%3a%2f%2fieftimov.com%2fpost%2fhow-rails-handles-status-codes%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>Copyright 2021 © Ilija Eftimov</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>