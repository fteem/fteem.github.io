<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Sprinkle some HATEOAS on your Rails APIs | Ilija Eftimov ⚡️</title><meta name=keywords content="HTTP,APIs,HATEOAS"><meta name=description content="REST as a concept was introduced by Roy Fielding in his doctoral thesis, named Architectural Styles and the Design of Network-based Software Architectures. 16 years later, REST as an architecture is the most widely accepted way to design and build APIs. I am sure we have all heard about it, and most of us think we are building actual RESTful APIs. But, are we?
Let&rsquo;s remind ourselves what REST is and then continue on something else that supplements REST, called HATEOAS."><meta name=author content="Ilija"><link rel=canonical href=https://ieftimov.com/post/sprinkle-some-hateoas-on-rails-apis/><link href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://ieftimov.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ieftimov.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ieftimov.com/favicon-32x32.png><link rel=apple-touch-icon href=https://ieftimov.com/apple-touch-icon.png><link rel=mask-icon href=https://ieftimov.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.81.0"><script async defer data-domain=ieftimov.com src=https://plausible.io/js/plausible.js></script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=ieftimov data-description="Support me on Buy me a coffee!" data-message data-color=#FFDD00 data-position=Left data-x_margin=18 data-y_margin=18></script><meta property="og:title" content="Sprinkle some HATEOAS on your Rails APIs"><meta property="og:description" content="REST as a concept was introduced by Roy Fielding in his doctoral thesis, named Architectural Styles and the Design of Network-based Software Architectures. 16 years later, REST as an architecture is the most widely accepted way to design and build APIs. I am sure we have all heard about it, and most of us think we are building actual RESTful APIs. But, are we?
Let&rsquo;s remind ourselves what REST is and then continue on something else that supplements REST, called HATEOAS."><meta property="og:type" content="article"><meta property="og:url" content="https://ieftimov.com/post/sprinkle-some-hateoas-on-rails-apis/"><meta property="og:image" content="https://ieftimov.com/cards/sprinkle-some-hateoas-on-rails-apis-1.png"><meta property="article:published_time" content="2016-06-26T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ieftimov.com/cards/sprinkle-some-hateoas-on-rails-apis-1.png"><meta name=twitter:title content="Sprinkle some HATEOAS on your Rails APIs"><meta name=twitter:description content="REST as a concept was introduced by Roy Fielding in his doctoral thesis, named Architectural Styles and the Design of Network-based Software Architectures. 16 years later, REST as an architecture is the most widely accepted way to design and build APIs. I am sure we have all heard about it, and most of us think we are building actual RESTful APIs. But, are we?
Let&rsquo;s remind ourselves what REST is and then continue on something else that supplements REST, called HATEOAS."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ieftimov.com/posts/"},{"@type":"ListItem","position":2,"name":"Sprinkle some HATEOAS on your Rails APIs","item":"https://ieftimov.com/post/sprinkle-some-hateoas-on-rails-apis/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Sprinkle some HATEOAS on your Rails APIs","name":"Sprinkle some HATEOAS on your Rails APIs","description":"REST as a concept was introduced by Roy Fielding in his doctoral thesis, named Architectural Styles and the Design of Network-based Software Architectures. 16 years later, REST as …","keywords":["HTTP","APIs","HATEOAS"],"articleBody":"REST as a concept was introduced by Roy Fielding in his doctoral thesis, named Architectural Styles and the Design of Network-based Software Architectures. 16 years later, REST as an architecture is the most widely accepted way to design and build APIs. I am sure we have all heard about it, and most of us think we are building actual RESTful APIs. But, are we?\nLet’s remind ourselves what REST is and then continue on something else that supplements REST, called HATEOAS.\nSo, what was REST again? I was thinking of a good way to explain this, but this gem by Ryan Tomako named How I Explained REST to My Wife is the best explanation of REST I have seen so far.\nOverall, REST (an acronym for REpresentational State Transfer) is an architecture over which the Internet is built upon. The easiest way to explain REST is, in my opinion, the Richardson Maturity Model. Here, we will not go in much depth, but if you want to learn RMM in more depth, I recommend reading Richardson Maturity Model, steps toward the glory of REST written by Martin Fowler.\nThe RMM explains REST in four levels:\n Use a protocol to do remote procedure calls (RPC). Introduce Resources HTTP Verbs Hypermedia Controls  Let’s deconstruct all of these levels briefly.\nLevel 1 Level one basically states that we need to use a protocol (HTTP) to execute procedure calls on some remote location (a server). This also means that we will not use any of the mechanism that the protocol provides, but we will just use it as a tunnel to send the requests and responses.\nLevel 2 Level two is something very familiar to all of us, I am sure. Resources. Back in the day, when I was probably still in high school, RPC worked by communicating with a single endpoint on a server. This is called a “service endpoint”.\nBy implementing resources in an API, we provide multiple endpoints that will represent the resources. This means that instead of having one single multipurpose endpoint, we have an endpoint for every resource that the API exposes.\nLevel 3 With level 1 and level 2 the mechanisms of the protocol were skipped, because we think only about tunneling our calls instead of fully utilising the protocol. Level 3 takes this to the next level (pun intended) and states that any RESTful service needs to utilise HTTP verbs so clients can interact with resources.\nIf you are coming from Rails land, I am sure you already know this - there’s a big difference between GET, POST, PUT, PATCH and DELETE. Sure, you could handle these in various ways in your backend, but this is where Rails shines - it strongly encourages you to comply to REST.\nIf you do not obey Level 3 of the RMM, you could have a different endpoint for every action on the API side. For example, if you had a Pet resource, to create a new entry you could use a /pets/create or a /pets/update to update it. By utilising Level 3, when HTTP verbs come into play, you would use something that Rails makes super easy: GET /pets/:id to get a Pet, POST /pets to create a new Pet or PATCH /pets to update one.\nLevel 4 Now, while Rails does a great job to make you write RESTful APIs, Level 4 is something that falls onto you, the programmer, to implement. This is something that most of us don’t follow and we, as a community, still haven’t find the best way to accomplish.\nHypermedia Controls is REST’s “holy grail”, and the ultimate level of “RESTfulness”. It states that when an API is at level four, it’s clients can request resources in a specific data format and can navigate throughout the API by using Hypermedia Controls.\nIf you find this confusing, let’s take a step back and think about browsers and websites. When you use a website you usually know only the entry point, in the form of domainname.tld, like ieftimov.com or google.com. Then, by interacting the website via your browser you navigate throughout the different pages it has. Well, navigating is done by clicking on links, right? Imagine a website that instead of having links makes your remember every URL on the website and you have to type it in manually. Worst website ever!\nHaving this in mind, the idea of Hypermedia Controls means that a resource should provide links, so a client that consumes the resource can navigate through and interact with it without knowing any other endpoint except the entry point. Just like normal websites - the page provides you with the links so you can interact with it.\nWe will get into the format of the JSON responses that HATEOAS APIs return in a bit, but first we will look at another important mechanism of HATEAOS - content negotiation.\nContent negotiation Content negotiation is a mechanism embedded into HTTP that allows web services to serve different versions (or formats) of documents. Or in REST terminology, resources. This is achieved by the Accept group of HTTP headers. For example, when requesting a web page the user agent (the browser) sends these (or similar) headers, depending on the browser:\n1 2 3  Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Encoding: gzip, deflate, sdch, br Accept-Language: en-US,en;q=0.8   This tells the server that the user agent can accept the document in a text/html, compressed with one of the specified compression schemes, formatted in en-US (US English) language.\nIf we go back to APIs, Rails does a very good job in content negotiation. When we are building apps nowadays, we usually make sure our resources have a HTML, JSON and (maybe) an XML representation. I am sure all of us have seen this:\n1 2 3 4 5 6  respond_to :html, :json, :xml def index @pets = Pet.all respond_with(@pets) end   Or maybe the older version of this code:\n1 2 3 4 5 6 7 8  def index @pets = Pet.all respond_to do |format| format.html format.json { render :json = @pets } format.xml { render :xml = @pets } end end   This tells our index action to allow three types of content format are requested, via content negotiation. HTML, JSON and XML are in fact Media (or MIME) types.\nIf you look at the example headers, you can notice the q parameter. This is called a Quality Value and it is what makes one content type more important than another. In other words, the q parameter adds a relative weight to the preference for that associated kind of content.\nFor example, let’s say we have the following Accept header:\n1  Accept: application/json; q=0.5, application/xml; q=0.001   This tells the server that the client prefers JSON content type much more than XML. If the q value is not specified, then the value is defaulted to 1. You can read more about content negotiation in RFC 7231.\nHATEOAS So what is HATEOAS? It is an acronym, just like REST, which translates to Hypermedia As The Engine Of Application State. Whoa, what a mouthful, right?\nLike we mentioned, Level 4 of the RMM states that an API should provide hypermedia controls to navigate in and interact with. But, what does HATEOAS have to do with this? Well, think about this - REST means Representational State Transfer while HATEOAS means Hypermedia As The Engine Of Application State. If you look just as the names, it makes sense that HATEOAS is a mechanism of REST. It all revolves around application state and state transitions.\nToo complex? Let’s see an example of a usual JSON representation of a resource, in this case, my user somewhere on a server:\n1  curl http://awesomeapi.com/users/1   1 2 3 4 5 6 7  { \"user\": { \"first_name\": \"Ilija\", \"last_name\": \"Eftimov\", \"age\": 25 } }   Simple enough. Now, when we apply HATEOAS to our representations of resources, it should look something like this:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  { \"user\": { \"first_name\": \"Ilija\", \"last_name\": \"Eftimov\", \"age\": 25, \"links\": [ { \"rel\": \"self\", \"href\": \"http://awesomeapi.com/users/1\" }, { \"rel\": \"roles\", \"href\": \"http://awesomeapi.com/users/1/roles\" } ] } }   By providing the links we allow the clients to use hypermedia (in our case, JSON) as the engine (list of available actions) of our application state (changing the data on the API side). The idea here is that there should be only one entry point to an API, or to a resource, and that the representation of the resource should include all of the actions that can be executed on this resources.\nThis means that a consumer of the API can take use the self attribute of the User resource, and consider this the endpoint where it can execute actions on it. By knowing that the API is RESTful, the client knows how to update the resource:\n1  curl -X \"PUT\" -d \"{ 'age': 26 }\" http://awesomeapi.com/users/1   Also, it knows how to delete the resource:\n1  curl -X \"DELETE\" http://awesomeapi.com/users/1   Furthermore, if it wants to see all of the roles for this user, it can execute a GET request to the roles relation of the user:\n1  curl http://awesomeapi.com/users/1/roles   As you can see, by putting HATEOAS in the mix, clients can interact with resources just by getting the URIs from the resources and by assuming that the API is level three RESTful (utilises HTTP verbs).\nHATEOAS Serializers How can we make our Rails API implement Level 4 of RMM? Let’s see an example.\nOur API is part of a blog CMS. It has an Author model, which has a one-to-many association with an Article model. This means that, one Author can have multiple Article.\nThe Author model:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  # == Schema Information # # Table name: authors # # id :integer not null, primary key # first_name :string # last_name :string # created_at :datetime not null # updated_at :datetime not null # class Author ApplicationRecord has_many :articles end   And the Article model:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  # == Schema Information # # Table name: articles # # id :integer not null, primary key # author_id :integer # title :string # body :text # created_at :datetime not null # updated_at :datetime not null # class Article ApplicationRecord belongs_to :author end   Our routes look like the following:\n1 2 3 4 5  Rails.application.routes.draw do resources :authors do resources :articles end end   Finally, we will have serializers for both, the Article and the Author model. For this example, we will use Active Model Serializers.\nAuthor serializer All of the Author objects will be serialized by the AuthorSerializer. Let’s add the required attributes first to the serializer, and we can talk about extension afterwards.\nThe AuthorSerializer class will look like this:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  # == Schema Information # # Table name: authors # # id :integer not null, primary key # first_name :string # last_name :string # created_at :datetime not null # updated_at :datetime not null # class AuthorSerializer ActiveModel::Serializer attributes :id, :first_name, :last_name, :created_at, :updated_at has_many :articles type :author end   Super simple! I will leave the annotations in, to keep the context of the data visible to us throughout this short example. In my everyday work, I usually consult with the schema file if I forget the shape of the data instead of adding annotations.\nLet’s try sending a GET /authors request and see what the data looks like. For reference, this is the implementation of the index action in the AuthorsController:\n1 2 3 4 5  class AuthorsController ApplicationController def index render json: Author.all end end   1  curl http://localhost:3000/authors   This request will return the following JSON:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  [ { \"id\": 1, \"first_name\": \"ilija\", \"last_name\": \"eftimov\", \"created_at\": \"2016-06-25T20:52:12.804Z\", \"updated_at\": \"2016-06-25T20:52:12.804Z\", \"articles\": [ { \"id\": 1, \"title\": \"Lorem ipsum\", \"body\": \"Lorem ipsum dolor sit amet\", \"created_at\": \"2016-06-25T22:25:51.874Z\", \"updated_at\": \"2016-06-25T22:25:51.874Z\" }, { \"id\": 2, \"title\": \"A princess of Mars\", \"body\": \"His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had\", \"created_at\": \"2016-06-26T00:20:09.388Z\", \"updated_at\": \"2016-06-26T00:20:09.388Z\" } ] } ]   Since my database has only one Author instance, it returns only that one. Also, the Author has two associated Article instances, so the serializer includes them in the response.\nAdding links to our serializer Now we have our serializer working. The next step is to extend it with links. This is quite trivial to do using Active Model Serializers - we need to add a new links attribute to the serializer, and provide the implementation of the attribute (which will be a method in fact) in the class:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  # == Schema Information # # Table name: authors # # id :integer not null, primary key # first_name :string # last_name :string # created_at :datetime not null # updated_at :datetime not null # class AuthorSerializer BaseSerializer attributes :id, :first_name, :last_name, :created_at, :updated_at, :links has_many :articles type :author def links [ { rel: :self, href: author_path(object) } ] end end   As you can see, the implementation is quite simple. We add a new attribute called links, and the method just returns an array of hashes. For starters, we will have only one - the self link which will point to the resource whose representation we are seeing.\nBut, if you execute the curl request again, you will gen an error, something like:\n1  #   This occurs because Rails' route helpers are not included in the scope of the serializers. This is easily fixable by including them to the serializer:\n1 2 3 4 5  class AuthorSerializer ActiveModel::Serializer include Rails.application.routes.url_helpers # *snip* end   If we execute the curl request again now, we will see the links in the JSON:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  [ { \"id\": 1, \"first_name\": \"ilija\", \"last_name\": \"eftimov\", \"created_at\": \"2016-06-25T20:52:12.804Z\", \"updated_at\": \"2016-06-25T20:52:12.804Z\", \"links\": [ { \"rel\": \"self\", \"href\": \"/authors/1\" } ], \"articles\": [ { \"id\": 1, \"title\": \"Lorem ipsum\", \"body\": \"Lorem ipsum dolor sit amet\", \"created_at\": \"2016-06-25T22:25:51.874Z\", \"updated_at\": \"2016-06-25T22:25:51.874Z\" }, { \"id\": 2, \"title\": \"A princess of Mars\", \"body\": \"His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had\", \"created_at\": \"2016-06-26T00:20:09.388Z\", \"updated_at\": \"2016-06-26T00:20:09.388Z\" } ] } ]   Great stuff! We added some HATEOAS to our resources.\nSpecifications Before we continue to add any more hypermedia to our resources, we need to put some thought into this. As you can see, we went on to implement the links attribute to the serializer without any thought. Sure, you might say, I am the creator of the API and I will structure the responses of the API as I please.\nTrue, you are the author of the API, but that statement is false. Imagine if all of us thought of a way to implement hypermedia in a different way? Every single API would be different in it’s hypermedia controls and it would be a hell to find your way around.\nWell, the sad part is that we still don’t know how to do HATEOAS. Or better said, we still don’t know the best way to do HATEOAS. That is why, people have tried to create specifications, which have been somewhat adopted.\nHAL From HAL’s documentation:\n HAL is a simple format that gives a consistent and easy way to hyperlink between resources in your API.\n As you can see, the motivation behind HAL is to create an easy and consistent way to add hypermedia controls. Just like any other specification, HAL provides a set of conventions for expressing hyperlinks in either JSON or XML.\nThis is an example of a JSON that applies the HAL specification:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  { \"_links\": { \"self\": { \"href\": \"/orders\" }, \"curies\": [{ \"name\": \"ea\", \"href\": \"http://example.com/docs/rels/{rel}\", \"templated\": true }], \"next\": { \"href\": \"/orders?page=2\" }, \"ea:find\": { \"href\": \"/orders{?id}\", \"templated\": true }, \"ea:admin\": [{ \"href\": \"/admins/2\", \"title\": \"Fred\" }, { \"href\": \"/admins/5\", \"title\": \"Kate\" }] }, \"currentlyProcessing\": 14, \"shippedToday\": 20, \"_embedded\": { \"ea:order\": [{ \"_links\": { \"self\": { \"href\": \"/orders/123\" }, \"ea:basket\": { \"href\": \"/baskets/98712\" }, \"ea:customer\": { \"href\": \"/customers/7809\" } }, \"total\": 30.00, \"currency\": \"USD\", \"status\": \"shipped\" }, { \"_links\": { \"self\": { \"href\": \"/orders/124\" }, \"ea:basket\": { \"href\": \"/baskets/97213\" }, \"ea:customer\": { \"href\": \"/customers/12369\" } }, \"total\": 20.00, \"currency\": \"USD\", \"status\": \"processing\" }] } }   JSON API JSON API, just like HAL is:\n a specification for how a client should request that resources be fetched or modified, and how a server should respond to those requests.\n It was was originally drafted by Yehuda Katz in 2013. This first draft was extracted from the JSON transport implicitly defined by Ember Data’s REST adapter. From there on, it picked up some popularity, but I cannot say with certainty that it’s the de facto API specification.\nThis is an example of a JSON that applies the JSON API specification:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  { \"data\": [{ \"type\": \"articles\", \"id\": \"1\", \"attributes\": { \"title\": \"JSON API paints my bikeshed!\", \"body\": \"The shortest article. Ever.\", \"created\": \"2015-05-22T14:56:29.000Z\", \"updated\": \"2015-05-22T14:56:28.000Z\" }, \"relationships\": { \"author\": { \"data\": {\"id\": \"42\", \"type\": \"people\"} } } }], \"included\": [ { \"type\": \"people\", \"id\": \"42\", \"attributes\": { \"name\": \"John\", \"age\": 80, \"gender\": \"male\" } } ] }   Other standards As you can imagine, people have tried to create a good JSON standard for quite some time. Some of the more popular specs are JSON for Linking Data, also known as JSON-LD; Collection+JSON and SIREN.\nJSON API and Active Model Serializers Since JSON API is picking up momentum and Active Model Serializers has a very good integration of it, we will stick to it and carry on with the implementation. Active Model Serializers on a high-level works through two parts: serializers and adapters. From the documentation:\n Serializers describe which attributes and relationships should be serialized. Adapters describe how attributes and relationships should be serialized.\n To get our JSON serialized in the JSON API format, we need to use a different adapter called, believe it or not, :json_api. Personally, I prefer to do this type of configuration in an initializer file:\n1 2 3  # config/initializers/active_model_serializers.rb ActiveModelSerializers.config.adapter = :json_api   By setting the adapter to :json_api, our API will produce and consume JSON formatted in the JSON API spec. If we execute the same API call that we did earlier, we will get a newly formatted JSON:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  { \"data\": [ { \"id\": \"1\", \"type\": \"author\", \"attributes\": { \"first-name\": \"ilija\", \"last-name\": \"eftimov\", \"created-at\": \"2016-06-25T20:52:12.804Z\", \"updated-at\": \"2016-06-25T20:52:12.804Z\" }, \"relationships\": { \"articles\": { \"data\": [ { \"id\": \"1\", \"type\": \"article\" }, { \"id\": \"2\", \"type\": \"article\" } ] } }, \"links\": { \"self\": { \"href\": \"/authors/1\" } } } ] }   As you can notice, the JSON that we get back has a completely different structure compared to what we have before. The reason is that the JSON API adapter that we use now formats the JSON in the JSON API Spec format.\nAnother cool thing about the JSON API adapter is that it allows us to specify links very explicitly, with a very nice DSL:\n1 2 3 4 5 6 7 8 9  class AuthorSerializer ActiveModel::Serializer attributes :id, :first_name, :last_name, :created_at, :updated_at has_many :articles type :author link :self do href author_path(object) end end   Also, we do not have to specify the links as an attribute and we can remove the include line that mixed-in Rails' url helpers in our serializer. If we call the /authors endpoint with a GET request again, we will see an extended JSON, that again complies with the JSON API Spec:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  { \"data\": [ { \"id\": \"1\", \"type\": \"author\", \"attributes\": { \"first-name\": \"ilija\", \"last-name\": \"eftimov\", \"created-at\": \"2016-06-25T20:52:12.804Z\", \"updated-at\": \"2016-06-25T20:52:12.804Z\" }, \"relationships\": { \"articles\": { \"data\": [ { \"id\": \"1\", \"type\": \"article\" }, { \"id\": \"2\", \"type\": \"article\" } ] } }, \"links\": { \"self\": { \"href\": \"/authors/1\" } } } ] }   Including additional resources Since AMS is an awesome gem, it allows you to include additional resources by including them in the controllers:\n1 2 3 4 5  class AuthorsController ApplicationController def index render json: Author.all, include: 'articles' end end   By including the Article association of on the Author model, we are able to extend the JSON result with the associated articles for each of the users:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81  { \"data\": [ { \"id\": \"1\", \"type\": \"author\", \"attributes\": { \"first-name\": \"ilija\", \"last-name\": \"eftimov\", \"created-at\": \"2016-06-25T20:52:12.804Z\", \"updated-at\": \"2016-06-25T20:52:12.804Z\" }, \"relationships\": { \"articles\": { \"data\": [ { \"id\": \"1\", \"type\": \"article\" }, { \"id\": \"2\", \"type\": \"article\" } ] } }, \"links\": { \"self\": { \"href\": \"/authors/1\" } } } ], \"included\": [ { \"id\": \"1\", \"type\": \"article\", \"attributes\": { \"title\": \"Lorem ipsum\", \"body\": \"Lorem ipsum dolor sit amet\", \"created-at\": \"2016-06-25T22:25:51.874Z\", \"updated-at\": \"2016-06-25T22:25:51.874Z\" }, \"relationships\": { \"author\": { \"data\": { \"id\": \"1\", \"type\": \"author\" } } }, \"links\": { \"self\": { \"href\": \"/authors/1/articles/1\" } } }, { \"id\": \"2\", \"type\": \"article\", \"attributes\": { \"title\": \"A princess of Mars\", \"body\": \"His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had\", \"created-at\": \"2016-06-26T00:20:09.388Z\", \"updated-at\": \"2016-06-26T00:20:09.388Z\" }, \"relationships\": { \"author\": { \"data\": { \"id\": \"1\", \"type\": \"author\" } } }, \"links\": { \"self\": { \"href\": \"/authors/1/articles/2\" } } } ] }   Although this is quite nice, beware that this introduces N+1 queries for every resource that we fetch. That’s why, usually index actions return only the requested resources, while show actions tend to include some additional resources:\n1 2 3 4 5 6 7 8 9 10  class AuthorsController ApplicationController def index render json: Author.all end def show author = Author.find(params[:id]) render json: author, include: :articles end end   This will add all of the articles found for the author that we requested:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79  { \"data\": { \"id\": \"1\", \"type\": \"author\", \"attributes\": { \"first-name\": \"ilija\", \"last-name\": \"eftimov\", \"created-at\": \"2016-06-25T20:52:12.804Z\", \"updated-at\": \"2016-06-25T20:52:12.804Z\" }, \"relationships\": { \"articles\": { \"data\": [ { \"id\": \"1\", \"type\": \"article\" }, { \"id\": \"2\", \"type\": \"article\" } ] } }, \"links\": { \"self\": { \"href\": \"/authors/1\" } } }, \"included\": [ { \"id\": \"1\", \"type\": \"article\", \"attributes\": { \"title\": \"Lorem ipsum\", \"body\": \"Lorem ipsum dolor sit amet\", \"created-at\": \"2016-06-25T22:25:51.874Z\", \"updated-at\": \"2016-06-25T22:25:51.874Z\" }, \"relationships\": { \"author\": { \"data\": { \"id\": \"1\", \"type\": \"author\" } } }, \"links\": { \"self\": { \"href\": \"/authors/1/articles/1\" } } }, { \"id\": \"2\", \"type\": \"article\", \"attributes\": { \"title\": \"A princess of Mars\", \"body\": \"His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had\", \"created-at\": \"2016-06-26T00:20:09.388Z\", \"updated-at\": \"2016-06-26T00:20:09.388Z\" }, \"relationships\": { \"author\": { \"data\": { \"id\": \"1\", \"type\": \"author\" } } }, \"links\": { \"self\": { \"href\": \"/authors/1/articles/2\" } } } ] }   As you can notice, because we supplied the has_many association in the serializer, AMS knows to utilise the correct serializer for each of the included resources. This adds the same structure to the included resources and the requested resource, which makes the result consistent and parsing this JSON much easier.\nNavigating resources Now, to actually see how easy it is to navigate through resources, let’s implement the ArticlesController#show action as well:\n1 2 3 4 5 6 7  class ArticlesController ApplicationController def show article = Article.find_by(author_id: params[:author_id], id: params[:id]) render json: article end end   Super simple - we find the Article by the author_id and the id params and render it as a JSON. If we call GET /authors/1/articles/2, we will get the JSON API representation of the Article object:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  { \"data\": { \"id\": \"2\", \"type\": \"article\", \"attributes\": { \"title\": \"A princess of Mars\", \"body\": \"His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had\", \"created-at\": \"2016-06-26T00:20:09.388Z\", \"updated-at\": \"2016-06-26T00:20:09.388Z\" }, \"relationships\": { \"author\": { \"data\": { \"id\": \"1\", \"type\": \"author\" } } }, \"links\": { \"self\": { \"href\": \"/authors/1/articles/2\" } } } }   If you use Postman, which I really enjoy using, or any other API browser to test the endpoints you could see how easy it is to navigate the resources:\nJust link in the web browser, you know the entry point localhost:3000/authors. From there you can click on the links property of the Author and get the single Author resource:\nBy seeing the resource with all of it’s included resources, then you can click on any of the links on the included Article resources, and see their attributes in JSON format:\nThis is what essentially HATEOAS means - navigating and interacting with resources via the endpoints that are provided in the JSON representation of the resources.\nOutro As you can see, to understand and learn what Hypermedia As The Engine Of Application State is, there is quite a bit of context that we need to get in our heads. Although all of this sometimes can appear as quite complex, Rails makes implementing HATEOAS APIs quite easy, as you could see in the examples. Sure, there is more to hypermedia controls, but these examples should be more than enough to get your feet wet.\nAlso, the HATEOAS concept seems quite complex on the surface, but when you deconstruct it it’s quite simple, because we have already seen the same behaviour in web browsers. The issue of why it seems quite complex is because we haven’t even thought about normal web sites like RESTful APIs, and vice-versa.\nIf you want to see the actual implementation of the endpoints that we worked with in this article, you can check this repo on Github.\nAdditional reading  Web Linking - RFC 5988 Haters gonna HATEOAS Richardson Maturity Model, steps toward the glory of REST What is the Richardson Maturity Model? Media type Content negotiation  Liked this article? Subscribe to my newsletter and get my fresh posts in your inbox. It's short and sweet, going out monthly to over 1,000 subscribers.  ","wordCount":"4968","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Ilija"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ieftimov.com/post/sprinkle-some-hateoas-on-rails-apis/"},"publisher":{"@type":"Organization","name":"Ilija Eftimov ⚡️","logo":{"@type":"ImageObject","url":"https://ieftimov.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://ieftimov.com/ accesskey=h title="Ilija Eftimov ⚡️ (Alt + H)">Ilija Eftimov ⚡️</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://ieftimov.com/posts title=Archive><span>Archive</span></a></li><li><a href=https://ieftimov.com/about title=About><span>About</span></a></li><li><a href=https://ieftimov.com/newsletter title=Newsletter><span>Newsletter</span></a></li><li><a href=https://forms.gle/orfXK5jh1LRaiFzo8 title="Suggest a topic"><span>Suggest a topic</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Sprinkle some HATEOAS on your Rails APIs</h1><div class=post-meta>June 26, 2016&nbsp;·&nbsp;24 min&nbsp;·&nbsp;Ilija</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#so-what-was-rest-again aria-label="So, what was REST again?">So, what was REST again?</a><ul><li><a href=#level-1 aria-label="Level 1">Level 1</a></li><li><a href=#level-2 aria-label="Level 2">Level 2</a></li><li><a href=#level-3 aria-label="Level 3">Level 3</a></li><li><a href=#level-4 aria-label="Level 4">Level 4</a></li></ul></li><li><a href=#content-negotiation aria-label="Content negotiation">Content negotiation</a></li><li><a href=#hateoas aria-label=HATEOAS>HATEOAS</a></li><li><a href=#hateoas-serializers aria-label="HATEOAS Serializers">HATEOAS Serializers</a><ul><li><a href=#author-serializer aria-label="Author serializer">Author serializer</a></li><li><a href=#adding-links-to-our-serializer aria-label="Adding links to our serializer">Adding links to our serializer</a></li></ul></li><li><a href=#specifications aria-label=Specifications>Specifications</a><ul><li><a href=#hal aria-label=HAL>HAL</a></li><li><a href=#json-api aria-label="JSON API">JSON API</a></li><li><a href=#other-standards aria-label="Other standards">Other standards</a></li></ul></li><li><a href=#json-api-and-active-model-serializers aria-label="JSON API and Active Model Serializers">JSON API and Active Model Serializers</a></li><li><a href=#including-additional-resources aria-label="Including additional resources">Including additional resources</a></li><li><a href=#navigating-resources aria-label="Navigating resources">Navigating resources</a></li><li><a href=#outro aria-label=Outro>Outro</a></li><li><a href=#additional-reading aria-label="Additional reading">Additional reading</a></li></ul></div></details></div><div class=post-content><p>REST as a concept was introduced by <a href=https://en.wikipedia.org/wiki/Roy_Fielding>Roy
Fielding</a> in his doctoral thesis,
named <a href=http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm>Architectural Styles and the Design of Network-based Software
Architectures</a>. 16
years later, REST as an architecture is the most widely accepted way to design
and build APIs. I am sure we have all heard about it, and most of us think we
are building actual RESTful APIs. But, are we?</p><p>Let&rsquo;s remind ourselves what REST is and then continue on something else that
supplements REST, called HATEOAS.</p><h2 id=so-what-was-rest-again>So, what was REST again?<a hidden class=anchor aria-hidden=true href=#so-what-was-rest-again>#</a></h2><p>I was thinking of a good way to explain this, but this gem by Ryan Tomako named
<a href=http://web.archive.org/web/20130316031532/http://tomayko.com/writings/rest-to-my-wife>How I Explained REST to My
Wife</a>
is the best explanation of REST I have seen so far.</p><p>Overall, REST (an acronym for <em>REpresentational State Transfer</em>) is an
architecture over which the Internet is built upon. The easiest way to explain
REST is, in my opinion, the Richardson Maturity Model. Here, we will not go in
much depth, but if you want to learn RMM in more depth, I recommend reading
<a href=http://martinfowler.com/articles/richardsonMaturityModel.html>Richardson Maturity Model, steps toward the glory of
REST</a> written by
Martin Fowler.</p><p>The RMM explains REST in four levels:</p><ol><li>Use a protocol to do remote procedure calls (RPC).</li><li>Introduce Resources</li><li>HTTP Verbs</li><li>Hypermedia Controls</li></ol><p>Let&rsquo;s deconstruct all of these levels briefly.</p><h3 id=level-1>Level 1<a hidden class=anchor aria-hidden=true href=#level-1>#</a></h3><p>Level one basically states that we need to use a protocol (HTTP) to execute
procedure calls on some remote location (a server). This also means that we
will not use any of the mechanism that the protocol provides, but we will just
use it as a tunnel to send the requests and responses.</p><h3 id=level-2>Level 2<a hidden class=anchor aria-hidden=true href=#level-2>#</a></h3><p>Level two is something very familiar to all of us, I am sure. Resources. Back
in the day, when I was probably still in high school, RPC worked by
communicating with a single endpoint on a server. This is called a &ldquo;service
endpoint&rdquo;.</p><p>By implementing resources in an API, we provide multiple endpoints that will
represent the resources. This means that instead of having one single
multipurpose endpoint, we have an endpoint for every resource that the API
exposes.</p><h3 id=level-3>Level 3<a hidden class=anchor aria-hidden=true href=#level-3>#</a></h3><p>With level 1 and level 2 the mechanisms of the protocol were skipped, because
we think only about tunneling our calls instead of fully utilising the
protocol. Level 3 takes this to the next level (pun intended) and states that
any RESTful service needs to utilise HTTP verbs so clients can interact with
resources.</p><p>If you are coming from Rails land, I am sure you already know this - there&rsquo;s a
big difference between GET, POST, PUT, PATCH and DELETE. Sure, you could handle
these in various ways in your backend, but this is where Rails shines - it
strongly encourages you to comply to REST.</p><p>If you do not obey Level 3 of the RMM, you could have a different endpoint for
every action on the API side. For example, if you had a <code>Pet</code> resource, to
create a new entry you could use a <code>/pets/create</code> or a <code>/pets/update</code> to update
it. By utilising Level 3, when HTTP verbs come into play, you would use
something that Rails makes super easy: <code>GET /pets/:id</code> to get a <code>Pet</code>, <code>POST /pets</code> to create a new <code>Pet</code> or <code>PATCH /pets</code> to update one.</p><h3 id=level-4>Level 4<a hidden class=anchor aria-hidden=true href=#level-4>#</a></h3><p>Now, while Rails does a great job to <strong>make you</strong> write RESTful APIs, Level 4
is something that falls onto you, the programmer, to implement. This is
something that most of us don&rsquo;t follow and we, as a community, still haven&rsquo;t
find the best way to accomplish.</p><p>Hypermedia Controls is REST&rsquo;s &ldquo;holy grail&rdquo;, and the ultimate level of
&ldquo;RESTfulness&rdquo;. It states that when an API is at level four, it&rsquo;s clients can
request resources in a specific data format and can navigate throughout the API
by using Hypermedia Controls.</p><p>If you find this confusing, let&rsquo;s take a step back and think about browsers and
websites. When you use a website you usually know only the entry point, in the
form of <code>domainname.tld</code>, like <code>ieftimov.com</code> or <code>google.com</code>. Then, by
interacting the website via your browser you navigate throughout the different
pages it has. Well, navigating is done by clicking on links, right? Imagine a
website that instead of having links makes your remember every URL on the
website and you have to type it in manually. Worst website ever!</p><p>Having this in mind, the idea of Hypermedia Controls means that a resource
should provide links, so a client that consumes the resource can navigate
through and interact with it without knowing any other endpoint except the
entry point. Just like normal websites - the page provides you with the links
so you can interact with it.</p><p>We will get into the format of the JSON responses that HATEOAS APIs return in a
bit, but first we will look at another important mechanism of HATEAOS - content
negotiation.</p><h2 id=content-negotiation>Content negotiation<a hidden class=anchor aria-hidden=true href=#content-negotiation>#</a></h2><p>Content negotiation is a mechanism embedded into HTTP that allows web services
to serve different versions (or formats) of documents. Or in REST terminology,
resources. This is achieved by the <code>Accept</code> group of HTTP headers. For example,
when requesting a web page the user agent (the browser) sends these (or similar)
headers, depending on the browser:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
Accept-Encoding: gzip, deflate, sdch, br
Accept-Language: en-US,en;q=0.8</code></pre></td></tr></table></div></div><p>This tells the server that the user agent can accept the document in a
<code>text/html</code>, compressed with one of the specified compression schemes, formatted
in <code>en-US</code> (US English) language.</p><p>If we go back to APIs, Rails does a very good job in content negotiation. When
we are building apps nowadays, we usually make sure our resources have a <code>HTML</code>,
<code>JSON</code> and (maybe) an <code>XML</code> representation. I am sure all of us have seen this:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>respond_to <span style=color:#00afaf>:html</span>, <span style=color:#00afaf>:json</span>, <span style=color:#00afaf>:xml</span>

<span style=color:#5f8700>def</span> <span style=color:#0087ff>index</span>
  @pets = <span style=color:#d75f00>Pet</span>.all
  respond_with(@pets)
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Or maybe the older version of this code:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>def</span> <span style=color:#0087ff>index</span>
  @pets = <span style=color:#d75f00>Pet</span>.all
  respond_to <span style=color:#5f8700>do</span> |<span style=color:#0087ff>format</span>|
    <span style=color:#0087ff>format</span>.html
    <span style=color:#0087ff>format</span>.json { render <span style=color:#00afaf>:json</span> =&gt; @pets }
    <span style=color:#0087ff>format</span>.xml { render <span style=color:#00afaf>:xml</span> =&gt; @pets }
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>This tells our <code>index</code> action to allow three types of content format are
requested, via content negotiation. <code>HTML</code>, <code>JSON</code> and <code>XML</code> are in fact Media
(or MIME) types.</p><p>If you look at the example headers, you can notice the <code>q</code> parameter. This is
called a <em>Quality Value</em> and it is what makes one content type more important
than another. In other words, the <code>q</code> parameter adds a relative <em>weight</em> to the
preference for that associated kind of content.</p><p>For example, let&rsquo;s say we have the following <code>Accept</code> header:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Accept: application/json; q=0.5, application/xml; q=0.001</code></pre></td></tr></table></div></div><p>This tells the server that the client prefers JSON content type much more than
XML. If the <code>q</code> value is not specified, then the value is defaulted to 1. You
can read more about content negotiation in <a href=https://tools.ietf.org/html/rfc7231#section-5.3>RFC 7231</a>.</p><h2 id=hateoas>HATEOAS<a hidden class=anchor aria-hidden=true href=#hateoas>#</a></h2><p>So what is HATEOAS? It is an acronym, just like REST, which translates to
<strong>H</strong>ypermedia <strong>A</strong>s <strong>T</strong>he <strong>E</strong>ngine <strong>O</strong>f <strong>A</strong>pplication <strong>S</strong>tate. Whoa,
what a mouthful, right?</p><p>Like we mentioned, Level 4 of the RMM states that an API should provide
hypermedia controls to navigate in and interact with. But, what does HATEOAS
have to do with this? Well, think about this - REST means Representational
State Transfer while HATEOAS means Hypermedia As The Engine Of Application
State. If you look just as the names, it makes sense that HATEOAS is a mechanism
of REST. It all revolves around application state and state transitions.</p><p>Too complex? Let&rsquo;s see an example of a usual JSON representation of a resource,
in this case, my user somewhere on a server:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl http://awesomeapi.com/users/1</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;user&#34;</span>: {
    <span style=color:#0087ff>&#34;first_name&#34;</span>: <span style=color:#00afaf>&#34;Ilija&#34;</span>,
    <span style=color:#0087ff>&#34;last_name&#34;</span>: <span style=color:#00afaf>&#34;Eftimov&#34;</span>,
    <span style=color:#0087ff>&#34;age&#34;</span>: <span style=color:#00afaf>25</span>
  }
}</code></pre></td></tr></table></div></div><p>Simple enough. Now, when we apply HATEOAS to our representations of resources,
it should look something like this:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;user&#34;</span>: {
    <span style=color:#0087ff>&#34;first_name&#34;</span>: <span style=color:#00afaf>&#34;Ilija&#34;</span>,
    <span style=color:#0087ff>&#34;last_name&#34;</span>: <span style=color:#00afaf>&#34;Eftimov&#34;</span>,
    <span style=color:#0087ff>&#34;age&#34;</span>: <span style=color:#00afaf>25</span>,
    <span style=color:#0087ff>&#34;links&#34;</span>: [
      {
        <span style=color:#0087ff>&#34;rel&#34;</span>: <span style=color:#00afaf>&#34;self&#34;</span>,
        <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;http://awesomeapi.com/users/1&#34;</span>
      },
      {
        <span style=color:#0087ff>&#34;rel&#34;</span>: <span style=color:#00afaf>&#34;roles&#34;</span>,
        <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;http://awesomeapi.com/users/1/roles&#34;</span>
      }
    ]
  }
}</code></pre></td></tr></table></div></div><p>By providing the <code>links</code> we allow the clients to use hypermedia (in our case,
JSON) as the engine (list of available actions) of our application state
(changing the data on the API side). The idea here is that there should be only
one entry point to an API, or to a resource, and that the representation of the
resource should include all of the actions that can be executed on this
resources.</p><p>This means that a consumer of the API can take use the <code>self</code> attribute of the
<code>User</code> resource, and consider this the endpoint where it can execute actions on
it. By knowing that the API is RESTful, the client knows how to update the
resource:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X <span style=color:#00afaf>&#34;PUT&#34;</span> -d <span style=color:#00afaf>&#34;{ &#39;age&#39;: 26 }&#34;</span> http://awesomeapi.com/users/1</code></pre></td></tr></table></div></div><p>Also, it knows how to delete the resource:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X <span style=color:#00afaf>&#34;DELETE&#34;</span> http://awesomeapi.com/users/1</code></pre></td></tr></table></div></div><p>Furthermore, if it wants to see all of the roles for this user, it can execute
a <code>GET</code> request to the <code>roles</code> relation of the user:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl http://awesomeapi.com/users/1/roles</code></pre></td></tr></table></div></div><p>As you can see, by putting HATEOAS in the mix, clients can interact with
resources just by getting the URIs from the resources and by assuming that the
API is level three RESTful (utilises HTTP verbs).</p><h2 id=hateoas-serializers>HATEOAS Serializers<a hidden class=anchor aria-hidden=true href=#hateoas-serializers>#</a></h2><p>How can we make our Rails API implement Level 4 of RMM? Let&rsquo;s see an example.</p><p>Our API is part of a blog CMS. It has an <code>Author</code> model, which has a
one-to-many association with an <code>Article</code> model. This means that, one <code>Author</code>
can have multiple <code>Article</code>.</p><p>The <code>Author</code> model:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e># == Schema Information</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e># Table name: authors</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e>#  id         :integer          not null, primary key</span>
<span style=color:#4e4e4e>#  first_name :string</span>
<span style=color:#4e4e4e>#  last_name  :string</span>
<span style=color:#4e4e4e>#  created_at :datetime         not null</span>
<span style=color:#4e4e4e>#  updated_at :datetime         not null</span>
<span style=color:#4e4e4e>#</span>

<span style=color:#5f8700>class</span> <span style=color:#0087ff>Author</span> &lt; <span style=color:#d75f00>ApplicationRecord</span>
  has_many <span style=color:#00afaf>:articles</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>And the <code>Article</code> model:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e># == Schema Information</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e># Table name: articles</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e>#  id         :integer          not null, primary key</span>
<span style=color:#4e4e4e>#  author_id  :integer</span>
<span style=color:#4e4e4e>#  title      :string</span>
<span style=color:#4e4e4e>#  body       :text</span>
<span style=color:#4e4e4e>#  created_at :datetime         not null</span>
<span style=color:#4e4e4e>#  updated_at :datetime         not null</span>
<span style=color:#4e4e4e>#</span>

<span style=color:#5f8700>class</span> <span style=color:#0087ff>Article</span> &lt; <span style=color:#d75f00>ApplicationRecord</span>
  belongs_to <span style=color:#00afaf>:author</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Our routes look like the following:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#d75f00>Rails</span>.application.routes.draw <span style=color:#5f8700>do</span>
  resources <span style=color:#00afaf>:authors</span> <span style=color:#5f8700>do</span>
    resources <span style=color:#00afaf>:articles</span>
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Finally, we will have serializers for both, the <code>Article</code> and the <code>Author</code> model.
For this example, we will use
<a href=https://github.com/rails-api/active_model_serializers>Active Model Serializers</a>.</p><h3 id=author-serializer>Author serializer<a hidden class=anchor aria-hidden=true href=#author-serializer>#</a></h3><p>All of the <code>Author</code> objects will be serialized by the <code>AuthorSerializer</code>. Let&rsquo;s
add the required attributes first to the serializer, and we can talk about
extension afterwards.</p><p>The <code>AuthorSerializer</code> class will look like this:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e># == Schema Information</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e># Table name: authors</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e>#  id         :integer          not null, primary key</span>
<span style=color:#4e4e4e>#  first_name :string</span>
<span style=color:#4e4e4e>#  last_name  :string</span>
<span style=color:#4e4e4e>#  created_at :datetime         not null</span>
<span style=color:#4e4e4e>#  updated_at :datetime         not null</span>
<span style=color:#4e4e4e>#</span>

<span style=color:#5f8700>class</span> <span style=color:#0087ff>AuthorSerializer</span> &lt; <span style=color:#d75f00>ActiveModel</span>::<span style=color:#d75f00>Serializer</span>
  attributes <span style=color:#00afaf>:id</span>, <span style=color:#00afaf>:first_name</span>, <span style=color:#00afaf>:last_name</span>, <span style=color:#00afaf>:created_at</span>, <span style=color:#00afaf>:updated_at</span>
  has_many <span style=color:#00afaf>:articles</span>
  type <span style=color:#00afaf>:author</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Super simple! I will leave the annotations in, to keep the context of the data
visible to us throughout this short example. In my everyday work, I usually
consult with the schema file if I forget the shape of the data instead of
adding annotations.</p><p>Let&rsquo;s try sending a <code>GET /authors</code> request and see what the data looks like.
For reference, this is the implementation of the index action in the
<code>AuthorsController</code>:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>class</span> <span style=color:#0087ff>AuthorsController</span> &lt; <span style=color:#d75f00>ApplicationController</span>
  <span style=color:#5f8700>def</span> <span style=color:#0087ff>index</span>
    render <span style=color:#00afaf>json</span>: <span style=color:#d75f00>Author</span>.all
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl http://localhost:3000/authors</code></pre></td></tr></table></div></div><p>This request will return the following JSON:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>[
  {
    <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>1</span>,
    <span style=color:#0087ff>&#34;first_name&#34;</span>: <span style=color:#00afaf>&#34;ilija&#34;</span>,
    <span style=color:#0087ff>&#34;last_name&#34;</span>: <span style=color:#00afaf>&#34;eftimov&#34;</span>,
    <span style=color:#0087ff>&#34;created_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
    <span style=color:#0087ff>&#34;updated_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
    <span style=color:#0087ff>&#34;articles&#34;</span>: [
      {
        <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>1</span>,
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum dolor sit amet&#34;</span>,
        <span style=color:#0087ff>&#34;created_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>
      },
      {
        <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>2</span>,
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;A princess of Mars&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had&#34;</span>,
        <span style=color:#0087ff>&#34;created_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>
      }
    ]
  }
]</code></pre></td></tr></table></div></div><p>Since my database has only one <code>Author</code> instance, it returns only that one.
Also, the <code>Author</code> has two associated <code>Article</code> instances, so the serializer
includes them in the response.</p><h3 id=adding-links-to-our-serializer>Adding links to our serializer<a hidden class=anchor aria-hidden=true href=#adding-links-to-our-serializer>#</a></h3><p>Now we have our serializer working. The next step is to extend it with <code>links</code>.
This is quite trivial to do using Active Model Serializers - we need to add a
new <code>links</code> attribute to the serializer, and provide the implementation of the
attribute (which will be a method in fact) in the class:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e># == Schema Information</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e># Table name: authors</span>
<span style=color:#4e4e4e>#</span>
<span style=color:#4e4e4e>#  id         :integer          not null, primary key</span>
<span style=color:#4e4e4e>#  first_name :string</span>
<span style=color:#4e4e4e>#  last_name  :string</span>
<span style=color:#4e4e4e>#  created_at :datetime         not null</span>
<span style=color:#4e4e4e>#  updated_at :datetime         not null</span>
<span style=color:#4e4e4e>#</span>

<span style=color:#5f8700>class</span> <span style=color:#0087ff>AuthorSerializer</span> &lt; <span style=color:#d75f00>BaseSerializer</span>
  attributes <span style=color:#00afaf>:id</span>, <span style=color:#00afaf>:first_name</span>, <span style=color:#00afaf>:last_name</span>, <span style=color:#00afaf>:created_at</span>, <span style=color:#00afaf>:updated_at</span>, <span style=color:#00afaf>:links</span>
  has_many <span style=color:#00afaf>:articles</span>
  type <span style=color:#00afaf>:author</span>

  <span style=color:#5f8700>def</span> <span style=color:#0087ff>links</span>
    [
      {
        <span style=color:#00afaf>rel</span>: <span style=color:#00afaf>:self</span>,
        <span style=color:#00afaf>href</span>: author_path(object)
      }
    ]
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>As you can see, the implementation is quite simple. We add a new attribute
called <code>links</code>, and the method just returns an array of hashes. For starters,
we will have only one - the <code>self</code> link which will point to the resource whose
representation we are seeing.</p><p>But, if you execute the curl request again, you will gen an error, something
like:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>#&lt;NoMethodError: undefined method `author_path&#39; for #&lt;AuthorSerializer:0x007fe251b4c450&gt;&gt;</code></pre></td></tr></table></div></div><p>This occurs because Rails' route helpers are not included in the scope of the
serializers. This is easily fixable by including them to the serializer:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>class</span> <span style=color:#0087ff>AuthorSerializer</span> &lt; <span style=color:#d75f00>ActiveModel</span>::<span style=color:#d75f00>Serializer</span>
  <span style=color:#5f8700>include</span> <span style=color:#d75f00>Rails</span>.application.routes.url_helpers

  <span style=color:#4e4e4e># *snip*</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>If we execute the curl request again now, we will see the links in the JSON:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">31
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>[
  {
    <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>1</span>,
    <span style=color:#0087ff>&#34;first_name&#34;</span>: <span style=color:#00afaf>&#34;ilija&#34;</span>,
    <span style=color:#0087ff>&#34;last_name&#34;</span>: <span style=color:#00afaf>&#34;eftimov&#34;</span>,
    <span style=color:#0087ff>&#34;created_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
    <span style=color:#0087ff>&#34;updated_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
    <span style=color:#0087ff>&#34;links&#34;</span>: [
      {
        <span style=color:#0087ff>&#34;rel&#34;</span>: <span style=color:#00afaf>&#34;self&#34;</span>,
        <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1&#34;</span>
      }
    ],
    <span style=color:#0087ff>&#34;articles&#34;</span>: [
      {
        <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>1</span>,
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum dolor sit amet&#34;</span>,
        <span style=color:#0087ff>&#34;created_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>
      },
      {
        <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>2</span>,
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;A princess of Mars&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had&#34;</span>,
        <span style=color:#0087ff>&#34;created_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated_at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>
      }
    ]
  }
]</code></pre></td></tr></table></div></div><p>Great stuff! We added <em>some</em> HATEOAS to our resources.</p><h2 id=specifications>Specifications<a hidden class=anchor aria-hidden=true href=#specifications>#</a></h2><p>Before we continue to add any more hypermedia to our resources, we need to put
some thought into this. As you can see, we went on to implement the <code>links</code>
attribute to the serializer without any thought. Sure, you might say, I am the
creator of the API and I will structure the responses of the API as I please.</p><p>True, you are the author of the API, but that statement is false. Imagine if
all of us thought of a way to implement hypermedia in a different way? Every
single API would be different in it&rsquo;s hypermedia controls and it would be a
hell to find your way around.</p><p>Well, the sad part is that we still don&rsquo;t know how to do HATEOAS. Or better
said, we still don&rsquo;t know <strong>the best way</strong> to do HATEOAS. That is why, people
have tried to create specifications, which have been somewhat adopted.</p><h3 id=hal>HAL<a hidden class=anchor aria-hidden=true href=#hal>#</a></h3><p>From <a href=http://stateless.co/hal_specification.html>HAL</a>&rsquo;s documentation:</p><blockquote><p>HAL is a simple format that gives a consistent and easy way to hyperlink
between resources in your API.</p></blockquote><p>As you can see, the motivation behind HAL is to create an easy and consistent
way to add hypermedia controls. Just like any other specification, HAL provides
a set of conventions for expressing hyperlinks in either JSON or XML.</p><p>This is an example of a JSON that applies the HAL specification:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">41
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#0087ff>&#34;_links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/orders&#34;</span> },
        <span style=color:#0087ff>&#34;curies&#34;</span>: [{ <span style=color:#0087ff>&#34;name&#34;</span>: <span style=color:#00afaf>&#34;ea&#34;</span>, <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;http://example.com/docs/rels/{rel}&#34;</span>, <span style=color:#0087ff>&#34;templated&#34;</span>: <span style=color:#d75f00>true</span> }],
        <span style=color:#0087ff>&#34;next&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/orders?page=2&#34;</span> },
        <span style=color:#0087ff>&#34;ea:find&#34;</span>: {
            <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/orders{?id}&#34;</span>,
            <span style=color:#0087ff>&#34;templated&#34;</span>: <span style=color:#d75f00>true</span>
        },
        <span style=color:#0087ff>&#34;ea:admin&#34;</span>: [{
            <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/admins/2&#34;</span>,
            <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;Fred&#34;</span>
        }, {
            <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/admins/5&#34;</span>,
            <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;Kate&#34;</span>
        }]
    },
    <span style=color:#0087ff>&#34;currentlyProcessing&#34;</span>: <span style=color:#00afaf>14</span>,
    <span style=color:#0087ff>&#34;shippedToday&#34;</span>: <span style=color:#00afaf>20</span>,
    <span style=color:#0087ff>&#34;_embedded&#34;</span>: {
        <span style=color:#0087ff>&#34;ea:order&#34;</span>: [{
            <span style=color:#0087ff>&#34;_links&#34;</span>: {
                <span style=color:#0087ff>&#34;self&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/orders/123&#34;</span> },
                <span style=color:#0087ff>&#34;ea:basket&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/baskets/98712&#34;</span> },
                <span style=color:#0087ff>&#34;ea:customer&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/customers/7809&#34;</span> }
            },
            <span style=color:#0087ff>&#34;total&#34;</span>: <span style=color:#00afaf>30.00</span>,
            <span style=color:#0087ff>&#34;currency&#34;</span>: <span style=color:#00afaf>&#34;USD&#34;</span>,
            <span style=color:#0087ff>&#34;status&#34;</span>: <span style=color:#00afaf>&#34;shipped&#34;</span>
        }, {
            <span style=color:#0087ff>&#34;_links&#34;</span>: {
                <span style=color:#0087ff>&#34;self&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/orders/124&#34;</span> },
                <span style=color:#0087ff>&#34;ea:basket&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/baskets/97213&#34;</span> },
                <span style=color:#0087ff>&#34;ea:customer&#34;</span>: { <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/customers/12369&#34;</span> }
            },
            <span style=color:#0087ff>&#34;total&#34;</span>: <span style=color:#00afaf>20.00</span>,
            <span style=color:#0087ff>&#34;currency&#34;</span>: <span style=color:#00afaf>&#34;USD&#34;</span>,
            <span style=color:#0087ff>&#34;status&#34;</span>: <span style=color:#00afaf>&#34;processing&#34;</span>
        }]
    }
}</code></pre></td></tr></table></div></div><h3 id=json-api>JSON API<a hidden class=anchor aria-hidden=true href=#json-api>#</a></h3><p>JSON API, just like HAL is:</p><blockquote><p>a specification for how a client should request that resources be fetched or
modified, and how a server should respond to those requests.</p></blockquote><p>It was was originally drafted by Yehuda Katz in 2013. This first draft was
extracted from the JSON transport implicitly defined by Ember Data’s REST
adapter. From there on, it picked up some popularity, but I cannot say with
certainty that it&rsquo;s the de facto API specification.</p><p>This is an example of a JSON that applies the JSON API specification:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;data&#34;</span>: [{
    <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;articles&#34;</span>,
    <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
    <span style=color:#0087ff>&#34;attributes&#34;</span>: {
      <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;JSON API paints my bikeshed!&#34;</span>,
      <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;The shortest article. Ever.&#34;</span>,
      <span style=color:#0087ff>&#34;created&#34;</span>: <span style=color:#00afaf>&#34;2015-05-22T14:56:29.000Z&#34;</span>,
      <span style=color:#0087ff>&#34;updated&#34;</span>: <span style=color:#00afaf>&#34;2015-05-22T14:56:28.000Z&#34;</span>
    },
    <span style=color:#0087ff>&#34;relationships&#34;</span>: {
      <span style=color:#0087ff>&#34;author&#34;</span>: {
        <span style=color:#0087ff>&#34;data&#34;</span>: {<span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;42&#34;</span>, <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;people&#34;</span>}
      }
    }
  }],
  <span style=color:#0087ff>&#34;included&#34;</span>: [
    {
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;people&#34;</span>,
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;42&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;name&#34;</span>: <span style=color:#00afaf>&#34;John&#34;</span>,
        <span style=color:#0087ff>&#34;age&#34;</span>: <span style=color:#00afaf>80</span>,
        <span style=color:#0087ff>&#34;gender&#34;</span>: <span style=color:#00afaf>&#34;male&#34;</span>
      }
    }
  ]
}</code></pre></td></tr></table></div></div><h3 id=other-standards>Other standards<a hidden class=anchor aria-hidden=true href=#other-standards>#</a></h3><p>As you can imagine, people have tried to create a good JSON standard for quite
some time. Some of the more popular specs are
<a href=http://json-ld.org/>JSON for Linking Data</a>, also known as JSON-LD;
<a href=http://amundsen.com/media-types/collection/>Collection+JSON</a> and
<a href=https://github.com/kevinswiber/siren>SIREN</a>.</p><h2 id=json-api-and-active-model-serializers>JSON API and Active Model Serializers<a hidden class=anchor aria-hidden=true href=#json-api-and-active-model-serializers>#</a></h2><p>Since JSON API is picking up momentum and Active Model Serializers has a very
good integration of it, we will stick to it and carry on with the
implementation. Active Model Serializers on a high-level works through two
parts: serializers and adapters. From the documentation:</p><blockquote><p>Serializers describe which attributes and relationships should be serialized.
Adapters describe how attributes and relationships should be serialized.</p></blockquote><p>To get our JSON serialized in the JSON API format, we need to use a different
adapter called, believe it or not, <code>:json_api</code>. Personally, I prefer to do this
type of configuration in an initializer file:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#4e4e4e># config/initializers/active_model_serializers.rb</span>

<span style=color:#d75f00>ActiveModelSerializers</span>.config.adapter = <span style=color:#00afaf>:json_api</span></code></pre></td></tr></table></div></div><p>By setting the adapter to <code>:json_api</code>, our API will produce and consume JSON
formatted in the JSON API spec. If we execute the same API call that we did
earlier, we will get a newly formatted JSON:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">33
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;data&#34;</span>: [
    {
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;first-name&#34;</span>: <span style=color:#00afaf>&#34;ilija&#34;</span>,
        <span style=color:#0087ff>&#34;last-name&#34;</span>: <span style=color:#00afaf>&#34;eftimov&#34;</span>,
        <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>
      },
      <span style=color:#0087ff>&#34;relationships&#34;</span>: {
        <span style=color:#0087ff>&#34;articles&#34;</span>: {
          <span style=color:#0087ff>&#34;data&#34;</span>: [
            {
              <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
              <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
            },
            {
              <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;2&#34;</span>,
              <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
            }
          ]
        }
      },
      <span style=color:#0087ff>&#34;links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: {
          <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1&#34;</span>
        }
      }
    }
  ]
}</code></pre></td></tr></table></div></div><p>As you can notice, the JSON that we get back has a completely different
structure compared to what we have before. The reason is that the JSON API
adapter that we use now formats the JSON in the JSON API Spec format.</p><p>Another cool thing about the JSON API adapter is that it allows us to specify
links very explicitly, with a very nice DSL:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>class</span> <span style=color:#0087ff>AuthorSerializer</span> &lt; <span style=color:#d75f00>ActiveModel</span>::<span style=color:#d75f00>Serializer</span>
  attributes <span style=color:#00afaf>:id</span>, <span style=color:#00afaf>:first_name</span>, <span style=color:#00afaf>:last_name</span>, <span style=color:#00afaf>:created_at</span>, <span style=color:#00afaf>:updated_at</span>
  has_many <span style=color:#00afaf>:articles</span>
  type <span style=color:#00afaf>:author</span>

  link <span style=color:#00afaf>:self</span> <span style=color:#5f8700>do</span>
    href author_path(object)
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Also, we do not have to specify the <code>links</code> as an attribute and we can remove
the <code>include</code> line that mixed-in Rails' url helpers in our serializer. If we
call the <code>/authors</code> endpoint with a <code>GET</code> request again, we will see an
extended JSON, that again complies with the JSON API Spec:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">33
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;data&#34;</span>: [
    {
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;first-name&#34;</span>: <span style=color:#00afaf>&#34;ilija&#34;</span>,
        <span style=color:#0087ff>&#34;last-name&#34;</span>: <span style=color:#00afaf>&#34;eftimov&#34;</span>,
        <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>
      },
      <span style=color:#0087ff>&#34;relationships&#34;</span>: {
        <span style=color:#0087ff>&#34;articles&#34;</span>: {
          <span style=color:#0087ff>&#34;data&#34;</span>: [
            {
              <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
              <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
            },
            {
              <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;2&#34;</span>,
              <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
            }
          ]
        }
      },
      <span style=color:#0087ff>&#34;links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: {
          <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1&#34;</span>
        }
      }
    }
  ]
}</code></pre></td></tr></table></div></div><h2 id=including-additional-resources>Including additional resources<a hidden class=anchor aria-hidden=true href=#including-additional-resources>#</a></h2><p>Since AMS is an awesome gem, it allows you to include additional resources by
including them in the controllers:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>class</span> <span style=color:#0087ff>AuthorsController</span> &lt; <span style=color:#d75f00>ApplicationController</span>
  <span style=color:#5f8700>def</span> <span style=color:#0087ff>index</span>
    render <span style=color:#00afaf>json</span>: <span style=color:#d75f00>Author</span>.all, <span style=color:#5f8700>include</span>: <span style=color:#00afaf>&#39;articles&#39;</span>
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>By including the <code>Article</code> association of on the <code>Author</code> model, we are able to
extend the JSON result with the associated articles for each of the users:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">52
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">53
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">54
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">55
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">56
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">57
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">58
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">59
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">60
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">61
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">62
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">63
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">64
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">65
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">66
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">67
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">68
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">69
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">70
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">71
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">72
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">73
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">74
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">75
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">76
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">77
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">78
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">79
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">80
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">81
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;data&#34;</span>: [
    {
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;first-name&#34;</span>: <span style=color:#00afaf>&#34;ilija&#34;</span>,
        <span style=color:#0087ff>&#34;last-name&#34;</span>: <span style=color:#00afaf>&#34;eftimov&#34;</span>,
        <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>
      },
      <span style=color:#0087ff>&#34;relationships&#34;</span>: {
        <span style=color:#0087ff>&#34;articles&#34;</span>: {
          <span style=color:#0087ff>&#34;data&#34;</span>: [
            {
              <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
              <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
            },
            {
              <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;2&#34;</span>,
              <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
            }
          ]
        }
      },
      <span style=color:#0087ff>&#34;links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: {
          <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1&#34;</span>
        }
      }
    }
  ],
  <span style=color:#0087ff>&#34;included&#34;</span>: [
    {
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum dolor sit amet&#34;</span>,
        <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>
      },
      <span style=color:#0087ff>&#34;relationships&#34;</span>: {
        <span style=color:#0087ff>&#34;author&#34;</span>: {
          <span style=color:#0087ff>&#34;data&#34;</span>: {
            <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
            <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>
          }
        }
      },
      <span style=color:#0087ff>&#34;links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: {
          <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1/articles/1&#34;</span>
        }
      }
    },
    {
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;2&#34;</span>,
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;A princess of Mars&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had&#34;</span>,
        <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>
      },
      <span style=color:#0087ff>&#34;relationships&#34;</span>: {
        <span style=color:#0087ff>&#34;author&#34;</span>: {
          <span style=color:#0087ff>&#34;data&#34;</span>: {
            <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
            <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>
          }
        }
      },
      <span style=color:#0087ff>&#34;links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: {
          <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1/articles/2&#34;</span>
        }
      }
    }
  ]
}</code></pre></td></tr></table></div></div><p>Although this is quite nice, beware that this introduces N+1 queries for every
resource that we fetch. That&rsquo;s why, usually <code>index</code> actions return only the
requested resources, while <code>show</code> actions tend to include some additional
resources:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>class</span> <span style=color:#0087ff>AuthorsController</span> &lt; <span style=color:#d75f00>ApplicationController</span>
  <span style=color:#5f8700>def</span> <span style=color:#0087ff>index</span>
    render <span style=color:#00afaf>json</span>: <span style=color:#d75f00>Author</span>.all
  <span style=color:#5f8700>end</span>

  <span style=color:#5f8700>def</span> <span style=color:#0087ff>show</span>
    author = <span style=color:#d75f00>Author</span>.find(params[<span style=color:#00afaf>:id</span>])
    render <span style=color:#00afaf>json</span>: author, <span style=color:#5f8700>include</span>: <span style=color:#00afaf>:articles</span>
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>This will add all of the articles found for the author that we requested:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">52
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">53
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">54
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">55
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">56
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">57
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">58
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">59
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">60
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">61
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">62
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">63
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">64
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">65
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">66
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">67
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">68
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">69
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">70
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">71
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">72
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">73
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">74
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">75
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">76
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">77
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">78
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">79
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;data&#34;</span>: {
    <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
    <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>,
    <span style=color:#0087ff>&#34;attributes&#34;</span>: {
      <span style=color:#0087ff>&#34;first-name&#34;</span>: <span style=color:#00afaf>&#34;ilija&#34;</span>,
      <span style=color:#0087ff>&#34;last-name&#34;</span>: <span style=color:#00afaf>&#34;eftimov&#34;</span>,
      <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>,
      <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T20:52:12.804Z&#34;</span>
    },
    <span style=color:#0087ff>&#34;relationships&#34;</span>: {
      <span style=color:#0087ff>&#34;articles&#34;</span>: {
        <span style=color:#0087ff>&#34;data&#34;</span>: [
          {
            <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
            <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
          },
          {
            <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;2&#34;</span>,
            <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>
          }
        ]
      }
    },
    <span style=color:#0087ff>&#34;links&#34;</span>: {
      <span style=color:#0087ff>&#34;self&#34;</span>: {
        <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1&#34;</span>
      }
    }
  },
  <span style=color:#0087ff>&#34;included&#34;</span>: [
    {
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;Lorem ipsum dolor sit amet&#34;</span>,
        <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-25T22:25:51.874Z&#34;</span>
      },
      <span style=color:#0087ff>&#34;relationships&#34;</span>: {
        <span style=color:#0087ff>&#34;author&#34;</span>: {
          <span style=color:#0087ff>&#34;data&#34;</span>: {
            <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
            <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>
          }
        }
      },
      <span style=color:#0087ff>&#34;links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: {
          <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1/articles/1&#34;</span>
        }
      }
    },
    {
      <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;2&#34;</span>,
      <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>,
      <span style=color:#0087ff>&#34;attributes&#34;</span>: {
        <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;A princess of Mars&#34;</span>,
        <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had&#34;</span>,
        <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>,
        <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>
      },
      <span style=color:#0087ff>&#34;relationships&#34;</span>: {
        <span style=color:#0087ff>&#34;author&#34;</span>: {
          <span style=color:#0087ff>&#34;data&#34;</span>: {
            <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
            <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>
          }
        }
      },
      <span style=color:#0087ff>&#34;links&#34;</span>: {
        <span style=color:#0087ff>&#34;self&#34;</span>: {
          <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1/articles/2&#34;</span>
        }
      }
    }
  ]
}</code></pre></td></tr></table></div></div><p>As you can notice, because we supplied the <code>has_many</code> association in the
serializer, AMS knows to utilise the correct serializer for each of the
included resources. This adds the same structure to the included resources and
the requested resource, which makes the result consistent and parsing this JSON
much easier.</p><h2 id=navigating-resources>Navigating resources<a hidden class=anchor aria-hidden=true href=#navigating-resources>#</a></h2><p>Now, to actually see how easy it is to navigate through resources, let&rsquo;s
implement the <code>ArticlesController#show</code> action as well:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#5f8700>class</span> <span style=color:#0087ff>ArticlesController</span> &lt; <span style=color:#d75f00>ApplicationController</span>

  <span style=color:#5f8700>def</span> <span style=color:#0087ff>show</span>
    article = <span style=color:#d75f00>Article</span>.find_by(<span style=color:#00afaf>author_id</span>: params[<span style=color:#00afaf>:author_id</span>], <span style=color:#0087ff>id</span>: params[<span style=color:#00afaf>:id</span>])
    render <span style=color:#00afaf>json</span>: article
  <span style=color:#5f8700>end</span>
<span style=color:#5f8700>end</span></code></pre></td></tr></table></div></div><p>Super simple - we find the <code>Article</code> by the <code>author_id</code> and the <code>id</code> params and
render it as a JSON. If we call <code>GET /authors/1/articles/2</code>, we will get the
JSON API representation of the <code>Article</code> object:</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#454545">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#0087ff>&#34;data&#34;</span>: {
    <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;2&#34;</span>,
    <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;article&#34;</span>,
    <span style=color:#0087ff>&#34;attributes&#34;</span>: {
      <span style=color:#0087ff>&#34;title&#34;</span>: <span style=color:#00afaf>&#34;A princess of Mars&#34;</span>,
      <span style=color:#0087ff>&#34;body&#34;</span>: <span style=color:#00afaf>&#34;His reference to the great games of which I had heard so much while among the Tharks convinced me that I had but jumped from purgatory into gehenna. After a few more words with the female, during which she assured him that I was now fully fit to travel, the jed ordered that we mount and ride after the main column. I was strapped securely to as wild and unmanageable a thoat as I had&#34;</span>,
      <span style=color:#0087ff>&#34;created-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>,
      <span style=color:#0087ff>&#34;updated-at&#34;</span>: <span style=color:#00afaf>&#34;2016-06-26T00:20:09.388Z&#34;</span>
    },
    <span style=color:#0087ff>&#34;relationships&#34;</span>: {
      <span style=color:#0087ff>&#34;author&#34;</span>: {
        <span style=color:#0087ff>&#34;data&#34;</span>: {
          <span style=color:#0087ff>&#34;id&#34;</span>: <span style=color:#00afaf>&#34;1&#34;</span>,
          <span style=color:#0087ff>&#34;type&#34;</span>: <span style=color:#00afaf>&#34;author&#34;</span>
        }
      }
    },
    <span style=color:#0087ff>&#34;links&#34;</span>: {
      <span style=color:#0087ff>&#34;self&#34;</span>: {
        <span style=color:#0087ff>&#34;href&#34;</span>: <span style=color:#00afaf>&#34;/authors/1/articles/2&#34;</span>
      }
    }
  }
}</code></pre></td></tr></table></div></div><p>If you use <a href=https://www.getpostman.com/>Postman</a>, which I really enjoy using,
or any other API browser to test the endpoints you could see how easy it is to
navigate the resources:</p><p><img src=/postman-hateoas-1.png alt></p><p>Just link in the web browser, you know the entry point
<code>localhost:3000/authors</code>. From there you can click on the <code>links</code> property of
the <code>Author</code> and get the single <code>Author</code> resource:</p><p><img src=/postman-hateoas-2.png alt></p><p>By seeing the resource with all of it&rsquo;s included resources, then you can click
on any of the links on the included <code>Article</code> resources, and see their
attributes in JSON format:</p><p><img src=/postman-hateoas-3.png alt></p><p>This is what essentially HATEOAS means - navigating and interacting with
resources via the endpoints that are provided in the JSON representation of the
resources.</p><h2 id=outro>Outro<a hidden class=anchor aria-hidden=true href=#outro>#</a></h2><p>As you can see, to understand and learn what Hypermedia As The Engine Of
Application State is, there is quite a bit of context that we need to get in
our heads. Although all of this sometimes can appear as quite complex, Rails
makes implementing HATEOAS APIs quite easy, as you could see in the examples.
Sure, there is more to hypermedia controls, but these examples should be more
than enough to get your feet wet.</p><p>Also, the HATEOAS concept seems quite complex on the surface, but when you
deconstruct it it&rsquo;s quite simple, because we have already seen the same
behaviour in web browsers. The issue of why it seems quite complex is because
we haven&rsquo;t even thought about normal web sites like RESTful APIs, and
vice-versa.</p><p>If you want to see the actual implementation of the endpoints that we worked
with in this article, you can check <a href=https://github.com/fteem/hateoas>this
repo</a> on Github.</p><h2 id=additional-reading>Additional reading<a hidden class=anchor aria-hidden=true href=#additional-reading>#</a></h2><ul><li><a href=https://tools.ietf.org/html/rfc5988>Web Linking - RFC 5988</a></li><li><a href=http://timelessrepo.com/haters-gonna-hateoas>Haters gonna HATEOAS</a></li><li><a href=http://martinfowler.com/articles/richardsonMaturityModel.html>Richardson Maturity Model, steps toward the glory of REST</a></li><li><a href=http://restcookbook.com/Miscellaneous/richardsonmaturitymodel/>What is the Richardson Maturity Model?</a></li><li><a href=https://en.wikipedia.org/wiki/Media_type>Media type</a></li><li><a href=https://tools.ietf.org/html/rfc7231#section-5.3>Content negotiation</a></li></ul><section class=subscribe><b>Liked this article?</b> <a href=/newsletter>Subscribe to my
newsletter</a> and get my fresh posts in your inbox. It's short and sweet,
going out monthly to over 1,000 subscribers.</section></div><footer class=post-footer><ul class=post-tags><li><a href=https://ieftimov.com/tags/http/>http</a></li><li><a href=https://ieftimov.com/tags/apis/>APIs</a></li><li><a href=https://ieftimov.com/tags/hateoas/>HATEOAS</a></li></ul><nav class=paginav><a class=prev href=https://ieftimov.com/post/when-you-delete-an-api-resource/><span class=title>« Prev Page</span><br><span>What happens when you DELETE a resource?</span></a>
<a class=next href=https://ieftimov.com/post/practicality-designing-describing-apis/><span class=title>Next Page »</span><br><span>The practicality of designing and describing your APIs</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Sprinkle some HATEOAS on your Rails APIs on twitter" href="https://twitter.com/intent/tweet/?text=Sprinkle%20some%20HATEOAS%20on%20your%20Rails%20APIs&url=https%3a%2f%2fieftimov.com%2fpost%2fsprinkle-some-hateoas-on-rails-apis%2f&hashtags=HTTP%2cAPIs%2cHATEOAS"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Sprinkle some HATEOAS on your Rails APIs on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fieftimov.com%2fpost%2fsprinkle-some-hateoas-on-rails-apis%2f&title=Sprinkle%20some%20HATEOAS%20on%20your%20Rails%20APIs&summary=Sprinkle%20some%20HATEOAS%20on%20your%20Rails%20APIs&source=https%3a%2f%2fieftimov.com%2fpost%2fsprinkle-some-hateoas-on-rails-apis%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Sprinkle some HATEOAS on your Rails APIs on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fieftimov.com%2fpost%2fsprinkle-some-hateoas-on-rails-apis%2f&title=Sprinkle%20some%20HATEOAS%20on%20your%20Rails%20APIs"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Sprinkle some HATEOAS on your Rails APIs on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fieftimov.com%2fpost%2fsprinkle-some-hateoas-on-rails-apis%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Sprinkle some HATEOAS on your Rails APIs on whatsapp" href="https://api.whatsapp.com/send?text=Sprinkle%20some%20HATEOAS%20on%20your%20Rails%20APIs%20-%20https%3a%2f%2fieftimov.com%2fpost%2fsprinkle-some-hateoas-on-rails-apis%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Sprinkle some HATEOAS on your Rails APIs on telegram" href="https://telegram.me/share/url?text=Sprinkle%20some%20HATEOAS%20on%20your%20Rails%20APIs&url=https%3a%2f%2fieftimov.com%2fpost%2fsprinkle-some-hateoas-on-rails-apis%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>Copyright 2021 © Ilija Eftimov</span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>