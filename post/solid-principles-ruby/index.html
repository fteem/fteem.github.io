<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>SOLID Principles in Ruby - Ilija Eftimov</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="SOLID Principles in Ruby" />
<meta property="og:description" content="Regardless of your knowledge level, as a programmer you love to write awesome code. It&#39;s what we do. We like it and we do it every single day. But, we all know that writing awesome code is not easy at all. So, how can we improve the code we produce every day?
An awareness (or a reminder!) of SOLID principles is beneficial here. SOLID is a group of five principles that when applied correctly can help us produce better code." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ieftimov.com/post/solid-principles-ruby/" />
<meta property="article:published_time" content="2014-06-05T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SOLID Principles in Ruby"/>
<meta name="twitter:description" content="Regardless of your knowledge level, as a programmer you love to write awesome code. It&#39;s what we do. We like it and we do it every single day. But, we all know that writing awesome code is not easy at all. So, how can we improve the code we produce every day?
An awareness (or a reminder!) of SOLID principles is beneficial here. SOLID is a group of five principles that when applied correctly can help us produce better code."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/main.css" />
		<link rel="stylesheet" type="text/css" href="https://ieftimov.com/css/overrides.css" />
	

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://ieftimov.com/js/main.js"></script><script src="https://ieftimov.com/js/tooltip.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://ieftimov.com/">
				<img src="https://ieftimov.com/avatar.png" alt="Ilija Eftimov" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://ieftimov.com/">Ilija Eftimov</a></h1>
	<div class="site-description"><p>A human, interested in building products and software.</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/fteem" title="Github"><i data-feather="github"></i></a></li><li><a href="https://twitter.com/fteem" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://www.linkedin.com/in/ieftimov" title="Linkedin"><i data-feather="linkedin"></i></a></li><li><a href="mailto:blog@ieftimov.com" title="Email"><i data-feather="mail"></i></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/categories/testing-in-go">Testing in Go</a>
			</li>
			
			<li>
				<a href="/posts">Archive</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="https://forms.gle/orfXK5jh1LRaiFzo8">Suggest a topic</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">05</span>
							<span class="rest">Jun 2014</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">SOLID Principles in Ruby</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Regardless of your knowledge level, as a programmer you love to write awesome
code. It's what we do. We like it and we do it every single day.  But, we all
know that writing awesome code is not easy at all. So, how can we improve the
code we produce every day?</p>
<p>An awareness (or a reminder!) of SOLID principles is beneficial here. SOLID is
a group of five principles that when <em>applied correctly</em> can help us produce
better code.</p>
<h4 id="so-what-are-the-solid-principles">So, what are the SOLID principles?</h4>
<p>SOLID is a mnemonic acronym coined by
<a href="http://en.wikipedia.org/wiki/Robert_C._Martin">Uncle Bob</a> back in the early
2000s. It represents a group of five principles:</p>
<ul>
<li><strong>S</strong>ingle Responsibility Principle</li>
<li><strong>O</strong>pen/Closed Principle</li>
<li><strong>L</strong>iskov Substitution Principle</li>
<li><strong>I</strong>nterface Segregation Principle</li>
<li><strong>D</strong>ependency Inversion Principle</li>
</ul>
<p>Sounds good? Great. Let's take a look at each of these principles.</p>
<!-- raw HTML omitted -->
<p>In my opinion, this is the easiest principle to understand. What SRP says is:</p>
<blockquote>
<p>Every class should have a single responsibility, and that responsibility
should be entirely encapsulated by the class.</p>
</blockquote>
<p>What does this mean? Basically, every class in your app <strong>must</strong> have a single
responsibility. Easy as that. The best way to detect if your class obeys this
principle is to answer this question:</p>
<blockquote>
<p><strong>What does this class do?</strong></p>
</blockquote>
<p>If your answer contains the word <strong>AND</strong>, then your class does not obey the SRP.</p>
<p>Lets see a quick example. There's the Student class and every student has
grades for different terms.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Student</span>
  <span style="font-weight:bold">attr_accessor</span> <span style="color:#b84">:first_term_home_work</span>, <span style="color:#b84">:first_term_test</span>,
    <span style="color:#b84">:first_term_paper</span>
  <span style="font-weight:bold">attr_accessor</span> <span style="color:#b84">:second_term_home_work</span>, <span style="color:#b84">:second_term_test</span>,
    <span style="color:#b84">:second_term_paper</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">first_term_grade</span>
    (first_term_home_work <span style="font-weight:bold">+</span> first_term_test <span style="font-weight:bold">+</span> first_term_paper) <span style="font-weight:bold">/</span> <span style="color:#099">3</span>
  <span style="font-weight:bold"></span><span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">second_term_grade</span>
    (second_term_home_work <span style="font-weight:bold">+</span> second_term_test <span style="font-weight:bold">+</span> second_term_paper) <span style="font-weight:bold">/</span> <span style="color:#099">3</span>
  <span style="font-weight:bold"></span><span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>Some of you may already be thinking &ldquo;that is wrong sir!&quot;, some of you may not.
Regardless of that, yes, this <strong>does not</strong> obey the SRP. The reason is that the
class Student contains the logic that calculates the average grade for each
term. The responsibility of <code>Student</code> is to hold info/logic about the
student, not the grades. The logic that calculates the grades should be part of
a class <code>Grade</code>, not <code>Student</code>.</p>
<p>Let's refactor the code.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Student</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">initialize</span>
    @terms <span style="font-weight:bold">=</span> <span style="font-weight:bold">[</span>
      <span style="color:#008080">Grade</span><span style="font-weight:bold">.</span>new(<span style="color:#b84">:first</span>),
      <span style="color:#008080">Grade</span><span style="font-weight:bold">.</span>new(<span style="color:#b84">:second</span>)
      <span style="font-weight:bold">]</span>
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">first_term_grade</span>
    term(<span style="color:#b84">:first</span>)<span style="font-weight:bold">.</span>grade
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">second_term_grade</span>
    term(<span style="color:#b84">:second</span>)<span style="font-weight:bold">.</span>grade
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">private</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">term</span> reference
    @terms<span style="font-weight:bold">.</span>find {<span style="font-weight:bold">|</span>term<span style="font-weight:bold">|</span> term<span style="font-weight:bold">.</span>name <span style="font-weight:bold">==</span> reference}
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Grade</span>
  <span style="font-weight:bold">attr_reader</span> <span style="color:#b84">:name</span>, <span style="color:#b84">:home_work</span>, <span style="color:#b84">:test</span>, <span style="color:#b84">:paper</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">initialize</span>(<span style="color:#999">name</span>)
    @name      <span style="font-weight:bold">=</span> <span style="color:#999">name</span>
    @home_work <span style="font-weight:bold">=</span> <span style="color:#099">0</span>
    <span style="font-weight:bold"></span>@test      <span style="font-weight:bold">=</span> <span style="color:#099">0</span>
    <span style="font-weight:bold"></span>@paper     <span style="font-weight:bold">=</span> <span style="color:#099">0</span>
  <span style="font-weight:bold"></span><span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">grade</span>
    (home_work <span style="font-weight:bold">+</span> <span style="color:#999">test</span> <span style="font-weight:bold">+</span> paper) <span style="font-weight:bold">/</span> <span style="color:#099">3</span>
  <span style="font-weight:bold"></span><span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>You can see that now <code>Grade</code> holds the logic for calculation of the grade
and Student only stores the grades into a collection. Now this complies to the
SRP, because, every class has it's own responsibility.</p>
<!-- raw HTML omitted -->
<p>The Open/closed principle (OCP) is a principle whose definition is:</p>
<blockquote>
<p>One software entity (class/module) must be open for extension but closed for modification.</p>
</blockquote>
<p>What does this mean? Once a class implements the current scope of requirements,
the implementation should not need to change in order to fulfil future
requirements.</p>
<p>It doesn't make sense? Let's take a look at a quick example.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">MyLogger</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">initialize</span>
    @format_string <span style="font-weight:bold">=</span> <span style="color:#b84">&#34;</span><span style="color:#b84">%s: %s</span><span style="color:#b84">\n</span><span style="color:#b84">&#34;</span>
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">log</span>(msg)
    <span style="color:#008080">STDOUT</span><span style="font-weight:bold">.</span>write @format_string <span style="font-weight:bold">%</span> <span style="font-weight:bold">[</span><span style="color:#008080">Time</span><span style="font-weight:bold">.</span>now, msg<span style="font-weight:bold">]</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>Simple logger class right? It has a format string and sends the current time
and the message to STDOUT. Cool, simple enough. Lets test it:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">irb&gt; MyLogger.new.log<span style="font-weight:bold">(</span><span style="color:#b84">&#39;test!&#39;</span><span style="font-weight:bold">)</span>
<span style="font-weight:bold">=</span>&gt; 2014-04-25 16:16:32 +0200: test!</code></pre></div>
<p>Awesome. But, what would happen if someone in the future needs the logger to
prepend the string &ldquo;[LOG]&rdquo; to the log message, so the output would look like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="font-weight:bold">[</span>LOG<span style="font-weight:bold">]</span> 2014-04-25 16:16:32 +0200: MyLogger calling!</code></pre></div>
<p>For example, a programmer that does not know about the OCP can possibly do this
change:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">MyLogger</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">initialize</span>
    @format_string <span style="font-weight:bold">=</span> <span style="color:#b84">&#34;</span><span style="color:#b84">[LOG] %s: %s</span><span style="color:#b84">\n</span><span style="color:#b84">&#34;</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>And the output of the new MyLogger class would be:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">irb&gt; MyLogger.new.log<span style="font-weight:bold">(</span><span style="color:#b84">&#39;test!&#39;</span><span style="font-weight:bold">)</span>
<span style="font-weight:bold">=</span>&gt; <span style="font-weight:bold">[</span>LOG<span style="font-weight:bold">]</span> 2014-04-25 16:16:32 +0200: test!</code></pre></div>
<p>Everything looks good, right? But, wait a second? Does it?</p>
<p>Think about this - if this was a core class of an app, the change we introduced
to the <code>format_string</code> would break the functionality of that classes that
rely on the <code>MyLogger</code> class. There's the possibility that a whole world
out there relies on the former funcionality of the class, but now, that we
changed it, a lot of things can break. This is a violation of the OCP and it is
<strong>bad</strong>!</p>
<p>So, what is the good way to do it? Inheritance! Or object composition!</p>
<p>Let's see an example that uses inheritance:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">NewCoolLogger</span> <span style="font-weight:bold">&lt;</span> <span style="color:#008080">MyLogger</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">initialize</span>
    @format_string <span style="font-weight:bold">=</span> <span style="color:#b84">&#34;</span><span style="color:#b84">[LOG] %s: %s</span><span style="color:#b84">\n</span><span style="color:#b84">&#34;</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">irb&gt; NewCoolLogger.new.log<span style="font-weight:bold">(</span><span style="color:#b84">&#39;test!&#39;</span><span style="font-weight:bold">)</span>
<span style="font-weight:bold">=</span>&gt; <span style="font-weight:bold">[</span>LOG<span style="font-weight:bold">]</span> 2014-04-25 16:16:32 +0200: test!</code></pre></div>
<p>Nice, works as expected! What about the functionality of <code>MyLogger</code>?</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">irb&gt; MyLogger.new.log<span style="font-weight:bold">(</span><span style="color:#b84">&#39;test!&#39;</span><span style="font-weight:bold">)</span>
<span style="font-weight:bold">=</span>&gt; 2014-04-25 16:16:32 +0200: test!</code></pre></div>
<p>Great! So, what did we just do? We extended the <code>MyLogger</code> class and
created a brand new class called <code>NewCoolLogger</code> that extends the former
class. Now the code that relies on the functionality of the old logger will not
break due to the changes we introduced. The old logger will work just like it
did before and the new one will provide the new functionality that the
programmer wanted.</p>
<p>Also, I mentioned <em>object composition</em>. Take this refactor in cosideration:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">MyLogger</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">log</span>(msg, <span style="color:#b84">formatter</span>: <span style="color:#008080">MyLogFormatter</span><span style="font-weight:bold">.</span>new)
    <span style="color:#008080">STDOUT</span><span style="font-weight:bold">.</span>write formatter<span style="font-weight:bold">.</span>format(msg)
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>You can notice that the log method receives an optional parameter called
<code>formatter</code>.  The format of the log string is responsibility of the
<code>MyLogFormatter</code> class not the logger class itself. This is good because
now <code>MyLogger#log</code> can accept different formatter classes that will set the
format of the log message. For example, you can create <code>ErrorLogFormatter</code>
that will prepend <code>[ERROR]</code> to the log message but <code>MyLogger</code> will not
care because all it needs is a string that it will send to STDOUT.</p>
<!-- raw HTML omitted -->
<h4 id="liskov-substitution-principle">Liskov substitution principle</h4>
<p><a href="http://en.wikipedia.org/wiki/Barbara_Liskov">Barbara Liskov</a> defined the principle within these lines:</p>
<blockquote>
<p>If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).</p>
</blockquote>
<p>Honestly, I found this definition pretty hard to understand. So, after some
thinking, this is what it boils down to:</p>
<p>There is a class <code>Bird</code>. And there are two objects, <code>obj1</code> and
<code>obj2</code>. The class of <code>obj1</code> is <code>Duck</code> which is a child-class of
<code>Bird</code>. Let's say we discover that <code>obj2</code>'s class is <code>Pigeon</code>,
which is also a child-class of <code>Bird</code>. Liskov substitution principle states
that in this situation, when <code>obj2</code> has a type of <code>Bird</code> sub-class and
<code>obj1</code> which is of class <code>Duck</code> which is also a sub-type of <code>Bird</code>,
I should be able to treat <code>obj1</code> and <code>obj2</code> in the same way - as
<code>Bird</code>s.</p>
<p>Still confusing? Take a look at the example below.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Person</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">greet</span>
    <span style="color:#999">puts</span> <span style="color:#b84">&#34;</span><span style="color:#b84">Hey there!</span><span style="color:#b84">&#34;</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Student</span> <span style="font-weight:bold">&lt;</span> <span style="color:#008080">Person</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">years_old</span>(age)
    <span style="font-weight:bold">return</span> <span style="color:#b84">&#34;</span><span style="color:#b84">I&#39;m </span><span style="color:#b84">#{</span>age<span style="color:#b84">}</span><span style="color:#b84"> years old.</span><span style="color:#b84">&#34;</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

person <span style="font-weight:bold">=</span> <span style="color:#008080">Person</span><span style="font-weight:bold">.</span>new
student <span style="font-weight:bold">=</span> <span style="color:#008080">Student</span><span style="font-weight:bold">.</span>new

<span style="color:#998;font-style:italic"># What LSP says is if I know the interface of person, I need to be able to</span>
<span style="color:#998;font-style:italic"># guess the interface of student because the Student class is a subtype of</span>
<span style="color:#998;font-style:italic"># the Person class.</span>
student<span style="font-weight:bold">.</span>greet
<span style="color:#998;font-style:italic"># returns &#34;Hey there!&#34;</span></code></pre></div>
<p>Hope that explained LSP.</p>
<!-- raw HTML omitted -->
<h4 id="interface-segregation-principle">Interface segregation principle</h4>
<p>The interface-segregation principle (ISP) states that:</p>
<blockquote>
<p>No client should be forced to depend on methods it does not use.</p>
</blockquote>
<p>Simple as that. Lets see some code examples and explain them.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Computer</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">turn_on</span>
    <span style="color:#998;font-style:italic"># turns on the computer</span>
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">type</span>
    <span style="color:#998;font-style:italic"># type on the keyboard</span>
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">change_hard_drive</span>
    <span style="color:#998;font-style:italic"># opens the computer body</span>
    <span style="color:#998;font-style:italic"># and changes the hard drive</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Programmer</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">use_computer</span>
    @computer<span style="font-weight:bold">.</span>turn_on
    @computer<span style="font-weight:bold">.</span>type
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Technician</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">fix_computer</span>
    @computer<span style="font-weight:bold">.</span>change_hard_drive
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>In this example, there are <code>Computer</code>, <code>Programmer</code> and
<code>Technician</code> classes. Both, <code>Programmer</code> and <code>Technician</code> use the
<code>Computer</code> in a different way. The programmer uses the computer for typing,
but the technician knows how to change the computer hard drive. What Interface
Segregation Principle (ISP) enforces is that one class should not depend on
methods it does not use.
In our case, <code>Programmer</code> is unnecessarily coupled to the
<code>Computer#change_hard_drive</code> method because it does not use it, but the
state changes that this method enforces can affect the <code>Programmer</code>. Let's
refactor the code to obey the LSP.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Computer</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">turn_on</span>
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">type</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">ComputerInternals</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">change_hard_drive</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Programmer</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">use_computer</span>
    @computer<span style="font-weight:bold">.</span>turn_on
    @computer<span style="font-weight:bold">.</span>type
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Technician</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">fix_computer</span>
    @computer_internals<span style="font-weight:bold">.</span>change_hard_drive
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>After this refactor the <code>Technician</code> uses a different object from the type
<code>ComputerInternals</code> which is isolated from the state of the <code>Computer</code>.
The state of the <code>Computer</code> object can be influenced by the
<code>Programmer</code> but the changes wont affect the <code>Technician</code> in any way.</p>
<!-- raw HTML omitted -->
<p>Dependency inversion principle refers to a specific form of decoupling software
modules. It's definition has two parts:</p>
<blockquote>
<ol>
<li>High-level modules should not depend on low-level modules. Both should depend on abstractions.</li>
</ol>
</blockquote>
<ol start="2">
<li>Abstractions should not depend upon details. Details should depend upon abstractions.</li>
</ol>
<p>I know that this might be a bit confusing. But, before we jump to a example I
want to make sure that you <strong>must not mix</strong> <em>Dependecy Inversion Principle</em>
with <em>Dependency Injection</em>. The later is a technique (or pattern) and the
former is the principle.</p>
<p>Having that said, lets see the example:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Report</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">initialize</span>
    @body <span style="font-weight:bold">=</span> <span style="color:#b84">&#34;</span><span style="color:#b84">whatever</span><span style="color:#b84">&#34;</span>
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">print</span>
    <span style="color:#008080">XmlFormatter</span><span style="font-weight:bold">.</span>new<span style="font-weight:bold">.</span>generate @body
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">XmlFormatter</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">generate</span>(body)
    <span style="color:#998;font-style:italic"># convert the body argument into XML</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>The <code>Report</code> class is used to generate an XML report. In it's initializer
we setup the report and its body. The <code>print</code> method uses the
<code>XmlFormatter</code> class to convert the body of the report to XML. Easy as
that.</p>
<p>Let's think a bit about this class. Look at it's name - <code>Report</code>. It's a
generic name and it tells us that it will return a report of some kind, but, it
doesnt say much about it's format. In fact, in our example, we can easily
rename our class to <code>XmlReport</code> since we know the implementation details.
But insead of making it very specific, let's think about abstracting this code.</p>
<p>Right now, our class is dependant on the <code>XmlFormatter</code> class and it's
interface i.e. <code>generate</code>. <code>Report</code> right now is dependent on a detail,
not on abstraction. It knows that there must be a class <code>XmlFormatter</code> so
it can work. Also, another question - what would happen if we wanted an CSV
report? Or a JSON report? We'd have to have multiple methods like
<code>print_xml</code>, <code>print_csv</code> or <code>print_json</code>. This means that our class
right now is very tied to the details, it knows about the formatter class type
instead of knowing just how to use it (abstraction).</p>
<p>Let's refactor it:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Report</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">initialize</span>
    @body <span style="font-weight:bold">=</span> <span style="color:#b84">&#34;</span><span style="color:#b84">whatever</span><span style="color:#b84">&#34;</span>
  <span style="font-weight:bold">end</span>

  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">print</span>(formatter)
    formatter<span style="font-weight:bold">.</span>generate @body
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">XmlFormatter</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">generate</span>(body)
    <span style="color:#998;font-style:italic"># convert the body argument into XML</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>Look at the <code>print</code> method now. It knows that it needs a formatter, but it
only cares about it's interface. To be more specific, it only cares that that
formatter has a method called <code>generate</code>. How is this better? Well, if we
wanted CSV reports, all we would need is to add the following class:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">class</span> <span style="color:#458;font-weight:bold">CSVFormatter</span>
  <span style="font-weight:bold">def</span> <span style="color:#458;font-weight:bold"></span><span style="font-weight:bold"></span><span style="color:#900;font-weight:bold">generate</span>(body)
    <span style="color:#998;font-style:italic"># convert the body argument into CSV</span>
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>The <code>Report#print</code> method would accept a <code>CSVFormatter</code> object as a
parameter which would convert the report body into a CSV string.</p>
<!-- raw HTML omitted -->
<p>That pretty much sums up all of the five SOLID principles. All of our
refactoring examples are very basic and we just scratched the surface. I'm sure
that in your carreer as a programmer you'd come on to much more complex
problems. But, be assured that having <strong>SOLID</strong> foundations can definitely help
you to write better code that is easier to maintain.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/services">services</a></li>
							
							<li><a href="/tags/provider">provider</a></li>
							
						</ul>
					
				
			</div><div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'eftimov';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the </a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> Copyright © 2014 - 2020 Ilija Eftimov |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-11264459-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
