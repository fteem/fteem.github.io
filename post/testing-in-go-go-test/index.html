<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Testing in Go: go test - Ilija Eftimov ⚡️</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Ilija Eftimov" />
  <meta name="description" content="As I was going down the stairs I remember feeling the temperature dropping. It was an astounding experience descending towards the basement in my grandparents&amp;rsquo; house – it felt cooler and quieter. The light was warm and dimmed, with creepy shadows dropping behind the old furniture that was serving its last years before getting disposed to the city cleaning service.
One of the rooms in the basement was my grandfather’s workshop." />

  <meta name="keywords" content="Software, Programming, Computer Science, Products" />






<meta name="generator" content="Hugo 0.55.6" />


<link rel="canonical" href="https://ieftimov.com/post/testing-in-go-go-test/" />



<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.ec807d8b802a40889537c26e014f733206312ea440d42e1f0dabed80918de1ac.css" integrity="sha256-7IB9i4AqQIiVN8JuAU9zMgYxLqRA1C4fDavtgJGN4aw=" media="screen" crossorigin="anonymous">




<link rel="stylesheet" href="/css/overrides.css">

<link rel="stylesheet" href="/css/subscribe.css">


<meta property="og:title" content="Testing in Go: go test" />
<meta property="og:description" content="As I was going down the stairs I remember feeling the temperature dropping. It was an astounding experience descending towards the basement in my grandparents&rsquo; house – it felt cooler and quieter. The light was warm and dimmed, with creepy shadows dropping behind the old furniture that was serving its last years before getting disposed to the city cleaning service.
One of the rooms in the basement was my grandfather’s workshop." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ieftimov.com/post/testing-in-go-go-test/" />

<meta property="og:image" content="https://ieftimov.com/cards/testing-in-go-go-test.png" />
<meta property="article:published_time" content="2019-07-01T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-07-01T00:00:00&#43;00:00"/>

<meta itemprop="name" content="Testing in Go: go test">
<meta itemprop="description" content="As I was going down the stairs I remember feeling the temperature dropping. It was an astounding experience descending towards the basement in my grandparents&rsquo; house – it felt cooler and quieter. The light was warm and dimmed, with creepy shadows dropping behind the old furniture that was serving its last years before getting disposed to the city cleaning service.
One of the rooms in the basement was my grandfather’s workshop.">


<meta itemprop="datePublished" content="2019-07-01T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-07-01T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="3698">

  <meta itemprop="image" content="https://ieftimov.com/cards/testing-in-go-go-test.png">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ieftimov.com/cards/testing-in-go-go-test.png"/>

<meta name="twitter:title" content="Testing in Go: go test"/>
<meta name="twitter:description" content="As I was going down the stairs I remember feeling the temperature dropping. It was an astounding experience descending towards the basement in my grandparents&rsquo; house – it felt cooler and quieter. The light was warm and dimmed, with creepy shadows dropping behind the old furniture that was serving its last years before getting disposed to the city cleaning service.
One of the rooms in the basement was my grandfather’s workshop."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-11264459-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Ilija Eftimov ⚡️</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/">Home</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/short/">Shorts</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/post/">Archives</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/about/">About</a>
          
        
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Ilija Eftimov ⚡️
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/">Home</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/short/">Shorts</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/post/">Archives</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://ieftimov.com/about/">About</a>
          

        

      </li>
    
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Testing in Go: go test</h1>
      
      <div class="post-meta">
        <time datetime="2019-07-01" class="post-time">
          01-07-2019
        </time>
        <div class="post-category">
            <a href="https://ieftimov.com/categories/go/"> go </a>
            <a href="https://ieftimov.com/categories/testing-in-go/"> testing-in-go </a>
            
          </div>
        

        
        

        
        
      </div>
    </header>

    
    

    
    <div class="post-content">
      

<p><img src="/testing-in-go-go-test/moving_forward.png" alt="" /></p>

<p>As I was going down the stairs I remember feeling the temperature dropping. It
was an astounding experience descending towards the basement in my
grandparents&rsquo; house – it felt cooler and quieter. The light was warm and
dimmed, with creepy shadows dropping behind the old furniture that was serving
its last years before getting disposed to the city cleaning service.</p>

<p>One of the rooms in the basement was my grandfather’s workshop. There were many
tools that he collected over the years. Some were hanging on the wall, making
it quite hard for me to reach them. The ones on the working desk were easy to
reach, yet very hard to carry. At least for 5-year-olds.</p>

<p>It was one of the first times I remember trying to handle any tooling.
Watching my grandfather working with tools was always great because I could see
something get created in front of my eyes. I remember him making me a pair of
nunchucks (not a good idea!) A mundane task for him, but I was watching a
magician conjure a pair of home-made nunchucks out of some wood and a very
light chain.  Very cool!</p>

<p>Years later I realised that knowing how to use my tools to create things out of
thin air is one of my great joys. Programmers are also builders, so we have to
know our tools well. We are not making physical masterpieces (nunchuks
anyone?), but we sure have to learn our tools to build good software.</p>

<p>That&rsquo;s why in this article we will look at one important tool from our Go
toolbox - the <code>go test</code> command.</p>

<h2 id="what-is-go-test-anyway">What is <code>go test</code> anyway?</h2>

<p>If you&rsquo;re going to remember anything, remember this: <code>go test</code> is a command
which automates the execution of test files and functions in a Go project. The
<code>go test</code> command ships with Go itself, so if you have Go installed there&rsquo;s
nothing to check - it&rsquo;s available on your machine.</p>

<p><code>go test</code> will recompile each package along with any files with names matching
the file pattern <code>*_test.go</code>. These <code>*_test.go</code> files can contain test
functions, benchmark functions, and example functions. Each listed package will
cause the execution of a separate test binary.</p>

<p><code>go test</code> compiles test files, that declare a package, ending with the suffix
<code>*_test.go</code> as a separate package. It then links them with the main test binary
and runs them.</p>

<p>While <code>go test</code> seems simple on the surface, it actually has many options and
commands. It allows for control of what test to be run, as in file-specific or
package-specific tests, has flags for skipping tests, reporting test coverage
and other options. Also, it has smart caching mechanisms under the hood, to
avoids rebuilding packages every time we run our tests.</p>

<p><code>go test</code> is a compact yet a rich tool that every Gopher should have a solid
command of. We will not look at all its features, but at the end of this
article, we will have a good understanding of the workings of the tool.</p>

<p><img src="/testing-in-go-go-test/jogging.png" alt="" /></p>

<h2 id="running-modes">Running modes</h2>

<p><code>go test</code> has two running modes. Understanding them is essential to having an
easy time working with the tool:</p>

<ol>
<li>Local directory mode, or running without arguments</li>
<li>Package list mode, or running with arguments</li>
</ol>

<p>In the <strong>local directory mode</strong>, <code>go test</code> compiles the package sources and
tests found in the current directory and then runs the resulting test binary.
This mode disables caching. After the package test finishes, <code>go test</code> prints a
summary line showing the test status (&lsquo;ok&rsquo; or &lsquo;FAIL&rsquo;), the package name, and
elapsed time.</p>

<p>To run your tests in this mode, run <code>go test</code> in your project&rsquo;s root directory.</p>

<p>In the <strong>package list mode</strong>, <code>go test</code> compiles and tests each of the packages
listed as arguments to the command. If a package test passes, <code>go test</code> prints
only the final &lsquo;ok&rsquo; summary line. If a package test fails, go test prints the
full test output.</p>

<p>To run your test in this mode, run <code>go test</code> with explicit package arguments.
For example, we can run <code>go test PACKAGE_NAME</code> to test a specific package or
<code>go test ./...</code> to test all packages in a directory tree or <code>go test .</code> to run
all tests in the current directory.</p>

<p>In our daily work with <code>go test</code>, the difference between the two modes is
caching.</p>

<p>When we run <code>go test</code> in package list mode it will cache successful package
test results to avoid unnecessary reruns. When it can find the result of a test
in the cache, <code>go test</code> will redisplay the cached result instead of running the
tests again. When this happens, <code>go test</code> will annotate the test results with
<code>(cached)</code> in place of the elapsed time in the summary line.</p>








<div id="mc_embed_signup">
<form action="https://pm.us20.list-manage.com/subscribe/post?u=d9a6471309140dcd520d05346&amp;id=2aac491644" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
        <div class="heading">Join The Newsletter</div>
        <p>
            I write about backend technologies, programming and cloud architectures. Join hundreds of other developers that get my content, twice a month. Unsubscribe whenever. Never any spam, ads, or affiliate links.
        </p>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Your email address" required>
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">

      
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d9a6471309140dcd520d05346_2aac491644" tabindex="-1" value=""></div>

    <p>You can also subscribe <a href="https://ieftimov.com/index.xml">via RSS</a>.</p>
    </div>
</form>
</div>



<h2 id="test-run-control">Test run control</h2>

<p>One of the major features of the <code>go test</code> command is the ability to control
what tests files and test functions we can run. As we discussed before, <code>go
test</code> has two modes to which we can supply package or file names. Additionally,
we can also selectively run one or more test functions.</p>

<p>To have an easier time further in this post, we will define a type <code>Person</code>.
It will have two functions: a constructor <code>NewPerson</code> and a function <code>older</code>,
which will take a <code>*Person</code> and return if one <code>*Person</code> is older than another
<code>*Person</code>.</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">person</span>

<span class="kn">import</span> <span class="s">&#34;errors&#34;</span>

<span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">age</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="nx">age</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Person</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">age</span> <span class="p">&lt;</span> <span class="mi">1</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;A person is at least 1 years old&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
		<span class="nx">age</span><span class="p">:</span> <span class="nx">age</span><span class="p">,</span>
	<span class="p">},</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">older</span><span class="p">(</span><span class="nx">other</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="p">&gt;</span> <span class="nx">other</span><span class="p">.</span><span class="nx">age</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>

<p>Let&rsquo;s add tests for the constructor and the <code>older</code> function. We want to test
that the constructor will return an error when a negative integer is passed as
the <code>age</code> argument:</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">person</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;testing&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">TestNewPersonPositiveAge</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Expected person, received %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">TestNewPersonNegativeAge</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">p</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Expected error, received %v&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>

<p>Let&rsquo;s add two more tests for the <code>older</code> function. We will create two <code>*Person</code>
with different ages and check for the return value of the <code>older</code> function:</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TestOlderFirstOlderThanSecond</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">p1</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="nx">p2</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

	<span class="k">if</span> <span class="nx">p1</span><span class="p">.</span><span class="nf">older</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Expected p1 with age %d to be younger than p2 with age %d&#34;</span><span class="p">,</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">age</span><span class="p">,</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">TestOlderSecondOlderThanFirst</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">p1</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
	<span class="nx">p2</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

	<span class="k">if</span> <span class="p">!</span><span class="nx">p1</span><span class="p">.</span><span class="nf">older</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Expected p1 with age %d to be older than p2 with age %d&#34;</span><span class="p">,</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">age</span><span class="p">,</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>

<p>(If you find the tests a bit confusing I apologise - tried hard to make them
more readable but it was hard. I guess that says something about the example.)</p>

<p>The first way to control tests running is by supplying the test files as
arguments to the <code>go test</code> command. For example, if we have a <code>person.go</code> and
<code>person_test.go</code> files, we need to run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> person.go person_test.go
ok  	command-line-arguments	<span class="m">0</span>.005s</code></pre></div>

<p>The <code>go test</code> command prints only the final <code>ok</code>, because all the test cases
passed. If we would like to see a more detailed output, we can use the <code>-v</code>
flag:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> person.go person_test.go -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- PASS: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderSecondOlderThanFirst
--- PASS: TestOlderSecondOlderThanFirst <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
PASS
ok  	command-line-arguments	<span class="m">0</span>.005s</code></pre></div>

<p>The second way to run the test for the <code>person</code> package is to supply its name
to the <code>go test</code> command:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> person
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<p>This way, the <code>go test</code> locates the package, builds it and runs its tests.
(Adding the <code>-v</code> flag will produce the same output as before.)</p>

<p>The third way to run tests is by specifying a test function to be run, using
the <code>-run</code> flag. The flag takes an argument, which is a regex that will try to
match against any test functions in the current directory. For example, if we
would like to run the <code>TestNewPersonPositiveAge</code> and <code>TestNewPersonNegativeAge</code>
function, we can do this:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -run TestNewPerson -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
PASS
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<p>If we mistakenly supply a regexp that will not match anything, <code>go test</code> will
inform us about it:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -run TestFoo -v
testing: warning: no tests to run
PASS
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<h2 id="failing-fast">Failing Fast</h2>

<p>Often when running tests we want to lower the waiting time and stop at the
first test failure we hit. The default mode is to wait for all tests to finish
before the errors are reported, so depending on the project this can save us
some time.</p>

<p>To do this, <code>go test</code> has a special flag we can use: <code>-failfast</code>. Fail fast
does what it advertises: it will stop at the first test that fails, exiting the
process that is running the test suite/files. To see it in action, we will
break one of the test functions for the <code>older</code> function that we introduced
earlier:</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Removing everything else for brewity...
</span><span class="c1"></span>
<span class="kd">func</span> <span class="nf">TestOlderFirstOlderThanSecond</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">p1</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
	<span class="nx">p2</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

	<span class="k">if</span> <span class="nx">p1</span><span class="p">.</span><span class="nf">older</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Expected p1 with age %d to be younger than p2 with age %d&#34;</span><span class="p">,</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">age</span><span class="p">,</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>

<p>We know this test will fail: <code>p1</code> will be older than <code>p2</code>, because they are
<code>100</code> and <code>2</code> years old respectively. If we run <code>go test</code> it will run all the
test functions, regardless if some fail:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- FAIL: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
    person_test.go Expected p1 with age <span class="m">100</span> to be younger than p2 with age <span class="nv">2</span>
<span class="o">===</span> RUN   TestOlderSecondOlderThanFirst
--- PASS: TestOlderSecondOlderThanFirst <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
FAIL
<span class="nb">exit</span> status <span class="m">1</span>
FAIL	person	<span class="m">0</span>.004s</code></pre></div>

<p>Now, let&rsquo;s see the difference if we add the <code>-failfast</code> flag:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -v -failfast
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- FAIL: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
    person_test.go Expected p1 with age <span class="m">100</span> to be younger than p2 with age <span class="m">2</span>
FAIL
<span class="nb">exit</span> status <span class="m">1</span>
FAIL	person	<span class="m">0</span>.004s</code></pre></div>

<p>By adding the <code>-failfast</code> flag we actually stopped right where we got the first
failure - when running the <code>TestOlderFirstOlderThanSecond</code> test function. This
option is useful when we do some heavier refactorings of our code. If our
refactor breaks some tests, instead of being overwhelmed by all the errors we
can add the <code>-failfast</code> flag and fix errors one by one.</p>

<p>Next time you do some big refactors give it a shot, it might save you some
sanity as you&rsquo;re fixing the tests.</p>








<div id="mc_embed_signup">
<form action="https://pm.us20.list-manage.com/subscribe/post?u=d9a6471309140dcd520d05346&amp;id=2aac491644" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
        <div class="heading">Join The Newsletter</div>
        <p>
            I write about backend technologies, programming and cloud architectures. Join hundreds of other developers that get my content, twice a month. Unsubscribe whenever. Never any spam, ads, or affiliate links.
        </p>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Your email address" required>
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">

      
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d9a6471309140dcd520d05346_2aac491644" tabindex="-1" value=""></div>

    <p>You can also subscribe <a href="https://ieftimov.com/index.xml">via RSS</a>.</p>
    </div>
</form>
</div>



<p><img src="/testing-in-go-go-test/pie_chart.png" alt="" /></p>

<h2 id="coverage">Coverage</h2>

<p>Another interesting feature that is packed in <code>go test</code> is test coverage. Taken
from Go&rsquo;s website from the <a href="https://blog.golang.org/cover">blog post on
coverage</a>:</p>

<blockquote>
<p>Test coverage is a term that describes how much of a package&rsquo;s code is
exercised by running the package&rsquo;s tests. If executing the test suite causes
80% of the package&rsquo;s source statements to be run, we say that the test
coverage is 80%.</p>
</blockquote>

<p>We will not go in detail here on how the coverage tools work. I recommend
referring to the &ldquo;Test coverage for Go&rdquo; section in the aforementioned post to
understand how it actually measures the coverage.</p>

<p>If we would like to check the test coverage on our <code>Person</code> type and its
functions, we can run <code>go test -cover</code>:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -cover
PASS
coverage: <span class="m">100</span>.0% of statements
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<p>This is great - it means that our tests cover all the functionality of our
functions. To see the coverage tool in action, we can add some more
functionality to the <code>NewPerson</code> constructor function. Creating a person that
is 1000 years old doesn&rsquo;t make much sense, especially
<a href="https://en.wikipedia.org/wiki/List_of_the_verified_oldest_people">knowing</a>
that the older person ever recorded was 122 years old. We can extend the
constructor to validate that the newly created <code>Person</code> instance cannot be
older than 130 years:</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">person</span>

<span class="kn">import</span> <span class="s">&#34;errors&#34;</span>

<span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">age</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="nx">age</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Person</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">age</span> <span class="p">&lt;</span> <span class="mi">1</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;A person is at least 1 years old&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="nx">age</span> <span class="o">&gt;=</span> <span class="mi">130</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;A person cannot be older than 130 years&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
		<span class="nx">age</span><span class="p">:</span> <span class="nx">age</span><span class="p">,</span>
	<span class="p">},</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">older</span><span class="p">(</span><span class="nx">other</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="p">&gt;</span> <span class="nx">other</span><span class="p">.</span><span class="nx">age</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>

<p>If we would run the coverage report again, we will see the following output:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -cover -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- PASS: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderSecondOlderThanFirst
--- PASS: TestOlderSecondOlderThanFirst <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
PASS
coverage: <span class="m">83</span>.3% of statements
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<p>Whoops, our coverage dropped from 100% to 83.3%. To see where our problem is,
we can ask <code>go test</code> to create a coverage profile for us, using the
<code>-coverprofile</code> flag:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -coverprofile<span class="o">=</span>prof.out
PASS
coverage: <span class="m">83</span>.3% of statements
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<p>This will create a <code>prof.out</code> file, looking like this:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ cat prof.out
mode: <span class="nb">set</span>
person/person.go:9.42,10.13 <span class="m">1</span> <span class="m">1</span>
person/person.go:14.2,14.16 <span class="m">1</span> <span class="m">1</span>
person/person.go:18.2,20.3 <span class="m">1</span> <span class="m">1</span>
person/person.go:10.13,12.3 <span class="m">1</span> <span class="m">1</span>
person/person.go:14.16,16.3 <span class="m">1</span> <span class="m">0</span>
person/person.go:23.44,25.2 <span class="m">1</span> <span class="m">1</span></code></pre></div>

<p>We don&rsquo;t have to understand the output here, because Go has another tool that
we can use with the profile file to visualise the coverage report better: its
name is <code>go tool cover</code>. Using the <code>prof.out</code> profile file we have, we can
generate an HTML page that will visualise what parts of the code are covered by
tests:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go tool cover -html<span class="o">=</span>prof.out</code></pre></div>

<p>This command pops open our browser with a page looking like this:</p>











<span class="caption-wrapper">
  <img class="caption" src="/testing-in-go-go-test/coverage-report.png" title="" alt="">
  <span class="caption-text"></span>
</span>


<p>Looking at the image above, the red coloured code is the one that is never run.
In other words, the red code is not covered, while the green one is. The grey
code is not tracked, because from the coverage tool perspective it&rsquo;s
boilerplate (read: not needed to be tested).</p>

<p>From the image, it&rsquo;s clear that our tests never run the new branch where we
handle unreasonably old age as the argument. Let&rsquo;s add another quick test function
that will cover this functionality:</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// person_test.go
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">TestNewPersonHugeAge</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">p</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Expected error, received %v&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>

<p>After running <code>go test -coverprofile=hundred.out -v</code> we will see the coverage
go back to 100% again:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -coverprofile<span class="o">=</span>hundred.out -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonHugeAge
--- PASS: TestNewPersonHugeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- PASS: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderSecondOlderThanFirst
--- PASS: TestOlderSecondOlderThanFirst <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
PASS
coverage: <span class="m">100</span>.0% of statements
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<p>Here&rsquo;s the HTML output of the coverage profile:</p>











<span class="caption-wrapper">
  <img class="caption" src="/testing-in-go-go-test/coverage-report-100.png" title="" alt="">
  <span class="caption-text"></span>
</span>


<p>The <code>go test</code> and <code>go tool cover</code> tools packs more combined functionality. I
encourage you to read more about it in <a href="https://blog.golang.org/cover">the official blog
post</a> and to expriment further with the tools.</p>

<h2 id="running-modes-1">Running modes</h2>

<p>Software is built to serve highly mutable business requirements, which results
in applications that grow and evolve over time. Such applications are
(hopefully) well tested, with tests operating on unit, integration and
end-to-end levels.</p>

<p>A common technique on bigger projects often is to be explicit what type of
tests we want to run. For example, when running <code>go test</code>, do we want to
include running the integration tests of the project, or just the unit tests?
In such cases, there are two useful techniques that come out of the box with
Go: build tags and short mode.</p>

<h3 id="using-short-mode">Using <code>-short</code> mode</h3>

<p>The <code>-short</code> mode for <code>go test</code> allows us to mark any long-running tests to be
skipped in this mode. <code>go test</code> and the <code>testing</code> package support this via the
<code>t.Skip()</code>, the <code>testing.Short()</code> functions and the <code>-short</code> flag.</p>

<p>We can skip a test function by checking if the short mode is on and invoking
the <code>t.Skip</code> function if that returns <code>true</code>. Let&rsquo;s see this by changing an
earlier example:</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TestOlderFirstOlderThanSecond</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">testing</span><span class="p">.</span><span class="nf">Short</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Skip</span><span class="p">(</span><span class="s">&#34;Skipping long-running test.&#34;</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">p1</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="nx">p2</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nf">NewPerson</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

	<span class="k">if</span> <span class="nx">p1</span><span class="p">.</span><span class="nf">older</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Expected p1 with age %d to be younger than p2 with age %d&#34;</span><span class="p">,</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">age</span><span class="p">,</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>

<p>If we run the tests normally, using <code>go test -v</code> we should see no change in the
output:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonHugeAge
--- PASS: TestNewPersonHugeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- PASS: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderSecondOlderThanFirst
--- PASS: TestOlderSecondOlderThanFirst <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
PASS
ok  	person	<span class="m">0</span>.004s</code></pre></div>

<p>If we would enable the short mode using the <code>-short</code> flag, we should see the
change in the behaviour and output:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -short -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonHugeAge
--- PASS: TestNewPersonHugeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- SKIP: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
    person_test.go Skipping long-running test.
<span class="o">===</span> RUN   TestOlderSecondOlderThanFirst
--- PASS: TestOlderSecondOlderThanFirst <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
PASS
ok  	person	<span class="m">0</span>.005s</code></pre></div>

<p>We can see that the output contains one <code>SKIP</code> line, meaning in short mode <code>go
test</code> skipped the test function. We can use <code>-short</code> in other ways, besides
skipping a test. For example, mocking networks calls instead of opening a
connection or loading simple fixtures instead of loading them from a database.
The options are many, it all depends on the function that the test is covering.</p>

<p><img src="/testing-in-go-go-test/building_blocks.png" alt="" /></p>

<h3 id="using-build-tags">Using build tags</h3>

<p><code>go test</code> supports build tags out of the box, like the <code>-short</code> flag. While we
apply the short mode on the function level, we use the build tags on a file
level. This means that there is no way to use build tags to skip one or a few
functions. Rather, build tags are used to run (or skip) a special type of test
files from our test suite.</p>

<p>There are a couple of rules on build tags. As indicated in
<a href="https://stackoverflow.com/a/28007631/601555">this</a> Stack Overflow answer:</p>

<ul>
<li>build tags are special comments, with the format <code>// +build TAGNAME</code></li>
<li>we have to place the tag on the first line of the file</li>
<li>we have to add an empty line after the tag</li>
<li>the tag name comment cannot have a dash, but it allows underscores</li>
</ul>

<p>Following these rules, we can add a tag to our <code>person_test.go</code> file from
earlier:</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// +build person_tests
</span><span class="c1"></span>
<span class="kn">package</span> <span class="nx">person</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;testing&#34;</span>
<span class="p">)</span>

<span class="o">//</span> <span class="nx">Snipped</span><span class="o">...</span></code></pre></td></tr></table>
</div>
</div>

<p>(The <code>person_tests</code> tag is a useless when we have only one file in the test
suite, but we will add it for experimentational purposes.)</p>

<p>To add the build tag to our <code>go test</code> command, we need to run <code>go test
-tags=TAG_NAME</code>. To run the files with the <code>person_tests</code> build tag:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -tags<span class="o">=</span>person_tests -v
<span class="o">===</span> RUN   TestNewPersonPositiveAge
--- PASS: TestNewPersonPositiveAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonNegativeAge
--- PASS: TestNewPersonNegativeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestNewPersonHugeAge
--- PASS: TestNewPersonHugeAge <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderFirstOlderThanSecond
--- PASS: TestOlderFirstOlderThanSecond <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
<span class="o">===</span> RUN   TestOlderSecondOlderThanFirst
--- PASS: TestOlderSecondOlderThanFirst <span class="o">(</span><span class="m">0</span>.00s<span class="o">)</span>
PASS
ok  	person	<span class="m">0</span>.005s</code></pre></div>

<p>Based on the supplied tag, <code>go test</code> detects the files tagged with
<code>person_tests</code> and runs them. If we would supply a tag that does not exist in
the package, the output would report that no files are found:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ go <span class="nb">test</span> -tags<span class="o">=</span>foo -v
?   	person	<span class="o">[</span>no <span class="nb">test</span> files<span class="o">]</span></code></pre></div>

<h2 id="notable-mentions">Notable mentions</h2>

<p>Covering all the features that <code>go test</code> packs in a single post is a hard
undertaking. Here I will mention some other useful features that you should try
to use and read more on:</p>

<ul>
<li>List tests with <code>-list</code>: to list tests, benchmarks, or examples matching a
regular expression passed as the argument. The usage of the <code>-list</code> flags is
analogous to the <code>-run</code> flag that we discussed before. When we use this flag
<code>go test</code> will not run any tests, benchmarks or examples.</li>
<li>Disabling caching with <code>-count</code>: as we discussed before, <code>go test</code> by default
caches test results for packages. It then uses them to skip running tests
that have are not modified between two runs. Although can improve the
performance, there are times when we would like to disable the caching using
the <code>-count=1</code> flag.</li>
<li>Get JSON output using <code>-json</code>: if we would like to take the output of <code>go
test</code> and process it using a program, having it in a JSON format is better
than normal text. This flag will convert the output to JSON, so processing it
with a program is less cumbersome.</li>
<li>Use more CPU cores using <code>-cpu</code>: this flag will set the <code>GOMAXPROCS</code> variable
to the argument that we pass to the flag. It limits the number of operating
system threads that can execute user-level Go code simultaneously.</li>
<li>Detect race conditions using <code>-race</code>: since it&rsquo;s very easy to write
concurrent code in Go, race conditions are always a risk. Go&rsquo;s tooling is
great in this regard - it has a fully integrated race conditions detector in
its toolchain. You can read more about it in <a href="https://blog.golang.org/race-detector">its announcement blog
post</a>.</li>
</ul>








<div id="mc_embed_signup">
<form action="https://pm.us20.list-manage.com/subscribe/post?u=d9a6471309140dcd520d05346&amp;id=2aac491644" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
        <div class="heading">Join The Newsletter</div>
        <p>
            I write about backend technologies, programming and cloud architectures. Join hundreds of other developers that get my content, twice a month. Unsubscribe whenever. Never any spam, ads, or affiliate links.
        </p>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Your email address" required>
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">

      
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d9a6471309140dcd520d05346_2aac491644" tabindex="-1" value=""></div>

    <p>You can also subscribe <a href="https://ieftimov.com/index.xml">via RSS</a>.</p>
    </div>
</form>
</div>



    </div>

    
    


    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/testing-in-go-table-driven-tests/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">Testing in Go: Table-Driven Tests</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/testing-in-go-naming-conventions/">
            <span class="next-text nav-default">Testing in Go: Naming Conventions</span>
            <span class="prev-text nav-mobile">Next</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  

  

  

  <div class="disqus-comment">
  <div class="disqus-button" id="load_disqus" onclick="load_disqus()">
    Show Disqus Comments
  </div>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = "https://ieftimov.com/post/testing-in-go-go-test/";
    };
    function load_disqus() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'eftimov';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      $('#load_disqus').remove();
    };
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
  </div>

    

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="https://stackoverflow.com/users/601555/ilija-eftimov" rel="me noopener" class="iconfont"
      title="stack-overflow"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M809.714286 932.571429l-638.857143 0 0-274.285714-91.428571 0 0 365.714286 821.714286 0 0-365.714286-91.428571 0 0 274.285714zm-538.285714-299.428571l18.857143-89.714286 447.428571 94.285714-18.857143 89.142857zm58.857143-213.714286l38.285714-83.428571 414.285714 193.714286-38.285714 82.857143zm114.857143-203.428571l58.285714-70.285714 350.857143 293.142857-58.285714 70.285714zm226.857143-216l272.571429 366.285714-73.142857 54.857143-272.571429-366.285714zm-410.285714 840.571429l0-90.857143 457.142857 0 0 90.857143-457.142857 0z"></path>
</svg>

    </a>
  
    <a href="https://twitter.com/fteem" rel="me noopener" class="iconfont"
      title="twitter"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1264 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M1229.8616 18.043658c0 0-117.852626 63.135335-164.151872 67.344358-105.225559-164.151872-505.082682-92.598492-437.738325 223.078185C278.622548 312.675223 89.216542 47.506814 89.216542 47.506814s-117.852626 189.406006 75.762402 345.139833C127.097743 396.85567 55.544363 371.601535 55.544363 371.601535S26.081207 535.753407 253.368414 615.724832c-21.045112 29.463156-113.643603 8.418045-113.643603 8.418045s25.254134 143.10676 231.496229 180.987961c-143.10676 130.479693-387.230056 92.598492-370.393967 105.225559 206.242095 189.406006 1119.599946 231.496229 1128.01799-643.98042C1179.353331 249.539887 1263.533778 123.269217 1263.533778 123.269217s-130.479693 37.881201-138.897738 33.672179C1225.652577 98.015083 1229.8616 18.043658 1229.8616 18.043658"></path>
</svg>

    </a>
  
    <a href="https://www.linkedin.com/in/ieftimov/" rel="me noopener" class="iconfont"
      title="linkedin"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="33" height="33">
  <path d="M872.405333 872.618667h-151.637333v-237.610667c0-56.661333-1.152-129.578667-79.018667-129.578667-79.061333 0-91.136 61.653333-91.136 125.397334v241.792H398.976V384h145.664v66.602667h1.962667c20.352-38.4 69.845333-78.933333 143.786666-78.933334 153.642667 0 182.058667 101.12 182.058667 232.746667v268.202667zM227.712 317.141333a87.978667 87.978667 0 0 1-88.021333-88.106666 88.064 88.064 0 1 1 88.021333 88.106666z m76.032 555.477334H151.68V384h152.064v488.618667zM948.266667 0H75.562667C33.792 0 0 33.024 0 73.770667v876.458666C0 991.018667 33.792 1024 75.562667 1024h872.576C989.866667 1024 1024 991.018667 1024 950.229333V73.770667C1024 33.024 989.866667 0 948.138667 0h0.128z"></path>
</svg>

    </a>
  
    <a href="https://github.com/fteem" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="ieftimovcom@gmail.com" rel="me noopener" class="iconfont"
      title="email"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>


<a href="https://ieftimov.com/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2014 -
    2019
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Ilija Eftimov
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>






  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  













</body>
</html>
