<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Express yourself - Ilija Eftimov</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Express yourself" />
<meta property="og:description" content="In this blog post I am not going to talk about N.W.A&#39;s song called &ldquo;Express Yourself&rdquo;. Nor Madonna&#39;s. Nope. I&#39;ll talk about Ruby and how wonderfully expressive it is. But, we all know that, don&#39;t we? We have heard that tens or hundreds of times. But, I am not really sure we all know what that means.
Back to the future About two years ago, when I was pair-programming with a more exprienced colleague of mine, I wrote the following code:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ieftimov.com/post/express-yourself/" />
<meta property="article:published_time" content="2015-08-25T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Express yourself"/>
<meta name="twitter:description" content="In this blog post I am not going to talk about N.W.A&#39;s song called &ldquo;Express Yourself&rdquo;. Nor Madonna&#39;s. Nope. I&#39;ll talk about Ruby and how wonderfully expressive it is. But, we all know that, don&#39;t we? We have heard that tens or hundreds of times. But, I am not really sure we all know what that means.
Back to the future About two years ago, when I was pair-programming with a more exprienced colleague of mine, I wrote the following code:"/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://ieftimov.com/css/main.css" />
		<link rel="stylesheet" type="text/css" href="https://ieftimov.com/css/overrides.css" />
	

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://ieftimov.com/js/main.js"></script><script src="https://ieftimov.com/js/tooltip.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://ieftimov.com/">
				<img src="https://pbs.twimg.com/profile_images/1194757753585225728/JbET17PZ_400x400.jpg" alt="Ilija Eftimov" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://ieftimov.com/">Ilija Eftimov</a></h1>
	<div class="site-description"><p>Software engineer, author and open source contributor</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/fteem" title="Github"><i data-feather="github"></i></a></li><li><a href="https://twitter.com/fteem" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://www.linkedin.com/in/ieftimov" title="Linkedin"><i data-feather="linkedin"></i></a></li><li><a href="mailto:blog@ieftimov.com" title="Email"><i data-feather="mail"></i></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">Archive</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="https://forms.gle/orfXK5jh1LRaiFzo8">Suggest a topic</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">25</span>
							<span class="rest">Aug 2015</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Express yourself</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>In this blog post I am not going to talk about N.W.A's song called &ldquo;Express Yourself&rdquo;.
Nor Madonna's. Nope. I'll talk about Ruby and how wonderfully expressive it is. But,
we all know that, don't we? We have heard that tens or hundreds of times. But, I am
not really sure we all know what that means.</p>
<h2 id="back-to-the-future">Back to the future</h2>
<p>About two years ago, when I was pair-programming with a more exprienced colleague of mine,
I wrote the following code:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">if</span> object<span style="font-weight:bold">.</span>class <span style="font-weight:bold">==</span> <span style="color:#b84">&#39;SomeClass&#39;</span>
  <span style="color:#998;font-style:italic"># do something...</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>As I wrote the code, he said to me:</p>
<!-- raw HTML omitted -->
<p>I was very inexperienced, but I just interrupted him by saying:</p>
<!-- raw HTML omitted -->
<p>He replied back with:</p>
<!-- raw HTML omitted -->
<p>I got really confused. I was starring blank at the screen for couple of seconds,
thinking that I am doing something very wrong.  With a mild smile on his face and he said:</p>
<!-- raw HTML omitted -->
<p>As I passed the keyboard to him, he changed the code to:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">if</span> object<span style="font-weight:bold">.</span>is_a?(<span style="color:#008080">SomeClass</span>)
  <span style="color:#998;font-style:italic"># do something...</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>I said:</p>
<!-- raw HTML omitted -->
<p>And we just went on to finish the pairing session. But after thinking a bit about it
I understood that the expressiveness of the language is really one of it's greatest
powers. Ruby's made for programmer's happiness and realizing that instead of
writing very verbose code you can use a built-in method makes me very happy.</p>
<h2 id="dont-reinvent-the-wheel">Don't reinvent the wheel</h2>
<p>We often reinvent the wheel. Sometimes it's due to ignorance, other times it's due
to our will to learn how something's implemented. And in whichever group you fall in,
it's okay. If you don't know something - you'll learn it. If you fall into the second
group, well, very good, keep up the good work. Just remember to fall back to the
built-in methods, because they are faster than your imeplementation 99% of the time.</p>
<p>I often write if statements that have this format:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">if</span> post<span style="font-weight:bold">.</span>state <span style="font-weight:bold">==</span> <span style="color:#b84">:published</span> <span style="font-weight:bold">||</span> post<span style="font-weight:bold">.</span>state <span style="font-weight:bold">==</span> <span style="color:#b84">:archived</span>
  <span style="color:#998;font-style:italic"># do something..</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>And it works. But, I always try to make my code more readable. Think about this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="font-weight:bold">if</span> <span style="font-weight:bold">[</span><span style="color:#b84">:published</span>, <span style="color:#b84">:archived</span><span style="font-weight:bold">]</span><span style="font-weight:bold">.</span>include?(post<span style="font-weight:bold">.</span>state)
  <span style="color:#998;font-style:italic"># do something...</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>Instead of gluing couple of predicates with the <code>||</code> operator, you can use the
<code>Array#include?</code> method. Yeah, I guess a lot of you have seen this technique,
but it's basically showing what you can do with just a bit of knowledge of Ruby's
built-in methods.</p>
<p>Another example is this. Let's find all of the key/value pairs in a Hash whose
value is an even number:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#999">hash</span> <span style="font-weight:bold">=</span> { <span style="color:#b84">a</span>: <span style="color:#099">1</span><span style="font-weight:bold"></span>, <span style="color:#b84">b</span>: <span style="color:#099">2</span><span style="font-weight:bold"></span>, <span style="color:#b84">c</span>: <span style="color:#099">4</span><span style="font-weight:bold"></span>, <span style="color:#b84">d</span>: <span style="color:#099">5</span> <span style="font-weight:bold"></span>}

even_hash <span style="font-weight:bold">=</span> {}

<span style="color:#999">hash</span><span style="font-weight:bold">.</span>each <span style="font-weight:bold">do</span> <span style="font-weight:bold">|</span>key, value<span style="font-weight:bold">|</span> 
  <span style="font-weight:bold">if</span> value <span style="font-weight:bold">%</span> <span style="color:#099">2</span> <span style="font-weight:bold"></span><span style="font-weight:bold">==</span> <span style="color:#099">0</span>
    <span style="font-weight:bold"></span>even_hash<span style="font-weight:bold">[</span>key<span style="font-weight:bold">]</span> <span style="font-weight:bold">=</span> value
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span>

<span style="color:#999">puts</span> even_hash

<span style="color:#998;font-style:italic"># Output:</span>
<span style="color:#998;font-style:italic"># {:b=&gt;2, :c=&gt;4}</span></code></pre></div>
<p>This works fine. Right? It returned <code>{:b=&gt;2, :c=&gt;4}</code>. Sure it did, but look
at the code. We are rebuilding a <strong>brand new hash</strong> just to get the pairs with
the even values.</p>
<p>Let's try to refactor this a bit. Take a look at <a href="http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject">Enumerable#inject</a> and let's try using it:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#999">hash</span> <span style="font-weight:bold">=</span> { <span style="color:#b84">a</span>: <span style="color:#099">1</span><span style="font-weight:bold"></span>, <span style="color:#b84">b</span>: <span style="color:#099">2</span><span style="font-weight:bold"></span>, <span style="color:#b84">c</span>: <span style="color:#099">4</span><span style="font-weight:bold"></span>, <span style="color:#b84">d</span>: <span style="color:#099">5</span> <span style="font-weight:bold"></span>}

<span style="color:#999">hash</span><span style="font-weight:bold">.</span>inject({}) <span style="font-weight:bold">do</span> <span style="font-weight:bold">|</span>store, <span style="color:#999">hash</span><span style="font-weight:bold">|</span>
  <span style="font-weight:bold">if</span> <span style="color:#999">hash</span><span style="font-weight:bold">.</span>last <span style="font-weight:bold">%</span> <span style="color:#099">2</span> <span style="font-weight:bold"></span><span style="font-weight:bold">==</span> <span style="color:#099">0</span>
    <span style="font-weight:bold"></span>store<span style="font-weight:bold">[</span><span style="color:#999">hash</span><span style="font-weight:bold">.</span>first<span style="font-weight:bold">]</span> <span style="font-weight:bold">=</span> <span style="color:#999">hash</span><span style="font-weight:bold">.</span>last 
  <span style="font-weight:bold">end</span>
<span style="font-weight:bold">end</span></code></pre></div>
<p>This will work too. Although it looks better, we are building a new hash once again.
Also, it's not really expressive. I mean, what's <code>.first</code> and <code>.last</code>?
We can do 5 more refactoring steps to get to a really readable state of the code,
but let's keep this short.</p>
<p>What you I am aiming for is:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#999">hash</span> <span style="font-weight:bold">=</span> { <span style="color:#b84">a</span>: <span style="color:#099">1</span><span style="font-weight:bold"></span>, <span style="color:#b84">b</span>: <span style="color:#099">2</span><span style="font-weight:bold"></span>, <span style="color:#b84">c</span>: <span style="color:#099">4</span><span style="font-weight:bold"></span>, <span style="color:#b84">d</span>: <span style="color:#099">5</span> <span style="font-weight:bold"></span>}

<span style="color:#999">hash</span><span style="font-weight:bold">.</span>select {<span style="font-weight:bold">|</span>key, value<span style="font-weight:bold">|</span> value<span style="font-weight:bold">.</span>even? }

<span style="color:#998;font-style:italic"># Output:</span>
<span style="color:#998;font-style:italic"># =&gt; {:b=&gt;2, :c=&gt;4}</span></code></pre></div>
<p>See, Ruby's core team implemented <a href="http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-select">Enumerable#select</a>.
And if you didn't know it before, it's fine, just head over to the documentation
and you'll learn it in two minutes. It's awesome.</p>
<p>But also, look at the second part of the code: <code>value.even?</code>. Instead of checking
if the number is divisible by two, Ruby has the <a href="http://ruby-doc.org/core-2.2.0/Fixnum.html#method-i-even-3F">Fixnum#even?</a> method. It's really simple. It returns <code>true</code> if the number it's called on
is an even number. You would agree, very self-explanatory, right?</p>
<h2 id="express-yourself">Express yourself</h2>
<p>We can go on and look at more examples of Ruby's built-in methods. But the whole
point of this blog post is not to explain Ruby's methods. It's about understanding
the power that lies below the surface. We can always reinvent the wheel, especially
with easy stuff like the examples above. But below the surface, there's a huge spectrum
of methods that will make your code more readable and your life easier. And your
colleague (or a future you), that will most likely read the code in couple of months/years,
will be thankful to you.</p>
<p>So go ahead, open some code in your editor, look at simple if statements and loops
and try to find a suitable replacement for the logic in them in Ruby's documentation.</p>
<p>Learning Ruby's expressiveness is easy, it just takes some practice.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/expressiveness">expressiveness</a></li>
							
						</ul>
					
				
			</div><div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'eftimov';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
		Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> Copyright © 2014 - 2019 Ilija Eftimov |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-11264459-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
