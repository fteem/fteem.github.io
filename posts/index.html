<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Ilija Eftimov ⚡️</title><meta name=keywords content><meta name=description content><meta name=author content="Ilija"><link rel=canonical href=https://ieftimov.com/posts/><link href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://ieftimov.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ieftimov.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ieftimov.com/favicon-32x32.png><link rel=apple-touch-icon href=https://ieftimov.com/apple-touch-icon.png><link rel=mask-icon href=https://ieftimov.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.81.0"><link rel=alternate type=application/rss+xml href=https://ieftimov.com/posts/index.xml><script async defer data-domain=ieftimov.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://ieftimov.com/posts/"><meta property="og:updated_time" content="2021-04-12T20:40:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ieftimov.com/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://ieftimov.com/ accesskey=h title="Ilija Eftimov ⚡️ (Alt + H)">Ilija Eftimov ⚡️</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://ieftimov.com/posts title=Archive><span class=active>Archive</span></a></li><li><a href=https://ieftimov.com/about title=About><span>About</span></a></li><li><a href=https://ieftimov.com/newsletter title=Newsletter><span>Newsletter</span></a></li><li><a href=https://forms.gle/orfXK5jh1LRaiFzo8 title="Suggest a topic"><span>Suggest a topic</span></a></li><li><a href=https://www.buymeacoffee.com/ieftimov title="Buy me a ☕"><span>Buy me a ☕</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>Deep dive in CORS: History, how it works, and best practices</h2></header><section class=entry-content><p>The error in your browser’s console No ‘Access-Control-Allow-Origin’ header is present on the requested resource.
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://example.com/
Access to fetch at ‘https://example.com’ from origin ‘http://localhost:3000’ has been blocked by CORS policy.
I am sure you’ve seen one of these errors, or a variation, in your browser’s console. If you have not – don’t fret, you soon will....</p></section><footer class=entry-footer>April 12, 2021&nbsp;·&nbsp;20 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Deep dive in CORS: History, how it works, and best practices" href=https://ieftimov.com/post/deep-dive-cors-history-how-it-works-best-practices/></a></article><article class=post-entry><header class=entry-header><h2>Testing in Go: Stop Leaking Files</h2></header><section class=entry-content><p>No test suite is perfect. Some test suites are missing good helper functions; others are under-configured or over-customize. Some have obsolete packages included and are left unmaintained. Folks that have experience with more mature projects will likely agree that all of the above can be found in the wild.
Often, when we test our Go programs, need to create files. Such files can be just fixture files, or whole file trees, to set up the correct environment for the tests to run....</p></section><footer class=entry-footer>May 22, 2020&nbsp;·&nbsp;14 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Stop Leaking Files" href=https://ieftimov.com/post/testing-in-go-stop-leaking-files/></a></article><article class=post-entry><header class=entry-header><h2>Four Steps to Daemonize Your Go Programs</h2></header><section class=entry-content><p>If you have ever worked with Ruby, or have maybe maintained a Rails application, I am sure the name Sidekiq will sound familiar. For those unfamiliar with the project, Sidekiq is a job system for Ruby. It is a wildly popular project, and the author has turned it into a successful business.
None of the above would be relevant if Sidekiq’s author Mike Perham, in 2014, did not write a concise and informative post titled “Don’t Daemonize your Daemons!...</p></section><footer class=entry-footer>May 2, 2020&nbsp;·&nbsp;16 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Four Steps to Daemonize Your Go Programs" href=https://ieftimov.com/post/four-steps-daemonize-your-golang-programs/></a></article><article class=post-entry><header class=entry-header><h2>Understanding bytes in Go by building a TCP protocol</h2></header><section class=entry-content><p>Some of my newsletter subscribers have asked me a few times what is the easiest way to think about byte slices, or using Go’s syntax: []byte. Folks that have experience with low-level languages, where working with bytes is widespread, usually do not have challenges comprehending what []byte means and how to use it.
But, if you come from a dynamic or a high-level language background, although everything we do ends up being a bunch of bytes, higher-level languages hide such details from us....</p></section><footer class=entry-footer>April 2, 2020&nbsp;·&nbsp;28 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Understanding bytes in Go by building a TCP protocol" href=https://ieftimov.com/post/understanding-bytes-golang-build-tcp-protocol/></a></article><article class=post-entry><header class=entry-header><h2>Testing in Go: WebSockets</h2></header><section class=entry-content><p>WebSockets offer duplex communication from a non-trusted source to a server that we own across a TCP socket connection. This means that, instead of continually polling the web server for updates and having to perform the whole TCP dance with each request, we can maintain a single TCP socket connection and then send and listen to messages on said connection.
In Go’s ecosystem there are few different implementations of the WebSocket protocol....</p></section><footer class=entry-footer>March 13, 2020&nbsp;·&nbsp;11 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: WebSockets" href=https://ieftimov.com/post/testing-in-go-websockets/></a></article><article class=post-entry><header class=entry-header><h2>Testing in Go: HTTP Servers</h2></header><section class=entry-content><p>Go’s a great hammer for a lot of nails, one of the areas where I find it fitting is building HTTP servers. The net/http package of Go’s standard library makes it easy to attach HTTP handlers to any Go program. What I find delightful is that Go’s standard library, also has packages that make testing HTTP servers as easy as building them.
Nowadays, it’s widely accepted that test coverage is important and useful....</p></section><footer class=entry-footer>March 2, 2020&nbsp;·&nbsp;11 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: HTTP Servers" href=https://ieftimov.com/post/testing-in-go-testing-http-servers/></a></article><article class=post-entry><header class=entry-header><h2>Testing in Go: Clean Tests Using t.Cleanup</h2></header><section class=entry-content><p>Go v1.14 ships with improvements across different aspects of the language. Two of them are brand new t.Cleanup, and b.Cleanup methods, added to the testing package.
The introduction of these methods will make it easier for our tests to clean up after themselves. This was always achievable through the careful composition of (sub)tests and helper functions, but since Go 1.14, the testing package will ship with one right way to do that....</p></section><footer class=entry-footer>February 18, 2020&nbsp;·&nbsp;11 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Clean Tests Using t.Cleanup" href=https://ieftimov.com/post/testing-in-go-clean-tests-using-t-cleanup/></a></article><article class=post-entry><header class=entry-header><h2>Testing in Go: Golden Files</h2></header><section class=entry-content><p>Hardcoding the expected values in an assertion is a straightforward approach in testing. Most of the time, we know the expected output of the unit under test, so simply adding the raw value to the assertion works well.
Things can get tricky when we are testing a unit whose output is cumbersome to hardcode. The straightforward remedy is to extract this cumbersome value to a file that we can then read and compare the output of the unit under test to the output of the file....</p></section><footer class=entry-footer>February 2, 2020&nbsp;·&nbsp;16 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Golden Files" href=https://ieftimov.com/post/testing-in-go-golden-files/></a></article><article class=post-entry><header class=entry-header><h2>Make resilient Go net/http servers using timeouts, deadlines and context cancellation</h2></header><section class=entry-content><p>When it comes to timeouts, there are two types of people: those who know how tricky they can be, and those who are yet to find out.
As tricky as they are, timeouts are a reality in the connected world we live in. As I am writing this, on the other side of the table, two persons are typing on their smartphones, probably chatting to people very far from them. All made possible because of networks....</p></section><footer class=entry-footer>January 5, 2020&nbsp;·&nbsp;15 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Make resilient Go net/http servers using timeouts, deadlines and context cancellation" href=https://ieftimov.com/post/make-resilient-golang-net-http-servers-using-timeouts-deadlines-context-cancellation/></a></article><article class=post-entry><header class=entry-header><h2>Testing in Go: Test Doubles by Example</h2></header><section class=entry-content><p>One of the biggest misconceptions is that doubles are a specific implementation of mocks or other testing constructs that we use in testing.
Dummies, mocks, stubs, fakes, and spies ARE test doubles. Test double is the category of these test constructs. Over the years, there has been some confusion around this concept.
It is my observation that this confusion arises from the naming of testing constructs that the popular testing frameworks use....</p></section><footer class=entry-footer>December 16, 2019&nbsp;·&nbsp;9 min&nbsp;·&nbsp;Ilija</footer><a class=entry-link aria-label="post link to Testing in Go: Test Doubles by Example" href=https://ieftimov.com/post/testing-in-go-test-doubles-by-example/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://ieftimov.com/posts/page/2/>Next Page »</a></nav></footer></main><footer class=footer><span>Copyright 2021 © Ilija Eftimov</span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>