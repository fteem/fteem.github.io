

<!DOCTYPE html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head>
  <meta charset="utf-8" />
  
    <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Conditional HTTP GET: The fastest requests need no response body &middot; Ilija Eftimov üë®‚ÄçüöÄ</title>
    <meta name="title" content="Conditional HTTP GET: The fastest requests need no response body &middot; Ilija Eftimov üë®‚ÄçüöÄ" />
  
  <meta name="description" content="Documenting my experiences and learnings, with the goal of helping other software engineers on their journey" />
  
  
  
  <link rel="canonical" href="https://ieftimov.com/posts/conditional-http-get-fastest-requests-need-no-response-body/" />
  
  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.4801cb831d6359e43865e37733fc89df21983ad1c08157d4e17c36e09cb2501cdbd2e1dcde1db016cfa1554f175134d948555ab487816811cb9e93b19673ce89.css"
    integrity="sha512-SAHLgx1jWeQ4ZeN3M/yJ3yGYOtHAgVfU4Xw24JyyUBzb0uHc3h2wFs&#43;hVU8XUTTZSFVatIeBaBHLnpOxlnPOiQ=="
  />
  
  
  <script type="text/javascript" src="/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js" integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1&#43;ko&#43;UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
  
    
    
    
  
  
    
    
  
  
  
    
    <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.15ae6e2c9b1ac24a9ccf40003fa689efb1a18db1ee9b73d780b01a6c31b150441415862513e93184f68fe385759e4698b8763cba6a0f79493c1fed99ad5868d4.js" integrity="sha512-Fa5uLJsawkqcz0AAP6aJ77GhjbHum3PXgLAabDGxUEQUFYYlE&#43;kxhPaP44V1nkaYuHY8umoPeUk8H&#43;2ZrVho1A==" data-copy="Copy" data-copied="Copied"></script>
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Conditional HTTP GET: The fastest requests need no response body" />
<meta property="og:description" content="HTTP caching 101 # Every browser implements its own in-memory caching." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ieftimov.com/posts/conditional-http-get-fastest-requests-need-no-response-body/" /><meta property="og:image" content="https://ieftimov.com/cards/conditional-http-get-fastest-requests-need-no-response-body.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-06-01T00:00:00+00:00" /><meta property="og:site_name" content="Ilija Eftimov üë®‚ÄçüöÄ" />

  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ieftimov.com/cards/conditional-http-get-fastest-requests-need-no-response-body.png"/>

<meta name="twitter:title" content="Conditional HTTP GET: The fastest requests need no response body"/>
<meta name="twitter:description" content="HTTP caching 101 # Every browser implements its own in-memory caching."/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Conditional HTTP GET: The fastest requests need no response body",
    "headline": "Conditional HTTP GET: The fastest requests need no response body",
    
    "abstract": "HTTP caching 101 # Every browser implements its own in-memory caching.",
    "inLanguage": "en",
    "url" : "https:\/\/ieftimov.com\/posts\/conditional-http-get-fastest-requests-need-no-response-body\/",
    "author" : {
      "@type": "Person",
      "name": "Ilija Eftimov"
    },
    "copyrightYear": "2021",
    "dateCreated": "2021-06-01T00:00:00\u002b00:00",
    "datePublished": "2021-06-01T00:00:00\u002b00:00",
    
    "dateModified": "2021-06-01T00:00:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "3817"
  }]
  </script>


  
  <meta name="author" content="Ilija Eftimov" />
  
    
      <link href="https://twitter.com/ilijaio" rel="me" />
    
      <link href="https://www.linkedin.com/in/ieftimov/" rel="me" />
    
      <link href="mailto:blog@ieftimov.com" rel="me" />
    
      <link href="https://captainscodebook.com" rel="me" />
    
      <link href="https://dev.to/fteem" rel="me" />
    
      <link href="https://github.com/fteem" rel="me" />
    
      <link href="https://t.me/ieftimovcom" rel="me" />
    
  
  
  






  
  <script async defer data-domain="ieftimov.com" src="https://plausible.io/js/plausible.js"></script>

  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0"
        href="#main-content"
        ><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400"
          >&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold sm:py-10 text-neutral-900 dark:text-neutral print:hidden">
  <nav class="flex justify-between">
    
    <div>
      
        <a
          class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
          rel="me"
          href="/"
          >Ilija Eftimov üë®‚ÄçüöÄ</a
        >
      

    </div>
    
    
      <ul class="flex flex-col list-none ltr:text-right rtl:text-left sm:flex-row">
        
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/"
                title=""
                >Home</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/posts/"
                title="Posts"
                >Essays</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/work"
                title=""
                >Work</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="https://captainscodebook.com"
                title=""
                >Subscribe</a
              >
            </li>
          
        
        
          <li class="ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
            <button
              id="search-button"
              class="text-base hover:text-primary-600 dark:hover:text-primary-400"
              title="Search (/)"
            >
              

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
          </li>
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Conditional HTTP GET: The fastest requests need no response body
      </h1>
      <div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2021-06-01 00:00:00 &#43;0000 UTC">1 June 2021</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">18 mins</span>
    

    
    
  </div>

  
  


      </div>
    </header>
    <section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert">
      
        <div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last">
          <div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden">
            <details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700"
  >
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"
  >
    <nav id="TableOfContents">
  <ul>
    <li><a href="#http-caching-101">HTTP caching 101</a></li>
    <li><a href="#conditional-http-requests">Conditional HTTP requests</a></li>
    <li><a href="#validator-types">Validator types</a>
      <ul>
        <li><a href="#strong-validators">Strong validators</a></li>
        <li><a href="#weak-validators">Weak validators</a></li>
      </ul>
    </li>
    <li><a href="#deeper-into-the-validators">Deeper into the validators</a>
      <ul>
        <li><a href="#last-modified"><code>Last-modified</code></a>
          <ul>
            <li><a href="#setting-the-last-modified">Setting the <code>Last-Modified</code></a></li>
          </ul>
        </li>
        <li><a href="#etag"><code>ETag</code></a>
          <ul>
            <li><a href="#comparing-etags">Comparing <code>ETag</code>s</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#conditional-requests-semantics-and-mechanisms">Conditional requests semantics and mechanisms</a>
      <ul>
        <li><a href="#familiarizing-with-our-application">Familiarizing with our application</a></li>
      </ul>
    </li>
    <li><a href="#conditional-requests-using-etags-and-if-none-match">Conditional requests using <code>ETag</code>s and <code>If-None-Match</code></a>
      <ul>
        <li><a href="#a-manual-approach">A manual approach</a></li>
        <li><a href="#using-helpers">Using helpers</a></li>
      </ul>
    </li>
    <li><a href="#conditional-requests-using-last-modified-and-if-modified-since">Conditional requests using <code>Last-modified</code> and <code>If-Modified-Since</code></a>
      <ul>
        <li><a href="#a-manual-approach-1">A manual approach</a></li>
        <li><a href="#using-fresh_when">Using <code>fresh_when</code></a></li>
      </ul>
    </li>
    <li><a href="#outro">Outro</a></li>
    <li><a href="#further-reading">Further reading</a></li>
  </ul>
</nav>
  </div>
</details>

          </div>
        </div>
      
      <div class="min-w-0 min-h-0 max-w-prose">
        <h2 id="http-caching-101" class="relative group">HTTP caching 101 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#http-caching-101" aria-label="Anchor">#</a></span></h2>
<p>Every browser implements its own in-memory caching. The information about the
cache size per browser is spotty, but there&rsquo;s one thing for sure: the cache
sizes vary. The great thing is that browsers are smart nowadays ‚Äì¬†they manage
their caches opaquely for us, the end-users.</p>
<p>There are a few ways to put these caches to use. But it all starts with HTTP
caching directives (or headers). The two HTTP response headers used for
specifying freshness (another word for should something be cached) are
<code>Cache-Control</code> and <code>Expires</code>:</p>
<ul>
<li><code>Expires</code> sets an explicit date and time when the content expires;</li>
<li><code>Cache-Control</code> specifies how long the browser can cache the content relative
to the fetch time</li>
</ul>
<p>In cases when the request has both headers specified, <code>Cache-Control</code> takes
precedence.</p>
<p>Another way to put the browser caches to use is by using conditional requests
and revalidation. We use the <code>Last-modified</code> and <code>ETag</code> (Entity Tag) response
headers for that purpose:</p>
<ul>
<li><code>Last-modified</code> is a timestamp that specifies when the backend last changed
the object.</li>
<li><code>ETag</code> is a unique identifier for the content as a string. The server decides
its format, but usually, it‚Äôs some form of a hash.</li>
</ul>
<p>As we advance, we will explore caching by using conditional GET requests.
In-depth!</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/browser-server-robots-etag-304.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<h2 id="conditional-http-requests" class="relative group">Conditional HTTP requests <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#conditional-http-requests" aria-label="Anchor">#</a></span></h2>
<p>Conditional requests are HTTP requests that include headers that indicate a
certain precondition. When said headers are present, the HTTP server must check
the condition. The server must perform the check before executing the HTTP
method against the target resource. The result of the request can be
different based on the result of the check of the precondition.</p>
<p>At the core of the conditional HTTP requests are validators. Validators are
metadata the user-agent and the server use to discern if a resource is
stale or not. The revalidation mechanisms implemented by the HTTP server check
if the resource stored on the server matches a specific version that the
user-agent has cached. The HTTP server performs the check (validation) based on
the validators (metadata) sent by the user-agent.</p>
<p>Validators fall in two categories:</p>
<ul>
<li>timestamp of last modification of the resource - the <code>Last-Modified</code> header</li>
<li>unique string representing the resource version - the <code>ETag</code> (entity tag)
header</li>
</ul>
<h2 id="validator-types" class="relative group">Validator types <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#validator-types" aria-label="Anchor">#</a></span></h2>
<p>Both validators, <code>Last-Modified</code> and <code>ETag</code>, allow two types of validation:
weak and strong. Depending on the case, the complexity of implementing the
validation can vary.</p>
<h3 id="strong-validators" class="relative group">Strong validators <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#strong-validators" aria-label="Anchor">#</a></span></h3>
<p>Strong validators are metadata that changes its value whenever the
representational data of the resource changes. The representational data is the
data format that would be observable in the payload body of an HTTP 200 OK
response to <code>GET /resource/:id</code>.</p>
<p>I know that&rsquo;s loaded, so let me explain through an oversimplified example.
Imagine we have a user resource served by <code>GET /users/:id</code>. For example, the
response body of <code>GET /users/1</code> would be:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;id&#34;</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">1</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;name&#34;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#34;Jane&#34;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;age&#34;</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">30</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span></span></span></code></pre></div>
<p>A strong validator in this particular case can be an <code>ETag</code> composed based on
the user&rsquo;s <code>id</code>, <code>name</code>, and <code>age</code> attributes. In Ruby, the MD5 hash of these
three values would be:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#81a1c1">&gt;&gt;</span> <span style="color:#8fbcbb">Digest</span><span style="color:#81a1c1">::</span><span style="color:#8fbcbb">MD5</span><span style="color:#81a1c1">.</span>hexdigest<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;1-Jane-30&#34;</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">=&gt;</span> <span style="color:#a3be8c">&#34;fb324ab8bda9e1cbb47c2a001fa36349&#34;</span></span></span></code></pre></div>
<p>If any of the attributes of the user change, given that our <code>ETag</code> is supposed
to be a strong validator, we would like the <code>ETag</code> value to change. For
example, after <code>Jane</code>&rsquo;s birthday, the <code>age</code> will increase to <code>31</code>. The new
<code>ETag</code> would be:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#81a1c1">&gt;&gt;</span> <span style="color:#8fbcbb">Digest</span><span style="color:#81a1c1">::</span><span style="color:#8fbcbb">MD5</span><span style="color:#81a1c1">.</span>hexdigest<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;1-Jane-31&#34;</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">=&gt;</span> <span style="color:#a3be8c">&#34;f78e2fe80b589cd55a2fef324e877d34&#34;</span></span></span></code></pre></div>
<p>But also the change in the representational data of the resource is observable
by <code>GET</code>-ing it from the server, e.g., <code>GET /users/1</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;id&#34;</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">1</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;name&#34;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#34;Jane&#34;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;age&#34;</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">31</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span></span></span></code></pre></div>
<p>This means that the metadata sent in the <code>ETag</code> changed because it is also
observable by the user-agent in the data of the resource itself ‚Äì not a magical
field in the server&rsquo;s database that the user-agent won&rsquo;t know about.</p>
<p>There are scenarios, such as content negotiation, in which strong validators
can change. The bottom line is: the origin server should only change the
validator‚Äôs value when it is necessary to invalidate the cached responses in
caches and other user-agents.</p>
<p>HTTP uses strong validation by default, but it provides a way for clients to
specify when they use weak validation. Clients can prepend <code>ETag</code>s with the
<code>W/</code> string, denoting that the server should perform a weak validation.</p>
<h3 id="weak-validators" class="relative group">Weak validators <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#weak-validators" aria-label="Anchor">#</a></span></h3>
<p>A weak validator is metadata that might not change for every change to the
representation data. It&rsquo;s the opposite of the strong validators ‚Äì¬†even if the
representation data changes, the HTTP server considers the change not worth
busting the cached representation in the user-agents and other proxies/caches.</p>
<p>Building on the example from above, let&rsquo;s imagine that the representation of
the user is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;id&#34;</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">1</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;name&#34;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#34;Jane&#34;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;age&#34;</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">31</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">&#34;position&#34;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#34;Software Engineer&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span></span></span></code></pre></div>
<p>If this user is promoted, from <code>Software Engineer</code> to <code>Senior Software Engineer</code>, a strong validator would be updated, causing user-agents and proxies
to invalidate their caches. But what about weak validators?</p>
<p><strong>It depends.</strong> The validator&rsquo;s weakness might stem from how the product uses
the data or the context in which it resides. For example, say we have an
endpoint as part of an employee directory within a company. In that context,
the change of <code>age</code> (i.e. birthday) might not be the reason to invalidate a
resource.  Invalidation in such an event will bust the caches, and we will
incur a performance penalty for a non-essential change.</p>
<p>If that is the case, the <code>ETag</code> will not take all attributes from the
representation into account ‚Äì¬†only the relevant ones, hence being a weak
<code>ETag</code>. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#81a1c1">&gt;&gt;</span> etag <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">Digest</span><span style="color:#81a1c1">::</span><span style="color:#8fbcbb">MD5</span><span style="color:#81a1c1">.</span>hexdigest<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;1-Jane-Software-Engineer&#34;</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">=&gt;</span> <span style="color:#a3be8c">&#34;d18968bf453b0208dbbbcb5bd72af3e1&#34;</span></span></span></code></pre></div>
<p>But a change of <code>position</code> (a.k.a. promotion) is relevant information that
<em>should</em> cause the resource to be revalidated by caches.</p>
<p>In other words, an origin server should change a weak entity tag whenever it
considers prior representations to be unacceptable as a substitute for the
current representation.</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/browser-server-robots-weak-etag-304.png" caption="Revalidating weak ETags" alt="Revalidating weak ETags">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;">Revalidating weak ETags</span>
</figure>

<p>Imagine <code>Jane</code> getting a promotion and then still seeing their old title in the
employees&rsquo; directory, even though they worked so hard to get the promotion.
Soul-crushing. And all that because of a weak <code>ETag</code>. So choose your
validators wisely!</p>
<h2 id="deeper-into-the-validators" class="relative group">Deeper into the validators <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#deeper-into-the-validators" aria-label="Anchor">#</a></span></h2>
<p>Let&rsquo;s look at the format of <code>Last-Modified</code> and <code>ETag</code>, how to generate them,
how to perform the comparison, and when to use them.</p>
<h3 id="last-modified" class="relative group"><code>Last-modified</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#last-modified" aria-label="Anchor">#</a></span></h3>
<p>As we already established, the <code>Last-Modified</code> response header is a timestamp
that indicates when the origin server believes the selected resource was last
modified while handling the request.</p>
<p>For example, if the origin server serves a request to <code>GET /users/1</code> at
<code>Date: 2021-05-05 12:00:00</code>, then the <code>Last-Modified</code> header will be set to a
timestamp that the server knows the user with an ID of 1 was last updated.
When the origin server responds to a <code>GET /users/1</code>, even a second later in time
(at <code>Date: 2021-05-05 12:00:01</code>), the server can potentially return a different
<code>Last-Modified</code> as in the meantime the underlying entity might be updated.</p>
<h4 id="setting-the-last-modified" class="relative group">Setting the <code>Last-Modified</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#setting-the-last-modified" aria-label="Anchor">#</a></span></h4>
<p>In the wild, the <code>Last-Modified</code> header on the response is rarely generated
based on a single resource. When set on web pages, the <code>Last-Modified</code> header
will be set based on all the different resources that are rendered on the page.</p>
<p>Therefore the most straightforward way to generating the <code>Last-Modified</code> header
is to take the most recent time that the server has changed any of those
resources. An additional angle to consider is if <strong>all</strong> resources rendered on
the page are worth busting the cache.</p>
<p>For example, a page that renders TV shows for watching, with a list of
recommended shows in the footer, could set the <code>Last-Modified</code> to the most
recent time server updated the TV show entity. When the recommendations in the
footer change, the origin server can still keep the <code>Last-Modified</code> tied to the
show update time, as the recommendations are secondary to the page.</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/browser-server-robots-the-crown-last-modified.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>When the TV show gets a new season, this is an event when the server should
update the <code>Last-Modified</code> header, as we would like all users to see that we
have added a new season.</p>
<p><strong>But</strong> if the recommendations keep people watching and discovering new shows,
then more recent (and better), recommendations should also be taken into
account when setting the <code>Last-Modified</code> header.</p>
<h3 id="etag" class="relative group"><code>ETag</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#etag" aria-label="Anchor">#</a></span></h3>
<p><code>ETag</code> is an opaque validator - as we already mentioned, the server generates
the entity tags, but <em>how</em> it generates them is unknown to the user-agent. In
fact, from the user-agent perspective, the approach to generating the <code>ETag</code> is
irrelevant. It&rsquo;s only crucial that the <code>ETag</code> is changed once the resource
representation changes, so the user-agent can revalidate when the change
happens.</p>
<p>The main principle to generating and sending an <code>ETag</code> is always to create one
where the server can reliably and consistently determine the changes on the
underlying resource. Proper usage of <code>ETag</code>s will substantially reduce HTTP
network traffic and can be a significant factor in improving service
scalability and reliability.</p>
<h4 id="comparing-etags" class="relative group">Comparing <code>ETag</code>s <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#comparing-etags" aria-label="Anchor">#</a></span></h4>
<p><code>ETag</code>s opaqueness forced their inventors to add a weakness denominator: the
<code>W/</code> prefix. For example, the same <code>ETag</code> header will be differently handled by
the user-agent, based on the weakness indicator:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># Weak ETag
</span></span><span style="display:flex;"><span>ETag: &#34;W/3cb377-13f27-5c0c816db0d40&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Strong ETag
</span></span><span style="display:flex;"><span>ETag: &#34;3cb377-13f27-5c0c816db0d40&#34;</span></span></code></pre></div>
<p>Although they contain the same value, these two headers are different due to
the weakness indicator. Looking at the example above, we can see that strong is
the default, or in other words, an <code>ETag</code> is weak only if the weak indicator
(<code>W/</code>) is present.</p>
<p>A comparison table on weak and strong <code>ETag</code>s looks like this:</p>
<table>
<thead>
<tr>
<th>ETag 1</th>
<th>ETag 2</th>
<th>Strong Comparison</th>
<th>Weak Comparison</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>W/&quot;Foo&quot;</code></td>
<td><code>W/&quot;Foo&quot;</code></td>
<td>No match</td>
<td>Match</td>
</tr>
<tr>
<td><code>W/&quot;Foo&quot;</code></td>
<td><code>W/&quot;Bar&quot;</code></td>
<td>No match</td>
<td>No match</td>
</tr>
<tr>
<td><code>W/&quot;Foo&quot;</code></td>
<td><code>&quot;Foo&quot;</code></td>
<td>No match</td>
<td>Match</td>
</tr>
<tr>
<td><code>&quot;Foo&quot;</code></td>
<td><code>&quot;Foo&quot;</code></td>
<td>Match</td>
<td>Match</td>
</tr>
</tbody>
</table>
<h2 id="conditional-requests-semantics-and-mechanisms" class="relative group">Conditional requests semantics and mechanisms <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#conditional-requests-semantics-and-mechanisms" aria-label="Anchor">#</a></span></h2>
<p>Now that we understand the validator headers and their intricacies let&rsquo;s look
at the precondition and header semantics.</p>
<p>There are five headers used for communicating preconditions between the
user-agent and the servers:</p>
<ol>
<li><code>If-Match</code></li>
<li><code>If-None-Match</code></li>
<li><code>If-Modified-Since</code></li>
<li><code>If-Unmodified-Since</code></li>
<li><code>If-Range</code></li>
</ol>
<p>In this article, we are looking at only conditional reads, or conditional
<code>GET</code>s, as a way of caching content at the user-agent. That&rsquo;s why, out of the
five headers above, we will look only at the 2nd and 3rd: <code>If-None-Match</code> and
<code>If-Modified-Since</code>. The other three <strong>are</strong> used for conditional requests but
of a different kind that we will look into in another article.</p>
<p>Before we continue investigating the two headers, let&rsquo;s first familiarize
ourselves with the example application that we&rsquo;ll be using.</p>
<h3 id="familiarizing-with-our-application" class="relative group">Familiarizing with our application <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#familiarizing-with-our-application" aria-label="Anchor">#</a></span></h3>
<p>We will begin this exploration by looking at a sample application. For my
comfort, we will use a Ruby on Rails application. Yet, the concepts discussed
can be transferred to any web framework or language, as long as it can speak
HTTP.</p>
<p>The application that we will be using to demonstrate these concepts is the
&ldquo;Sample app&rdquo; built as part of the most popular Ruby on Rails book -
<a href="https://www.railstutorial.org/book">Ruby on Rails Tutorial</a> by Michael Hartl.
The complete source code is available <a href="https://github.com/mhartl/sample_app_6th_ed">on
Github</a>.</p>
<p>The sample application is a Twitter clone. It is¬†a multi-tenant application
where users can create <em>microposts</em>. The application&rsquo;s root path (<code>/</code>) points
to the timeline of the logged-in user, which the <code>StaticPagesController#home</code>
action renders:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">class</span> <span style="color:#8fbcbb">StaticPagesController</span> <span style="color:#81a1c1">&lt;</span> <span style="color:#8fbcbb">ApplicationController</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">home</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">if</span> logged_in?
</span></span><span style="display:flex;"><span>      @feed_items <span style="color:#81a1c1">=</span> current_user<span style="color:#81a1c1">.</span>feed<span style="color:#81a1c1">.</span>paginate<span style="color:#eceff4">(</span><span style="color:#a3be8c">page</span><span style="color:#eceff4">:</span> params<span style="color:#81a1c1">[</span><span style="color:#a3be8c">:page</span><span style="color:#81a1c1">]</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">end</span></span></span></code></pre></div>
<p>Below you can see what the microposts feed looks like:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>Let&rsquo;s use this action and explore the various ways we can implement conditional
HTTP requests.</p>
<h2 id="conditional-requests-using-etags-and-if-none-match" class="relative group">Conditional requests using <code>ETag</code>s and <code>If-None-Match</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#conditional-requests-using-etags-and-if-none-match" aria-label="Anchor">#</a></span></h2>
<p>As mentioned in <a href="https://datatracker.ietf.org/doc/html/rfc7232">RFC-7232</a>, the
implementation of <code>ETag</code>s is left to the server itself. That&rsquo;s why there is no
single implementation of <code>ETag</code>s. It is every server for itself.</p>
<p>The case for using conditional requests, in this case, is: when a user is
logged in, we would like <strong>not</strong> to send bytes over the network as long as there
are no new <code>@feed_items</code> on the page.</p>
<p>Why? Think about this: we open the page, get the latest microposts from the
people we follow and read them. That&rsquo;s it. The next time we refresh the page,
if there are no new microposts on the page, our browser already has all the
data in its cache, so there&rsquo;s no need to fetch new bytes from the server.</p>
<p>In such cases, we want to skip (most of) the network traffic and get an HTTP
304 Not modified from the server. As stated in section 4.1 of
<a href="https://datatracker.ietf.org/doc/html/rfc7232#section-4.1">RFC-7232</a>:</p>
<blockquote>
<p>The 304 (Not Modified) status code indicates that a conditional GET
or HEAD request has been received and would have resulted in a 200
(OK) response if it were not for the fact that the condition
evaluated to false. In other words, <strong>there is no need for the server
to transfer a representation of the target resource because the
request indicates that the client, which made the request
conditional, already has a valid representation</strong>; the server is
therefore redirecting the client to make use of that stored
representation as if it were the payload of a 200 (OK) response.</p>
</blockquote>
<p>This excerpt is packed, but the main point is: the client made the request
conditional (using a header), the server evaluated the condition and decided
that the client has the fresh content by returning an HTTP 304.</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/browser-server-robots-etag-304.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>In our example, having the latest <code>@feed_items</code> means that there&rsquo;s nothing new
to be returned by the server, so the server informs the client that the cached
<code>@feed_items</code> are still valid to be used by returning HTTP 304.</p>
<p>Now, <strong>how can we practically do that?</strong></p>
<h3 id="a-manual-approach" class="relative group">A manual approach <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#a-manual-approach" aria-label="Anchor">#</a></span></h3>
<p>As we mentioned before, the <code>ETag</code> is a string that differentiates between
multiple representations of the same resource. It means that if the
<code>@feed_items</code> collection changes, the <code>ETag</code> must also change. In addition, two
identical <code>@feed_items</code> collections must have the same <code>ETag</code>s.</p>
<p>Knowing all of this, our <code>ETag</code> has to consider the <code>id</code> and the <code>content</code> of
the <code>Micropost</code> (the <code>@feed_items</code> collection contains multiple <code>Micropost</code>
objects). If the <code>id</code> or <code>content</code> changes on any <code>Micropost</code>, we want the
<code>ETag</code> to change. When the <code>ETag</code> changes, the client will fail the
revalidation condition, and the server will respond with the latest data.</p>
<p>Therefore, the <code>ETag</code> of the <code>@feed_items</code> collection will consist of all
<code>ETag</code>s of each <code>Micropost</code> in the collection. The implementation would look
like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># app/models/micropost.rb</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">my_etag</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1">[</span><span style="color:#81a1c1">id</span><span style="color:#eceff4">,</span> <span style="color:#8fbcbb">Digest</span><span style="color:#81a1c1">::</span><span style="color:#8fbcbb">MD5</span><span style="color:#81a1c1">.</span>hexdigest<span style="color:#eceff4">(</span>content<span style="color:#eceff4">)</span><span style="color:#81a1c1">].</span>join<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#39;-&#39;</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">end</span></span></span></code></pre></div>
<p>If we run this method against a micropost:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#81a1c1">&gt;&gt;</span> m <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">Micropost</span><span style="color:#81a1c1">.</span>last
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">=&gt;</span> <span style="color:#616e87;font-style:italic">#&lt;Micropost id: 1, content: &#34;Soluta dolorem aspernatur doloremque vel.&#34;, user_id: 1, created_at:...</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">&gt;&gt;</span> m<span style="color:#81a1c1">.</span>id
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">=&gt;</span> <span style="color:#b48ead">1</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">&gt;&gt;</span> m<span style="color:#81a1c1">.</span>content
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">=&gt;</span> <span style="color:#a3be8c">&#34;Soluta dolorem aspernatur doloremque vel.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">&gt;&gt;</span> m<span style="color:#81a1c1">.</span>my_etag
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">=&gt;</span> <span style="color:#a3be8c">&#34;1-3268ba55dd9915c975821eda93eb22dc&#34;</span></span></span></code></pre></div>
<p>We concatenate the MD5 hash of the <code>content</code> and the <code>id</code> to form an <code>ETag</code> for
the micropost.</p>
<div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900">
  <span class="ltr:pr-3 rtl:pl-3 text-primary-400">
    

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>
  <span class="dark:text-neutral-300"><strong>Note:</strong> Usually, we generate the <code>ETag</code> using an MD5 hash of the resource,
allowing us to use a single string value, with 32 hexadecimal digits, instead
of long arbitrary strings. The MD5 hash will also change if any of the
parameters used to generate it get changed.</span>
</div>

<p>Now, back to our controller:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># app/controllers/static_pages_controller.rb</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">home</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">if</span> logged_in?
</span></span><span style="display:flex;"><span>    @feed_items <span style="color:#81a1c1">=</span> current_user<span style="color:#81a1c1">.</span>feed<span style="color:#81a1c1">.</span>paginate<span style="color:#eceff4">(</span><span style="color:#a3be8c">page</span><span style="color:#eceff4">:</span> params<span style="color:#81a1c1">[</span><span style="color:#a3be8c">:page</span><span style="color:#81a1c1">]</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    my_etag <span style="color:#81a1c1">=</span> @feed_items<span style="color:#81a1c1">.</span>map<span style="color:#eceff4">(</span><span style="color:#81a1c1">&amp;</span><span style="color:#a3be8c">:my_etag</span><span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>join<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#39;-&#39;</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">if</span> my_etag <span style="color:#81a1c1">!=</span> request<span style="color:#81a1c1">.</span>headers<span style="color:#81a1c1">[</span><span style="color:#a3be8c">&#39;If-None-Match&#39;</span><span style="color:#81a1c1">]</span>
</span></span><span style="display:flex;"><span>      response<span style="color:#81a1c1">.</span>set_header<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#39;ETag&#39;</span><span style="color:#eceff4">,</span> my_etag<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>      head <span style="color:#a3be8c">:not_modified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">end</span></span></span></code></pre></div>
<p>We generate <code>my_etag</code> for the <code>@feed_items</code> collection by joining all the
<code>Micropost#my_etag</code> outputs for each <code>micropost</code> in the collection. Then, we
take the <code>If-None-Match</code> header from the request and compare it with the
<code>my_etag</code> value.  If the two are the same, that means that the browser already
has the latest <code>@feed_items</code> in its cache, and there&rsquo;s no point for the server
to return it again. Instead, it returns a response with <code>HTTP 304</code> status and
no body.</p>
<p>If the two values differ, then we set the response header <code>ETag</code> to that new
value, and we return the whole response.</p>
<p>But why the <code>If-None-Match</code> header? As described in section 3.2 of
<a href="https://datatracker.ietf.org/doc/html/rfc7232#section-3.2">RFC-7232</a>:</p>
<blockquote>
<p>The &ldquo;If-None-Match&rdquo; header field makes the request method conditional on a
recipient cache or origin server either not having any current representation
of the target resource, or having a selected representation with an
entity-tag that does not match any of those listed in the field-value.</p>
</blockquote>
<p>In other words, the client sends the <code>ETag</code> value in the <code>If-None-Match</code>
header, and our server decides whether that&rsquo;s the valid representation of the
content to be served. If it is valid, then the server will¬†return an HTTP 304
to the
client.</p>
<p>If we send a request to the page again, we will see the following output:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-custom-etag-implementation.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>Our (massive!) custom <code>ETag</code> is present. While such a long header is not
practical, it still works. If we rerun the same request, by refreshing the
page, we will see the server responding with an HTTP 304:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-custom-etag-implementation-304.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>That happened because our browser sent the <code>ETag</code> value as part of the
<code>If-none-match</code> header:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-custom-etag-implementation-304-if-none-match.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>Voila! We implemented our conditional requests using Rails. Before we go on,
there&rsquo;s one thing I&rsquo;d like to point out ‚Äì¬†<strong>avoid custom implementations</strong>.
Our implementation is problematic, as it does not consider the differences
between strong and weak validators.</p>
<p>There&rsquo;s a better way to do it ‚Äì¬†using the built-in helpers by the web
framework or a library for the respective language/framework.</p>
<h3 id="using-helpers" class="relative group">Using helpers <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#using-helpers" aria-label="Anchor">#</a></span></h3>
<p>Similar to most web frameworks, Rails provides helpers to deal with conditional
GET requests. In our particular case, we can substitute all of the custom code
we wrote with a single method call: <code>fresh_when</code>.</p>
<p>Here&rsquo;s the new version of our controller action:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># app/controllers/static_pages_controller.rb</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">home</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">if</span> logged_in?
</span></span><span style="display:flex;"><span>    @feed_items <span style="color:#81a1c1">=</span> current_user<span style="color:#81a1c1">.</span>feed<span style="color:#81a1c1">.</span>paginate<span style="color:#eceff4">(</span><span style="color:#a3be8c">page</span><span style="color:#eceff4">:</span> params<span style="color:#81a1c1">[</span><span style="color:#a3be8c">:page</span><span style="color:#81a1c1">]</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    fresh_when<span style="color:#eceff4">(</span><span style="color:#a3be8c">etag</span><span style="color:#eceff4">:</span> @feed_items<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">end</span></span></span></code></pre></div>
<p>Internally <code>fresh_when</code> will do what our custom code did before, and a bit
more.</p>
<p>If we inspect the method&rsquo;s <a href="https://github.com/rails/rails/blob/85c6823b77b60f2a3a6a25d7a1013032e8c580ef/actionpack/lib/action_controller/metal/conditional_get.rb#L36-L122">source
code</a>,
we will see that <code>fresh_when</code> can handle both strong and weak <code>ETag</code>s and the
<code>Last-modified</code> header (which we will look into soon).</p>
<p>In our code snippet above, we explicitly set the <code>etag</code> to be set by
<code>fresh_when</code> based on the <code>@feed_items</code> collection.</p>
<p>But how Rails know how to calculate the <code>ETag</code>? Well, internally <code>fresh_when</code>
calls the <code>ActionDispatch::Http::Cache::Request#fresh?</code> method, which handles
the <code>ETag</code> validation. It taps into the <code>If-None-Match</code> value of the <code>request</code>
object and the <code>ETag</code> header value of the <code>response</code> and compares the two.</p>
<p>If we test out the new code, we will see a very similar behavior as before:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-fresh-when.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>The server set the <code>ETag</code> response header to a string, prepending it with <code>W/</code>
denoting a weak <code>ETag</code>. The server will exhibit the same behavior on the next
request: an empty response body with the HTTP 304 Not Modified status.</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-fresh-when-304.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<h2 id="conditional-requests-using-last-modified-and-if-modified-since" class="relative group">Conditional requests using <code>Last-modified</code> and <code>If-Modified-Since</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#conditional-requests-using-last-modified-and-if-modified-since" aria-label="Anchor">#</a></span></h2>
<p>As we mentioned before, the <code>Last-modified</code> header contains a timestamp
specifying when the server last changed the object. If we continue to use the
same example with <code>@feed_items</code>, we are running into an interesting problem:
from all the <code>@feed_items</code> in the collection, we have to return only a single
last modified date. What object&rsquo;s last modified date should we pick then?</p>
<p>The easiest way to do it is to find the largest last updated date from all the
objects in the collection. Neatly, most Rails models have a <code>updated_at</code>
attribute updated when the record in the database is changed ‚Äì perfect for us
to use it as the last updated date.</p>
<div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900">
  <span class="ltr:pr-3 rtl:pl-3 text-primary-400">
    

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>
  <span class="dark:text-neutral-300"><strong>Note:</strong> If your framework or application does not have the <code>updated_at</code>
attribute (or similar), you need to figure out another way to deduce when each
record was last updated. We can find the last updated timestamp through an
audit trail or another field in the database. Still, I recommend adding a
<code>updated_at</code> field as it is a neat way to solve the problem.</span>
</div>

<p>In the example application, that would look like:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>last_modified <span style="color:#81a1c1">=</span> @feed_items<span style="color:#81a1c1">.</span>map<span style="color:#eceff4">(</span><span style="color:#81a1c1">&amp;</span><span style="color:#a3be8c">:updated_at</span><span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>max<span style="color:#81a1c1">.</span>httpdate</span></span></code></pre></div>
<p>Knowing all this, let&rsquo;s implement this manually and then using <code>fresh_when</code>.</p>
<h3 id="a-manual-approach-1" class="relative group">A manual approach <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#a-manual-approach-1" aria-label="Anchor">#</a></span></h3>
<p>Validating the <code>If-Modified-Since</code> is a comparison between two <code>DateTime</code>
objects: the <code>last_modified</code> and the <code>if_modified_since</code>. We want to compare
the two and return an HTTP 304 if the <code>last_modified</code> is more recent (larger)
than the <code>if_modified_since</code>.</p>
<p>If the client does not send the <code>If-Modified-Since</code> header, we need to make
sure we return it to the client to send it on the subsequent request.</p>
<p>All of that, in code:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># app/controllers/static_pages_controller.rb</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">home</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">if</span> logged_in?
</span></span><span style="display:flex;"><span>    @feed_items <span style="color:#81a1c1">=</span> current_user<span style="color:#81a1c1">.</span>feed<span style="color:#81a1c1">.</span>paginate<span style="color:#eceff4">(</span><span style="color:#a3be8c">page</span><span style="color:#eceff4">:</span> params<span style="color:#81a1c1">[</span><span style="color:#a3be8c">:page</span><span style="color:#81a1c1">]</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    last_modified <span style="color:#81a1c1">=</span> @feed_items<span style="color:#81a1c1">.</span>map<span style="color:#eceff4">(</span><span style="color:#81a1c1">&amp;</span><span style="color:#a3be8c">:updated_at</span><span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>max<span style="color:#81a1c1">.</span>httpdate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">if</span> request<span style="color:#81a1c1">.</span>headers<span style="color:#81a1c1">.</span>key?<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#39;If-Modified-Since&#39;</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>      if_modified_since <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">DateTime</span><span style="color:#81a1c1">.</span>parse<span style="color:#eceff4">(</span>request<span style="color:#81a1c1">.</span>headers<span style="color:#81a1c1">[</span><span style="color:#a3be8c">&#39;If-Modified-Since&#39;</span><span style="color:#81a1c1">]</span><span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>httpdate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      head <span style="color:#a3be8c">:not_modified</span> <span style="color:#81a1c1;font-weight:bold">if</span> if_modified_since <span style="color:#81a1c1">&gt;=</span> last_modified
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    response<span style="color:#81a1c1">.</span>set_header<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#39;Last-Modified&#39;</span><span style="color:#eceff4">,</span> last_modified<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">end</span></span></span></code></pre></div>
<p>If we give this a shot in the browser, we will see that on the first
request-response cycle, we will get the <code>Last-Modified</code> header set:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-custom-last-modified-implementation.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>Following the spec, on the subsequent request, the browser will send the
<code>If-Modified-Since</code> condition header, which will cause the server to make the
comparison of the two dates. Once it determines that the dates are the same, it
will return an HTTP 304:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-custom-last-modified-implementation-304.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>If we were to update <em>any</em> of the <code>@feed_items</code> or create a new item, the
<code>last_modified</code> date would be changed, and the conditional validation will
fail, resulting in an HTTP 200 instead of an HTTP 304.</p>
<p>Even though this implementation works fine, let&rsquo;s see how we can do that with
<code>fresh_when</code>.</p>
<h3 id="using-fresh_when" class="relative group">Using <code>fresh_when</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#using-fresh_when" aria-label="Anchor">#</a></span></h3>
<p>Similar to before, finding the <code>last_modified</code> stays in the code. But all the
other logic goes away:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># app/controllers/static_pages_controller.rb</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">home</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">if</span> logged_in?
</span></span><span style="display:flex;"><span>    @feed_items <span style="color:#81a1c1">=</span> current_user<span style="color:#81a1c1">.</span>feed<span style="color:#81a1c1">.</span>paginate<span style="color:#eceff4">(</span><span style="color:#a3be8c">page</span><span style="color:#eceff4">:</span> params<span style="color:#81a1c1">[</span><span style="color:#a3be8c">:page</span><span style="color:#81a1c1">]</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    last_modified <span style="color:#81a1c1">=</span> @feed_items<span style="color:#81a1c1">.</span>map<span style="color:#eceff4">(</span><span style="color:#81a1c1">&amp;</span><span style="color:#a3be8c">:updated_at</span><span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>max
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    fresh_when<span style="color:#eceff4">(</span><span style="color:#a3be8c">last_modified</span><span style="color:#eceff4">:</span> last_modified<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">end</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">end</span></span></span></code></pre></div>
<p>That&rsquo;s all!  We substituted that logic with a single line of <code>fresh_when</code>. If
we rerun the same tests, the behavior will stay identical:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-fresh-when-last-modified.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>In the first request-response cycle, we got the <code>Last-Modified</code> header set on
the response.</p>
<p>And similar to before, on the following request, the browser will send the
<code>If-Modified-Since</code> condition header, which will cause the server to make the
comparison of the two dates. Once it determines that the dates are the same, it
will return an HTTP 304:</p>












<figure class="imagecaption">
  <img class="caption" src="/conditional-http-get-fastest-requests-needno-response-body/microposts-feed-fresh-when-last-modified-304.png" caption="" alt="">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<p>As you can see, both the manual and the built-in solutions work identically.
Revalidating requests using <code>Last-Modified</code> and <code>If-Modified-Since</code> is a
powerful mechanism of speeding up our applications by not sending (useless)
bytes over the network.</p>
<h2 id="outro" class="relative group">Outro <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#outro" aria-label="Anchor">#</a></span></h2>
<p>We began our exploration of conditional requests by looking at the
specification. We familiarized ourselves with validators, conditions,and how
they work. We then went on to explore how we can implement conditional HTTP
requests with some header comparisons. Our <code>Last-Modified</code> implementation works
as well as the built-in framework one!</p>
<p>We saw how implementing such optimizations can improve the performance of our
web applications. We all know the fastest requests are the ones that are never
sent. But as the title of this article says: the second-fastest are the ones
that need no response body!</p>
<p>While there are more details that we could explore here, this covers the whole
topic of conditional GET requests. We could further explore conditional
requests for static files (such as assets) in combination with Content Delivery
Networks (or popularly called CDNs). But that is a topic for another article.</p>
<p>And, as always, I hope you all learned something.</p>
<h2 id="further-reading" class="relative group">Further reading <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#further-reading" aria-label="Anchor">#</a></span></h2>
<ul>
<li><a href="https://datatracker.ietf.org/doc/html/rfc7232">RFC-7232</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Conditional_requests">HTTP conditional requests on MDN</a></li>
<li><a href="https://docs.djangoproject.com/en/3.2/topics/conditional-view-processing/">Conditional View Processing</a> in Django</li>
<li><a href="https://api.rubyonrails.org/v6.1.3.1/classes/ActionController/ConditionalGet.html"><code>ActionController::ConditionalGet</code></a> in Rails</li>
<li><a href="https://laravel-news.com/laravel-etag-and-conditionals-package">ETag and Conditionals Package</a> in Laravel</li>
</ul>
<iframe src="https://captainscodebook.com/embed" width="100%" height="400" style="margin-top:2em" frameborder="0" scrolling="no"></iframe>


      </div>
    </section>
    <footer class="pt-8 max-w-prose print:hidden">
      
  <div class="flex">
    
      
      
        
        <img
          class="w-24 h-24 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full"
          width="96"
          height="96"
          alt="Ilija Eftimov"
          src="/img/avatar_huae39953c6189b6aa60e47103b358d088_112612_192x192_fill_q75_box_smart1.jpg"
        />
      
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">
          Author
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Ilija Eftimov
        </div>
      
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://twitter.com/ilijaio"
          target="_blank"
          aria-label="Twitter"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.linkedin.com/in/ieftimov/"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:blog@ieftimov.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://captainscodebook.com"
          target="_blank"
          aria-label="Substack"
          rel="me noopener noreferrer"
          >

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://dev.to/fteem"
          target="_blank"
          aria-label="Dev"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/fteem"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://t.me/ieftimovcom"
          target="_blank"
          aria-label="Telegram"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"/></svg>

  </span>

</a
        >
      
    
  </div>

</div>
    </div>
  </div>


      
  
  <section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://www.facebook.com/sharer/sharer.php?u=https://ieftimov.com/posts/conditional-http-get-fastest-requests-need-no-response-body/&amp;quote=Conditional%20HTTP%20GET:%20The%20fastest%20requests%20need%20no%20response%20body"
          title="Share on Facebook"
          aria-label="Share on Facebook"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://twitter.com/intent/tweet/?url=https://ieftimov.com/posts/conditional-http-get-fastest-requests-need-no-response-body/&amp;text=Conditional%20HTTP%20GET:%20The%20fastest%20requests%20need%20no%20response%20body"
          title="Tweet on Twitter"
          aria-label="Tweet on Twitter"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://reddit.com/submit/?url=https://ieftimov.com/posts/conditional-http-get-fastest-requests-need-no-response-body/&amp;resubmit=true&amp;title=Conditional%20HTTP%20GET:%20The%20fastest%20requests%20need%20no%20response%20body"
          title="Submit to Reddit"
          aria-label="Submit to Reddit"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://ieftimov.com/posts/conditional-http-get-fastest-requests-need-no-response-body/&amp;title=Conditional%20HTTP%20GET:%20The%20fastest%20requests%20need%20no%20response%20body"
          title="Share on LinkedIn"
          aria-label="Share on LinkedIn"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="mailto:?body=https://ieftimov.com/posts/conditional-http-get-fastest-requests-need-no-response-body/&amp;subject=Conditional%20HTTP%20GET:%20The%20fastest%20requests%20need%20no%20response%20body"
          title="Send via email"
          aria-label="Send via email"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</a
        >
      
    
  </section>


      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group" href="/posts/deep-dive-cors-history-how-it-works-best-practices/">
              <span
                class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Deep dive in CORS: History, how it works, and best practices</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2021-04-12 00:00:00 &#43;0000 UTC">12 April 2021</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group" href="/posts/docker-compose-stray-pids-rails-beyond/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Docker Compose, stray PID files, Rails and beyond</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2021-10-27 00:00:00 &#43;0000 UTC">27 October 2021</time>
                  
                </span>
              </span>
              <span
                class="ml-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        
          <div
            class="absolute top-[100vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-0"
          >
            <a
              href="#the-top"
              class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5.5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
              aria-label="Scroll to top"
              title="Scroll to top"
            >
              &uarr;
            </a>
          </div>
        
      </main><footer class="py-10 print:hidden">
  
  
    <nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/analytics"
              title=""
              >Analytics</a
            >
          </li>
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/index.xml"
              title=""
              >RSS</a
            >
          </li>
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="https://forms.gle/orfXK5jh1LRaiFzo8"
              title=""
              >Suggest a topic</a
            >
          </li>
        
      </ul>
    </nav>
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2023
            Ilija Eftimov
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://git.io/hugo-congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    
    
      <div
        class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14"
      >
        <button
          id="appearance-switcher"
          class="w-12 h-12 "
          type="button"
          title="Switch to dark appearance"
        >
          <span class="inline dark:hidden">

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>

</span>
          <span class="hidden dark:inline">

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>

</span>
        </button>
      </div>
    
  </div>
  
  
</footer>
<div
  id="search-wrapper"
  class="fixed inset-0 z-50 flex flex-col p-4 sm:p-6 md:p-[10vh] lg:p-[12vh] w-screen h-screen cursor-default bg-neutral-500/50 backdrop-blur-sm dark:bg-neutral-900/50 invisible"
  data-url="https://ieftimov.com/"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg border-neutral-200 top-20 bg-neutral dark:bg-neutral-800 dark:border-neutral-700"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-transparent focus:outline-2"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
</html>
