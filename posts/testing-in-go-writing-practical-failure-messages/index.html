<!DOCTYPE html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head>
  <meta charset="utf-8" />
  
    <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Testing in Go: Writing Practical Failure Messages &middot; Ilija Eftimov üë®‚ÄçüöÄ</title>
    <meta name="title" content="Testing in Go: Writing Practical Failure Messages &middot; Ilija Eftimov üë®‚ÄçüöÄ" />
  
  <meta name="description" content="Documenting my experiences and learnings, with the goal of helping other software engineers on their journey" />
  
  
  
  <link rel="canonical" href="https://ieftimov.com/posts/testing-in-go-writing-practical-failure-messages/" />
  
  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.b4e16dd9839a706aac3e482fb2ead8a30c01f199844299a37ddc79029b6a3bae7c65ff23668804cf9b10c85a4931caa1dca1efa0395de6dc9fe0784468f41457.css"
    integrity="sha512-tOFt2YOacGqsPkgvsurYowwB8ZmEQpmjfdx5AptqO658Zf8jZogEz5sQyFpJMcqh3KHvoDld5tyf4HhEaPQUVw=="
  />
  
  
  <script type="text/javascript" src="/js/appearance.min.dbca9e2200cf929a23b55442f2ff09361b8d5290147ff1407f89ed3839f0fea13db4e94f5ae6bf2f3de10d322b4bede74b578455e9cc7d5565314d914602c974.js" integrity="sha512-28qeIgDPkpojtVRC8v8JNhuNUpAUf/FAf4ntODnw/qE9tOlPWua/Lz3hDTIrS&#43;3nS1eEVenMfVVlMU2RRgLJdA=="></script>
  
    
    
    
  
  
    
    
  
  
    
    <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.238e7ce9c541b4e7abb5781ad8e736e849e74890fcb8a26e73ea1845f573b3a0cf91418b20ac4401bdbb57d9c6c009d8f6ec50dad6d44b48f3936aea0f95c391.js" integrity="sha512-I4586cVBtOertXga2Oc26EnnSJD8uKJuc&#43;oYRfVzs6DPkUGLIKxEAb27V9nGwAnY9uxQ2tbUS0jzk2rqD5XDkQ==" data-copy="Copy" data-copied="Copied"></script>
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Testing in Go: Writing Practical Failure Messages" />
<meta property="og:description" content="All developers appreciate code that works, yet we spend much of our working hours debugging existing code." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ieftimov.com/posts/testing-in-go-writing-practical-failure-messages/" /><meta property="og:image" content="https://ieftimov.com/cards/testing-in-go-writing-practical-failure-messages.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-06-15T00:00:00+00:00" /><meta property="og:site_name" content="Ilija Eftimov üë®‚ÄçüöÄ" />


  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ieftimov.com/cards/testing-in-go-writing-practical-failure-messages.png"/>

<meta name="twitter:title" content="Testing in Go: Writing Practical Failure Messages"/>
<meta name="twitter:description" content="All developers appreciate code that works, yet we spend much of our working hours debugging existing code."/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Testing in Go: Writing Practical Failure Messages",
    "headline": "Testing in Go: Writing Practical Failure Messages",
    
    "abstract": "All developers appreciate code that works, yet we spend much of our working hours debugging existing code.",
    "inLanguage": "en",
    "url" : "https:\/\/ieftimov.com\/posts\/testing-in-go-writing-practical-failure-messages\/",
    "author" : {
      "@type": "Person",
      "name": "Ilija Eftimov"
    },
    "copyrightYear": "2019",
    "dateCreated": "2019-06-15T00:00:00\u002b00:00",
    "datePublished": "2019-06-15T00:00:00\u002b00:00",
    
    "dateModified": "2019-06-15T00:00:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "2915"
  }]
  </script>


  
  
    <meta name="generator" content="Hugo 0.92.2" />
  
  
  <meta name="author" content="Ilija Eftimov" />
  
    
      <link href="https://twitter.com/ieftmv" rel="me" />
    
      <link href="https://www.linkedin.com/in/ieftimov/" rel="me" />
    
      <link href="mailto:blog@ieftimov.com" rel="me" />
    
      <link href="https://dev.to/fteem" rel="me" />
    
      <link href="https://github.com/fteem" rel="me" />
    
      <link href="https://t.me/ieftimovcom" rel="me" />
    
  
  
  






  
  <script async defer data-domain="ieftimov.com" src="https://plausible.io/js/plausible.js"></script>

  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0"
        href="#main-content"
        ><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400"
          >&darr;</span
        >Skip to main content</a
      >
    </div><header
  class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral"
>
  
  <div>
    
      <a
        class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
        rel="me"
        href="/"
        >Ilija Eftimov üë®‚ÄçüöÄ</a
      >
    

  </div>
  
  
    <nav>
      <ul class="flex flex-col list-none sm:flex-row">
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/"
              title=""
              >Home</a
            >
          </li>
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/posts/"
              title="Posts"
              >Writing</a
            >
          </li>
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/work"
              title=""
              >Work</a
            >
          </li>
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="https://www.getrevue.co/profile/itsilija"
              title=""
              >Subscribe</a
            >
          </li>
        
        
          <li
            class="ltr:text-right rtl:text-left ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <button
              id="search-button"
              class="text-base hover:text-primary-600 dark:hover:text-primary-400"
              title="Search (/)"
            >
              

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
  </span>


            </button>
          </li>
        
      </ul>
    </nav>
  
</header>
<main id="main-content" class="relative grow">
  <article>
    <header class="max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Testing in Go: Writing Practical Failure Messages
      </h1>
      <div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400">
        





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2019-06-15 00:00:00 &#43;0000 UTC">15 June 2019</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">14 mins</span>
    

    
    
  </div>

  
  


      </div>
    </header>
    <section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert">
      
        <div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last">
          <div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10">
            <details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700"
  >
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"
  >
    <nav id="TableOfContents">
  <ul>
    <li><a href="#anatomy-of-a-test-case">Anatomy of a test case</a></li>
    <li><a href="#traits-of-an-failure-message">Traits of an failure message</a></li>
    <li><a href="#inspecting-primitive-types">Inspecting Primitive Types</a></li>
    <li><a href="#inspecting-custom-types">Inspecting Custom Types</a>
      <ul>
        <li><a href="#self-describing-test-cases">Self-describing test cases</a></li>
      </ul>
    </li>
    <li><a href="#simplicity-and-verbosity">Simplicity and verbosity</a></li>
  </ul>
</nav>
  </div>
</details>

          </div>
        </div>
      
      <div class="min-w-0 min-h-0 max-w-prose">
        <p>All developers appreciate code that works, yet we spend much of our working
hours debugging existing code. When fixing existing code, what our test
failures communicate is paramount to the debugging experience we have.</p>
<p>That&rsquo;s why in this article we will look at what it means to write a meaningful
test failure message. We will look at its structure and how we can use some
simple techniques to improve our test failure messages. Whether it&rsquo;s a
colleague of ours, or our future selves, a great error message can make
people&rsquo;s lifes easier and they&rsquo;ll be grateful for it.</p>












<figure class="imagecaption">
  <img class="caption" src="/testing-in-go-writing-practical-failure-messages/under_construction.png" caption="" alt="Two people working on the same computer">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<h2 id="anatomy-of-a-test-case" class="relative group">Anatomy of a test case <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#anatomy-of-a-test-case" aria-label="Anchor">#</a></span></h2>
<p>Before we continue on exploring failure messages and their traits, we should
create a function that we can test. When talking about test failures without
having some actual code to test would be a waste of our time. Let&rsquo;s start
simple - a very small function <code>Max</code> that receives a slice of <code>int</code>s as
arguments and returns the biggest <code>int</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// max.go
</span><span class="c1"></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kd">func</span> <span class="nf">Max</span><span class="p">(</span><span class="nx">numbers</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">max</span> <span class="kt">int</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">number</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">numbers</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">number</span> <span class="p">&gt;</span> <span class="nx">max</span> <span class="p">{</span>
			<span class="nx">max</span> <span class="p">=</span> <span class="nx">number</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="nx">max</span>
<span class="p">}</span></code></pre></div>
<p>The function traverses the slice of <code>int</code>s and it compares each of its
elements, assigning the larger one to the <code>max</code> variable. At the end, it
returns the <code>max</code> as the result. We will use table-driven tests to test this
function. After that, we can disuss its anatomy.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TestMax</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">cases</span> <span class="o">:=</span> <span class="p">[]</span><span class="kd">struct</span><span class="p">{</span>
                <span class="nx">input</span> <span class="p">[]</span><span class="kt">int</span>
                <span class="nx">expected</span> <span class="kt">int</span>
        <span class="p">}{</span>
		<span class="p">{</span>
			<span class="nx">input</span><span class="p">:</span>    <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">},</span>
			<span class="nx">expected</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="nx">input</span><span class="p">:</span>    <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">},</span>
			<span class="nx">expected</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="nx">input</span><span class="p">:</span>    <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">},</span>
			<span class="nx">expected</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cases</span> <span class="p">{</span>
		<span class="nx">actual</span> <span class="o">:=</span> <span class="nf">Max</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span>
		<span class="nx">expected</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span>

		<span class="k">if</span> <span class="nx">actual</span> <span class="o">!=</span> <span class="nx">expected</span> <span class="p">{</span>
			<span class="nx">t</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;Expected %d, got %d&#34;</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">actual</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>Running the tests will produce the following output:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">‚Ä∫ go test
--- FAIL: TestMax (0.00s)
    max_test.go:31: Expected 100, got 5
FAIL
exit status 1
FAIL	_/Users/Ilija/Documents/testing	0.004s</code></pre></div>
<p>Great, now that we have something working, we can dissect our test function.
The function has three main parts:</p>
<ol>
<li>
<p><strong>The setup</strong>: in our example we use table-driven tests, where each of the
structs has an <code>input</code> and an <code>expected</code> output. When the <code>input</code> is passed
to the function, the expected result is the <code>expected</code> attribute of the case
struct. When testing more complicated functions, this is where we would do
any other setup that would be mandatory for the test to run. Some examples
are loading more complicated fixtures (from fixture files) or opening a
connection to a database and querying some data.</p>
</li>
<li>
<p><strong>Building the assertion</strong>: this is where the testing happens. In table
driven tests, this usually means that we have some sort of a <code>for</code> loop that
traverses the <code>struct</code>s and passes the <code>input</code> to the function under test
(in this case <code>Max</code>). Then, we compare the <code>output</code> and the <code>expected</code>
value, which will inform us if the function has passed the test.</p>
</li>
<li>
<p><strong>Reporting</strong>: when the assertion is false, meaning the result and the
expected value are not the same, the test function has to report that
something went wrong. This is where we will focus for the rest of this
article.</p>
</li>
</ol>
<p>Now that we understand the anatomy of a common test case, let&rsquo;s open the
discussion of what are the traits of a good and a bad test failure message.</p>
<h2 id="traits-of-an-failure-message" class="relative group">Traits of an failure message <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#traits-of-an-failure-message" aria-label="Anchor">#</a></span></h2>
<p>To define the traits of an test failure message, let&rsquo;s examine the output of
the failed test from the previous section:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">‚Ä∫ go test -v
=== RUN   TestMax
--- FAIL: TestMax (0.00s)
    max_test.go:31: Expected 100, got 5
FAIL
exit status 1
FAIL	_/Users/Ilija/Documents/testing	0.004s</code></pre></div>
<p>It has three segments:</p>
<ol>
<li>Test status (pass or fail)</li>
<li>Function name that was run and failed</li>
<li>Failure message(s)</li>
</ol>
<p>Although the failure message is the one where we get most of the information
about the failure of the test, we rely on the output as a whole to get useful
information/context about the failure. In the failure message, we can see that
it contains two parts: what was expected and what was received.</p>
<p>Is this good enough? I would say: yes and no.</p>
<p>Yes, because it succintly communicates what our test case expected, and what it
received. No, because it does not provide any other context, although there is
plenty of it in the test function. This hidden knowledge can hinder us when
fixing the test.</p>
<p>So, back to the original question: what are the traits of a bad and a good
test failure message?</p>
<p>Bad failure messages in failed test(s) hide data and behaviour from the
programmer, obstructing them in fixing the failing test(s). Good failure
messages, on the other hand, contain just enough information so the programmer
can make the test pass.</p>
<p>Here&rsquo;s a list of data points that we could expose in our test failure messages:</p>
<ul>
<li>the line number of the failed test in the source file</li>
<li>the source file of the test itself</li>
<li>the expression that failed</li>
<li>the left and right values in the equality comparison</li>
<li>the surrounding state - values of the variables participating in the
expression that failed</li>
</ul>
<p>Keep in mind that these are just guidelines and there is no hard and fast rule.
There have been times where my tests have included enough information, and
still debugging and fixing them was hard. There are many times when a small
refactoring exercise can do wonders for your functions - make sure you run the
tests often and add some more as you go.</p>
<p>In theory such rich failure messages should be useful. But, how do we actually
create them in practice? At the center of all this is a very simple and common
technique - inspecting values of types.</p>
<h2 id="inspecting-primitive-types" class="relative group">Inspecting Primitive Types <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#inspecting-primitive-types" aria-label="Anchor">#</a></span></h2>
<p>Golang has a quite a list of primitive types and always having a value is a
trait they share. Even variables that were only declared have a value without
explicitly defining it, called <a href="https://tour.golang.org/basics/12">zero
values</a>. Inspecting primitive types in a
test failure means we only have to look at their value.</p>
<p>Unsurprisingly, this is simple in Golang. To inspect a value of a primitive
type we only need to print its value using a comibnation of <code>fmt</code>&rsquo;s <code>Sprintf</code>
and <code>Println</code> functions. <code>Sprintf</code> requires a format verb, which will be <code>%v</code>
(stands for <code>value</code>).</p>
<p>Here&rsquo;s a simple program that inspects a few primitive types, priting their
values:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Boolean: %v&#34;</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Integer: %v&#34;</span><span class="p">,</span> <span class="mi">42</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;String: %v&#34;</span><span class="p">,</span> <span class="s">&#34;Hello world&#34;</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Float: %v&#34;</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">))</span>
<span class="p">}</span></code></pre></div>
<p>The <code>main</code> function prints four different values, each of them of a primitive
type. We&rsquo;ve added the type names in the printing statements to aid visual
inspection. If we would run it, the program would produce the following output:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">‚Ä∫ go run whatever.go
Boolean: true
Integer: 42
String: Hello world
Float: 3.14</code></pre></div>
<p>This is a very simple way to inspect any values of primitive type - pass them
to <code>Sprintf</code> (with the <code>%v</code> formatting verb) and send its output to <code>Println</code>.
If we look at our tests from earlier, you will notice that we actually already
use it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Snipped...
</span><span class="c1"></span><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cases</span> <span class="p">{</span>
	<span class="nx">actual</span> <span class="o">:=</span> <span class="nf">Max</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span>

	<span class="k">if</span> <span class="nx">actual</span> <span class="o">!=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span> <span class="p">{</span>
		<span class="nx">out</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Running: Max(%v)\n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="o">+</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Argument: %v \n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="o">+</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Expected result: %d\n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span><span class="p">)</span> <span class="o">+</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Actual result: %d\n&#34;</span><span class="p">,</span> <span class="nx">actual</span><span class="p">)</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>We print the input and the argument using the <code>%v</code> verb and we print the
expected and actual results using the <code>%d</code> ‚Äì denoting a base 10 integer
representation of the value. Using this approach we are able to send any output
to the person battling the failed specs. Here are some other formatting verbs
that we can use:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Boolean:
- %t	the word true or false

Integer:
- %b	base 2
- %c	the character represented by the corresponding Unicode code point
- %d	base 10
- %o	base 8

String:
- %s	the uninterpreted bytes of the string or slice
- %q	a double-quoted string safely escaped with Go syntax</code></pre></div>
<p>There are more verbs available in the <code>fmt</code> package, head over to <a href="https://golang.org/pkg/fmt/#Sprintf">the
documentation</a> to check them out.</p>












<figure class="imagecaption">
  <img class="caption" src="/testing-in-go-writing-practical-failure-messages/searching.png" caption="" alt="Magnifying glass">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<h2 id="inspecting-custom-types" class="relative group">Inspecting Custom Types <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#inspecting-custom-types" aria-label="Anchor">#</a></span></h2>
<p>When it comes to inspecting state of custom types, things can easily get hairy.
All custom types start simple, with few attributes. But as codebases grow, the
size and complexity of custom types can (read: will) grow. A test that once
used a very simple type to check a behaviour of certain function, now might
produce an output containing a huge struct.</p>
<p>So, in such cases how can we show only the relevant values when the tests fail?</p>
<p>Just like with the primitive types, printing the internals of a custom type is
a simple exercise in Go - using the <code>fmt</code> package&rsquo;s <code>Sprintf</code>, using the verbs
<code>%v</code> and <code>%+v</code>.</p>
<p>To look at <code>Sprintf</code>&rsquo;s workings in combination with structs, we will create a
type <code>Person</code>. It has two attributes <code>age</code> (with type <code>int64</code>) and <code>name</code> (with
type <code>string</code>):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">age</span>  <span class="kt">int64</span>
	<span class="nx">name</span> <span class="kt">string</span>
<span class="p">}</span></code></pre></div>
<p>The <code>Person</code> will implement a function <code>older</code> which will return a <code>bool</code>ean,
when a <code>Person</code> is older than another <code>Person</code>. It will do that by comparing
the ages of the two <code>Person</code> structs:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">older</span><span class="p">(</span><span class="nx">other</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="p">&gt;</span> <span class="nx">other</span><span class="p">.</span><span class="nx">age</span>
<span class="p">}</span></code></pre></div>
<p>Having the topic of testing in the focus here, let&rsquo;s also add a test function
for the <code>older</code> function:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TestOlder</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">cases</span> <span class="o">:=</span> <span class="p">[]</span><span class="kd">struct</span> <span class="p">{</span>
		<span class="nx">person1</span>  <span class="o">*</span><span class="nx">Person</span>
		<span class="nx">person2</span>  <span class="o">*</span><span class="nx">Person</span>
		<span class="nx">expected</span> <span class="kt">bool</span>
	<span class="p">}{</span>
		<span class="p">{</span>
			<span class="nx">person1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;Jane&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">22</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">person2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;John&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">23</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">expected</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="nx">person1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;Michelle&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">55</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">person2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;Michael&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">40</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">expected</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="nx">person1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;Ellen&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">80</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">person2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;Elliot&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">80</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">expected</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cases</span> <span class="p">{</span>
		<span class="nx">actual</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">person1</span><span class="p">.</span><span class="nf">older</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">person2</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">actual</span> <span class="o">!=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span> <span class="p">{</span>
			<span class="nx">out</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Running: older(%v)\n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">person2</span><span class="p">)</span> <span class="o">+</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Argument: %v \n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">person2</span><span class="p">)</span> <span class="o">+</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Expected result: %t\n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span><span class="p">)</span> <span class="o">+</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Actual result: %t\n&#34;</span><span class="p">,</span> <span class="nx">actual</span><span class="p">)</span>
			<span class="nx">t</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>As you can see, we use the same table-driven tests approach and similar
formatting for the failure output. If we run the test, we should expect the
last test case to fail, because the two persons that we will compare are not
older than the other.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">‚Ä∫ go test
--- FAIL: TestOlder (0.00s)
    person_test.go:57: Running: older(&amp;{80 Elliot})
        Argument: &amp;{80 Elliot}
        Expected result: true
        Actual result: false
FAIL
exit status 1
FAIL	_/Users/Ilija/Documents/testing_person	0.004s</code></pre></div>
<p>Here we can observe a similar output to the one we had in the previous
examples. The only difference is in the way the struct is formatted: while we
see the values of its attributes, we cannot see the names of the attributes. To
fix this, we can apply the <code>%+v</code> formatting verb, which will produce the
following output:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">‚Ä∫ go test
--- FAIL: TestOlder (0.00s)
    person_test.go:57: Running: older(&amp;{age:80 name:Elliot})
        Argument: &amp;{age:80 name:Elliot}
        Expected result: true
        Actual result: false
FAIL
exit status 1
FAIL	_/Users/Ilija/Documents/testing_person	0.004s</code></pre></div>
<p>The <code>%+v</code> formatting verb when printing structs adds field names to the values,
so it is easier for us to understand the state of the struct. Obviously, this
way of printing all attributes can be problematic when we are facing big
structs.</p>
<p>In such cases, there&rsquo;s a neat trick that we can use: defining a <code>String</code>
function for the struct. By having a <code>String</code> method, our type will implicitly
implement the <code>Stringer</code> interface. A <code>Stringer</code> is a type that can describe
itself as a string. The <code>fmt</code> package (and many others) look for this interface
to print values.</p>
<p>If we would implement a <code>String</code> function for our type, our custom type will be
able to describe itself. The cool part is that we could have the <code>String</code>
function in the test file itself (<code>person_test.go</code>), or in the file with the
type definition (<code>person.go</code>). Wherever Golang finds the function it will use
it when printing the struct.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// person_test.go
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="nx">out</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;\nAge: %d\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span> <span class="o">+</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Name: %s\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
	<span class="k">return</span> <span class="nx">out</span>
<span class="p">}</span></code></pre></div>
<p>By having the <code>String</code> function, we can change the approach we use in the
failure reporting in the test itself:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">if</span> <span class="nx">actual</span> <span class="o">!=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span> <span class="p">{</span>
        <span class="nx">out</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="s">&#34;Argument: &#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">person2</span><span class="p">)</span> <span class="o">+</span>
                <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Expected result: %t\n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span><span class="p">)</span> <span class="o">+</span>
                <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Actual result: %t\n&#34;</span><span class="p">,</span> <span class="nx">actual</span><span class="p">)</span>
        <span class="nx">t</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>Note that in the line where we build the output we use just <code>fmt.Sprint</code> with
the argument of <code>c.person2</code>, which is the struct itself. We do not specify what
attributes will be printed, the <code>String</code> function takes care of everything.</p>
<p>The output will be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">‚Ä∫ go test
--- FAIL: TestOlder (0.00s)
    person_test.go:62: Argument:
        Age: 80
        Name: Elliot
        Expected result: true
        Actual result: false
FAIL
exit status 1
FAIL	_/Users/Ilija/Documents/testing_person	0.004s</code></pre></div>
<p>By implementing the <code>Stringer</code> interface, we let our Golang&rsquo;s <code>fmt</code> package
take care of the printing.</p>
<p>But, could we take this idea further? Imagine if the structs that we use to
build our table-driven tests could actually describe themselves?</p>
<h3 id="self-describing-test-cases" class="relative group">Self-describing test cases <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#self-describing-test-cases" aria-label="Anchor">#</a></span></h3>
<p>From our test that we wrote earlier, let&rsquo;s extract a type (<code>TestCase</code>) and use
it in our <code>TestOlder</code> test function:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">TestCase</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">person1</span>  <span class="o">*</span><span class="nx">Person</span>
	<span class="nx">person2</span>  <span class="o">*</span><span class="nx">Person</span>
	<span class="nx">expected</span> <span class="kt">bool</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">TestOlder</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">cases</span> <span class="o">:=</span> <span class="p">[]</span><span class="nx">TestCase</span><span class="p">{</span>
		<span class="p">{</span>
			<span class="nx">person1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;Ellen&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">80</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">person2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
				<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;Elliot&#34;</span><span class="p">,</span>
				<span class="nx">age</span><span class="p">:</span>  <span class="mi">80</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="nx">expected</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cases</span> <span class="p">{</span>
		<span class="nx">actual</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">person1</span><span class="p">.</span><span class="nf">older</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">person2</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">actual</span> <span class="o">!=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span> <span class="p">{</span>
			<span class="nx">out</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="s">&#34;Argument: &#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">person2</span><span class="p">)</span> <span class="o">+</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Expected result: %t\n&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span><span class="p">)</span> <span class="o">+</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Actual result: %t\n&#34;</span><span class="p">,</span> <span class="nx">actual</span><span class="p">)</span>
			<span class="nx">t</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>(I also removed two of the test cases for brewity.)</p>
<p>This will not change the output of the test - we extracted a type that we
defined inline in the previous versions of the test. If we think about the
failure output that our test function produces, couldn&rsquo;t our new type
<code>TestCase</code> implement the <code>Stringer</code> interface too? What if we define a <code>String</code>
function on <code>TestCase</code> which will print out every test failure in the same,
structured format, standardized across all our test functions in this test
file?</p>
<p>Here&rsquo;s an example of a <code>String</code> function that <code>TestCase</code> can implement:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">tc</span> <span class="nx">TestCase</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="nx">out</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="s">&#34;Person 1: &#34;</span><span class="p">,</span> <span class="nx">tc</span><span class="p">.</span><span class="nx">person1</span><span class="p">,</span> <span class="s">&#34;\n&#34;</span><span class="p">)</span> <span class="o">+</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="s">&#34;Person 2: &#34;</span><span class="p">,</span> <span class="nx">tc</span><span class="p">.</span><span class="nx">person2</span><span class="p">,</span> <span class="s">&#34;\n&#34;</span><span class="p">)</span> <span class="o">+</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Expected result: %t\n&#34;</span><span class="p">,</span> <span class="nx">tc</span><span class="p">.</span><span class="nx">expected</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">out</span>
<span class="p">}</span></code></pre></div>
<p>To put this function in action, we need to make a small modification to the
assertion in the test function:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cases</span> <span class="p">{</span>
        <span class="nx">actual</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">person1</span><span class="p">.</span><span class="nf">older</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">person2</span><span class="p">)</span>

        <span class="k">if</span> <span class="nx">actual</span> <span class="o">!=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">expected</span> <span class="p">{</span>
                <span class="nx">out</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="o">+</span>
                        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Actual result: %t&#34;</span><span class="p">,</span> <span class="nx">actual</span><span class="p">)</span>
                <span class="nx">t</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
        <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>And the output, on failure, will look like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">‚Ä∫ go test
--- FAIL: TestOlder (0.00s)
    person_test.go:71: Person 1:
        Age: 80
        Name: Ellen

        Person 2:
        Age: 80
        Name: Elliot

        Expected result: true
        Actual result: false
FAIL
exit status 1
FAIL	_/Users/Ilija/Documents/testing_person	0.004s</code></pre></div>
<p>Now, we can see very clearly what was the expected result, the actual result
and the state of the variables that are in play for the particular test case.
We can improve the formatting of the output even more, but for our purposes
this will do fine.</p>
<p>I hope that this makes it clear that tests are just code. If we use Golang&rsquo;s
power to construct test cases as structs and use them in tests, we can also use
other Golang goodies like the <code>Stringer</code> interface and make our test cases
report their failures better.</p>












<figure class="imagecaption">
  <img class="caption" src="/testing-in-go-writing-practical-failure-messages/typewriter.png" caption="" alt="Huge typewriter and two persons">
  <span class="caption-text" style="font-size: 0.75em;display: table;margin: 0 auto 1.5em;"></span>
</figure>

<h2 id="simplicity-and-verbosity" class="relative group">Simplicity and verbosity <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#simplicity-and-verbosity" aria-label="Anchor">#</a></span></h2>
<p>Before we wrap up this walkthrough that we embarked on, there&rsquo;s one last thing
that I would like us to discuss. I would go on a limb and say that you are
probably asking yourself one of these two questions already:</p>
<p>Is there a simpler way to do this? Why can&rsquo;t we let a testing library or
framework take care of the failures messages for us?</p>
<p>The answer would be: sure, you can totally do that.</p>
<p>But before you opt-in to use a testing library, I want to you understand few
things so you can make better choices for your projects in the future.</p>
<ol>
<li>Go is simple by design. If you look at the <a href="https://golang.org/ref/spec">The Go Programming Language
Specification</a> you can see how simple and short
it is. This is a feature of the language, not a shortcoming.</li>
<li>Go ships with a lightweight testing framework. It has <a href="https://golang.org/doc/faq#How_do_I_write_a_unit_test">out of the
box</a> support for
writing and running test files, which many other languages do not have.</li>
<li>Tests in Go are just code, so they should be as simple as any Go code.
Naming a test file, writing the tests and running them should all be simple
actions. Analogous to that, a test assertion should be a very simple
comparison between two values.</li>
</ol>
<p>Having these three principles in mind, I hope you can appreciate why writing
some failures messages in Golang tests can be a verbose but simple thing to do.
As Rob Pike, one of Golang&rsquo;s authors, says in his &ldquo;<a href="https://www.youtube.com/watch?v=PAAkCSZUG1c&amp;t=14m35s">Go
Proverbs</a>&rdquo; talk:</p>
<blockquote>
<p>Clear is better than clever&hellip; There are languages where cleverness is
considered a virtue. Go doesn&rsquo;t work that way. Especially when you&rsquo;re
learning Go out of the box, you should be thinking of writing simple and
clear code. That has a lot to do with maintability, stability and the
ability of other people to read your code.</p>
</blockquote>
<div id="revue-embed">
  <form action="https://www.getrevue.co/profile/itsilija/add_subscriber" method="post" id="revue-form" name="revue-form"  target="_blank">
    <p><b>Liked this article?</b>
Subscribe to my newsletter and get future articles in your inbox. It's a
short and sweet read, going out to hundreds of other engineers.</p>
    <div class="revue-form-group">
      <input class="revue-form-field" placeholder="Your email address..." type="email" name="member[email]" id="member_email">
    </div>
    <div class="revue-form-actions">
      <input type="submit" value="Subscribe" name="member[subscribe]" id="member_submit">
    </div>
  </form>
</div>


      </div>
    </section>
    <footer class="pt-8 max-w-prose">
      
  <div class="flex">
    
      
      
        
        <img
          class="w-24 h-24 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full"
          width="96"
          height="96"
          alt="Author"
          src="/img/avatar_huae39953c6189b6aa60e47103b358d088_112612_192x192_fill_q75_box_smart1.jpg"
        />
      
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">
          Author
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Ilija Eftimov
        </div>
      
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://twitter.com/ieftmv"
          target="_blank"
          aria-label="Twitter"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.linkedin.com/in/ieftimov/"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:blog@ieftimov.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="at" class="svg-inline--fa fa-at fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C118.941 8 8 118.919 8 256c0 137.059 110.919 248 248 248 48.154 0 95.342-14.14 135.408-40.223 12.005-7.815 14.625-24.288 5.552-35.372l-10.177-12.433c-7.671-9.371-21.179-11.667-31.373-5.129C325.92 429.757 291.314 440 256 440c-101.458 0-184-82.542-184-184S154.542 72 256 72c100.139 0 184 57.619 184 160 0 38.786-21.093 79.742-58.17 83.693-17.349-.454-16.91-12.857-13.476-30.024l23.433-121.11C394.653 149.75 383.308 136 368.225 136h-44.981a13.518 13.518 0 0 0-13.432 11.993l-.01.092c-14.697-17.901-40.448-21.775-59.971-21.775-74.58 0-137.831 62.234-137.831 151.46 0 65.303 36.785 105.87 96 105.87 26.984 0 57.369-15.637 74.991-38.333 9.522 34.104 40.613 34.103 70.71 34.103C462.609 379.41 504 307.798 504 232 504 95.653 394.023 8 256 8zm-21.68 304.43c-22.249 0-36.07-15.623-36.07-40.771 0-44.993 30.779-72.729 58.63-72.729 22.292 0 35.601 15.241 35.601 40.77 0 45.061-33.875 72.73-58.161 72.73z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://dev.to/fteem"
          target="_blank"
          aria-label="Dev"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="dev" class="svg-inline--fa fa-dev fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/fteem"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://t.me/ieftimovcom"
          target="_blank"
          aria-label="Telegram"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="telegram-plane" class="svg-inline--fa fa-telegram-plane fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"></path></svg>
  </span>

</a
        >
      
    
  </div>

</div>
    </div>
  </div>


      
  
  <section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://www.facebook.com/sharer/sharer.php?u=https://ieftimov.com/posts/testing-in-go-writing-practical-failure-messages/&amp;quote=Testing%20in%20Go:%20Writing%20Practical%20Failure%20Messages"
          title="Share on Facebook"
          aria-label="Share on Facebook"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://twitter.com/intent/tweet/?url=https://ieftimov.com/posts/testing-in-go-writing-practical-failure-messages/&amp;text=Testing%20in%20Go:%20Writing%20Practical%20Failure%20Messages"
          title="Tweet on Twitter"
          aria-label="Tweet on Twitter"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://reddit.com/submit/?url=https://ieftimov.com/posts/testing-in-go-writing-practical-failure-messages/&amp;resubmit=true&amp;title=Testing%20in%20Go:%20Writing%20Practical%20Failure%20Messages"
          title="Submit to Reddit"
          aria-label="Submit to Reddit"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://ieftimov.com/posts/testing-in-go-writing-practical-failure-messages/&amp;title=Testing%20in%20Go:%20Writing%20Practical%20Failure%20Messages"
          title="Share on LinkedIn"
          aria-label="Share on LinkedIn"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
  </span>

</a
        >
      
    
      
        <a
          class="bg-neutral-300 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800 m-1 hover:bg-primary-500 hover:text-neutral rounded min-w-[2.4rem] inline-block text-center p-1"
          href="mailto:?body=https://ieftimov.com/posts/testing-in-go-writing-practical-failure-messages/&amp;subject=Testing%20in%20Go:%20Writing%20Practical%20Failure%20Messages"
          title="Send via email"
          aria-label="Send via email"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="at" class="svg-inline--fa fa-at fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C118.941 8 8 118.919 8 256c0 137.059 110.919 248 248 248 48.154 0 95.342-14.14 135.408-40.223 12.005-7.815 14.625-24.288 5.552-35.372l-10.177-12.433c-7.671-9.371-21.179-11.667-31.373-5.129C325.92 429.757 291.314 440 256 440c-101.458 0-184-82.542-184-184S154.542 72 256 72c100.139 0 184 57.619 184 160 0 38.786-21.093 79.742-58.17 83.693-17.349-.454-16.91-12.857-13.476-30.024l23.433-121.11C394.653 149.75 383.308 136 368.225 136h-44.981a13.518 13.518 0 0 0-13.432 11.993l-.01.092c-14.697-17.901-40.448-21.775-59.971-21.775-74.58 0-137.831 62.234-137.831 151.46 0 65.303 36.785 105.87 96 105.87 26.984 0 57.369-15.637 74.991-38.333 9.522 34.104 40.613 34.103 70.71 34.103C462.609 379.41 504 307.798 504 232 504 95.653 394.023 8 256 8zm-21.68 304.43c-22.249 0-36.07-15.623-36.07-40.771 0-44.993 30.779-72.729 58.63-72.729 22.292 0 35.601 15.241 35.601 40.77 0 45.061-33.875 72.73-58.161 72.73z"></path></svg>
  </span>

</a
        >
      
    
  </section>


      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group" href="/posts/testing-in-go-failing-tests/">
              <span
                class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Testing in Go: Failing Tests</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2019-05-30 00:00:00 &#43;0000 UTC">30 May 2019</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group" href="/posts/testing-in-go-naming-conventions/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Testing in Go: Naming Conventions</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2019-06-24 00:00:00 &#43;0000 UTC">24 June 2019</time>
                  
                </span>
              </span>
              <span
                class="ml-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    </footer>
    
  </article>

      
        <div
          class="absolute top-[110vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-[-5.5rem]"
        >
          <a
            href="#the-top"
            class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
            aria-label="Scroll to top"
            title="Scroll to top"
          >
            &uarr;
          </a>
        </div>
      
    </main>
    <div
  id="search-wrapper"
  class="fixed inset-0 z-50 flex flex-col p-4 sm:p-6 md:p-[10vh] lg:p-[12vh] w-screen h-screen cursor-default bg-neutral-500/50 backdrop-blur-sm dark:bg-neutral-900/50 invisible"
  data-url="https://ieftimov.com/"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg border-neutral-200 top-20 bg-neutral dark:bg-neutral-800 dark:border-neutral-700"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-transparent focus:outline-2"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times" class="svg-inline--fa fa-times fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></svg>
  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>
<footer class="py-10">
  
  
    <nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
          <li class="mb-1 sm:mb-0 sm:mr-7 sm:last:mr-0">
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/analytics"
              title=""
              >Analytics</a
            >
          </li>
        
          <li class="mb-1 sm:mb-0 sm:mr-7 sm:last:mr-0">
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/index.xml"
              title=""
              >RSS</a
            >
          </li>
        
          <li class="mb-1 sm:mb-0 sm:mr-7 sm:last:mr-0">
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="https://forms.gle/orfXK5jh1LRaiFzo8"
              title=""
              >Suggest a topic</a
            >
          </li>
        
      </ul>
    </nav>
  
  <div class="flex justify-between">
    <div>
      
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2022
          Ilija Eftimov
      </p>
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://git.io/hugo-congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    
    
      <div
        class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14"
      >
        <button
          id="appearance-switcher"
          class="w-12 h-12 "
          type="button"
          title="Switch to dark appearance"
        >
          <span class="inline dark:hidden">

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path></svg>
  </span>

</span>
          <span class="hidden dark:inline">

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg>
  </span>

</span>
        </button>
      </div>
    
  </div>
  
  
</footer>
</body>
</html>
